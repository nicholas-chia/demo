var tabletMax992=1024;var enableEndecaForInventory=false;var enableEndecaForStoreDetails=true;var typeAheadAjax;var loadTypeAhead=true;var newPriceStyle=true;var noSelectedStore=false;var checkSessionSupport=Clazz.App.checkSessionSupport();var wagUtiltemp=Clazz.CommonFactory.$wagUtil();var environmentHost;if(typeof elasticSearchServiceConfig!=="undefined"&&elasticSearchServiceConfig[window.location.hostname]){environmentHost=elasticSearchServiceConfig[window.location.hostname];}var isDesktop=!(/iPad|iPhone|iPod|android/i.test(navigator.platform));var deviceType=(isDesktop)?"desktop":(($(window).width()>=768&&$(window).width()<=1024&&!isDesktop)?"tablet":"mobile");var hooklogicEnvironmentHost=(window.location.href.search("www.walgreens.com")>-1||window.location.href.search("www3.walgreens.com")>-1)?"https://www.hlserve.com/":"https://uat1.hlserve.com/";var windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;var shopProductsHitMobile=false,globalNavQueryString="",urlPathName=window.location.pathname;window.enableHeaderAnimation=true;if(windowWidth<768){shopProductsHitMobile=true;}if(urlPathName.search("/pharmacy/psc/")===-1){$(".wag-mobile-menu").removeClass("hide");}var smartBannerQueryParam=(window.location.href.indexOf("?")>-1)?'&ec=WalgreensSmartBanner">':'?ec=WalgreensSmartBanner">';$("head").append('<meta name="apple-itunes-app" content="app-id=335364882, affiliate-data=ct=WalgreensSmartBanner&pt=305946, app-argument='+window.location.href+smartBannerQueryParam);var getWagSid=function(){var cookieList=document.cookie.split(";");var wag_sid_value;for(var i=0;i<cookieList.length;i++){if(cookieList[i].indexOf("wag_sid=")!==-1){wag_sid_value=cookieList[i].split("=")[1];}}return wag_sid_value;};var home_store,home_store_zip,preferred_store,preferred_store_zip,lastSearched_zip,productSearch_storeId_zip,productSearch_storeId;var loggedInOrThirdState=(window.header&&window.header.profileInfo&&(window.header.profileInfo.loggedIn==="true"||window.header.profileInfo.recognizedState))?true:false;var userGeoLocData={storeId:false,zip:false,lat:false,lng:false};var setUserGeoLocation=function(key,value){if(value=="null"||value==null||value=="undefined"){value=undefined;}var USER_GEO_LOCATION={};if(wagUtiltemp.getCookie("USER_GEO_LOCATION")!==null&&wagUtiltemp.getCookie("USER_GEO_LOCATION")!=={}){USER_GEO_LOCATION=JSON.parse(decodeURIComponent(wagUtiltemp.getCookie("USER_GEO_LOCATION")));}USER_GEO_LOCATION[key]=value;var curr_date=new Date();curr_date.setTime(curr_date.getTime()+(30*24*60*60*1000));document.cookie="USER_GEO_LOCATION="+encodeURIComponent(JSON.stringify(USER_GEO_LOCATION))+";expires="+curr_date+";path=/";if(checkSessionSupport&&key==="lastSearched_zip"){sessionStorage.setItem("zip",value);sessionStorage.setItem("zipcode",value);}};if(checkSessionSupport&&sessionStorage.getItem("zip")){setUserGeoLocation("lastSearched_zip",sessionStorage.getItem("zip"));}var getUserGeoLocation=function(source){loggedInOrThirdState=(window.header&&window.header.profileInfo&&(window.header.profileInfo.loggedIn==="true"||window.header.profileInfo.recognizedState))?true:false;var locationsFromCookie={};if(wagUtiltemp.getCookie("USER_GEO_LOCATION")!==null&&wagUtiltemp.getCookie("USER_GEO_LOCATION")!=={}){locationsFromCookie=JSON.parse(decodeURIComponent(wagUtiltemp.getCookie("USER_GEO_LOCATION")));}home_store=locationsFromCookie.home_store;home_store_zip=locationsFromCookie.home_store_zip;home_store_street=locationsFromCookie.home_store_street;preferred_store=locationsFromCookie.preferred_store;preferred_store_zip=locationsFromCookie.preferred_store_zip;preferred_store_street=locationsFromCookie.preferred_store_street;lastSearched_zip=locationsFromCookie.lastSearched_zip;productSearch_storeId=locationsFromCookie.productSearch_storeId;productSearch_storeId_zip=locationsFromCookie.productSearch_storeId_zip;productSearch_storeId_street=locationsFromCookie.productSearch_storeId_street;if(loggedInOrThirdState){if((!home_store&&!preferred_store&&!lastSearched_zip&&productSearch_storeId)||(home_store&&!preferred_store&&!lastSearched_zip&&productSearch_storeId)||(!home_store&&preferred_store&&!lastSearched_zip&&productSearch_storeId)){if(productSearch_storeId_street!=undefined){sessionStorage.setItem("selectedStreet",productSearch_storeId_street);}userGeoLocData.storeId=productSearch_storeId;userGeoLocData.zip=productSearch_storeId_zip;}else{if((!home_store&&!preferred_store&&lastSearched_zip&&!productSearch_storeId)||(home_store&&!preferred_store&&lastSearched_zip&&!productSearch_storeId)||(!home_store&&preferred_store&&lastSearched_zip&&!productSearch_storeId)||(home_store&&preferred_store&&lastSearched_zip&&!productSearch_storeId)){userGeoLocData.storeId=false;userGeoLocData.zip=lastSearched_zip;}else{if((!home_store&&!preferred_store&&lastSearched_zip&&productSearch_storeId)||(home_store&&!preferred_store&&lastSearched_zip&&productSearch_storeId)||(!home_store&&preferred_store&&lastSearched_zip&&productSearch_storeId)||(home_store&&preferred_store&&!lastSearched_zip&&productSearch_storeId)||(home_store&&preferred_store&&lastSearched_zip&&productSearch_storeId)){if(productSearch_storeId_street!=undefined){sessionStorage.setItem("selectedStreet",productSearch_storeId_street);}userGeoLocData.storeId=productSearch_storeId;userGeoLocData.zip=lastSearched_zip;}else{if((home_store&&!preferred_store&&!lastSearched_zip&&!productSearch_storeId)||(home_store&&preferred_store&&!lastSearched_zip&&!productSearch_storeId)){if(home_store_street!=undefined){sessionStorage.setItem("selectedStreet",home_store_street);}userGeoLocData.storeId=home_store;userGeoLocData.zip=home_store_zip;}else{if(!home_store&&preferred_store&&!lastSearched_zip&&!productSearch_storeId){if(preferred_store_street!=undefined){sessionStorage.setItem("selectedStreet",preferred_store_street);}userGeoLocData.storeId=preferred_store;userGeoLocData.zip=preferred_store_zip;}}}}}}else{if(productSearch_storeId&&!lastSearched_zip){if(productSearch_storeId_street!=undefined){sessionStorage.setItem("selectedStreet",productSearch_storeId_street);}userGeoLocData.storeId=productSearch_storeId;userGeoLocData.zip=productSearch_storeId_zip;}else{if(!productSearch_storeId&&lastSearched_zip){userGeoLocData.storeId=false;userGeoLocData.zip=lastSearched_zip;}else{if(productSearch_storeId&&lastSearched_zip){if(productSearch_storeId_street!=undefined){sessionStorage.setItem("selectedStreet",productSearch_storeId_street);}userGeoLocData.storeId=productSearch_storeId;userGeoLocData.zip=lastSearched_zip;}}}}if(locationsFromCookie.lat){userGeoLocData.lat=locationsFromCookie.lat;userGeoLocData.lng=locationsFromCookie.lng;}return userGeoLocData;};getUserGeoLocation();function ellipsisSet(id){var ellipsisText=$("#"+id);var ellipsisMaxLines=3;var ellipsisLineHeight=parseInt(ellipsisText.css("line-height"))||16;var ellipsisContainerHeight=ellipsisLineHeight*ellipsisMaxLines;while(ellipsisText.height()>ellipsisContainerHeight){ellipsisText.text(function(idx,txt){return txt.slice(0,-4)+"...";});}return ellipsisText.text();}function typeAheadGetData(){var chosen="";$("#ntt-placeholder").on("keyup",function(e){if(e.keyCode===27){return false;}var input=$(this);var isMobilekeyup=((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<768);if(isMobilekeyup){if(input.val().length!=0){$(".wag-search-clr-close-icon").show();}else{$(".wag-search-clr-close-icon").hide();}}if(e.keyCode===40){if(chosen===""){chosen=0;if($("#wag-typeaheadlists li a:focus").length==0){$("#wag-typeaheadlists li a").first().focus();}}else{if((chosen+1)<$("#wag-typeaheadlists li").length){chosen++;$("#wag-typeaheadlists li a:focus").parent().next().find("a").focus();}}$("#wag-typeaheadlists li").removeClass("typeaheadselected");$("#wag-typeaheadlists li:eq("+chosen+")").addClass("typeaheadselected");e.preventDefault();return false;}else{if(e.keyCode===38){if(chosen===""){chosen=0;}else{if(chosen>0){chosen--;$("#wag-typeaheadlists li a:focus").prev().focus();}}$("#wag-typeaheadlists li:eq("+chosen+")").addClass("typeaheadselected");e.preventDefault();return false;}else{if(e.keyCode===13){sessionStorage.setItem("navHeaderSearchBoxFlag",true);return false;}else{if(input.val().length>2){loadTypeAhead=true;var keywordTypeahead=input.val().replace(/\t+/g," ").replace(/\s\s+/g," ");keywordTypeahead=encodeURIComponent(keywordTypeahead);var typeaheadurl=elasticSearchServiceEndPoint+"/typeahead?q="+keywordTypeahead+"&deviceType="+deviceType;var typeAheadAjax=$.ajax({url:typeaheadurl,dataType:"json",headers:{"X-wag_sid":getWagSid()},success:function(data){if(!loadTypeAhead){return false;}chosen="";data.ResultSet=data.resultSet;delete data.resultSet;if(data&&data.ResultSet&&data.ResultSet.totalResultsAvailable>0&&data.ResultSet.result&&data.ResultSet.result[0].term){keywordTypeahead=data.ResultSet.result[0].term;}typeAheadPreview(data,keywordTypeahead);if(data&&data.ResultSet&&data.ResultSet.totalResultsAvailable>0){$("#wag-typeaheadcontainer").show();$("#wag-typeaheadlists").empty();$("#resultsCount").text(data.ResultSet.result.length+" results available Keyboard users, use up and down arrows to review and enter to select");setTimeout(function(){$("#ntt-placeholder").attr("aria-expanded","true");$("#resultsCount").text("");},100);var text1="";var searchInput=input.val();if(data&&data.ResultSet&&data.ResultSet.result&&data.ResultSet.result[0].term){getSearchResult=$.trim(data.ResultSet.result[0].term),string1=searchInput.toLowerCase(),string2=getSearchResult.toLowerCase(),link1=encodeURIComponent(searchInput);}if(string1!==string2){$("#wag-typeaheadlists").append('<li role="option"><a href = "/search/results.jsp?Ntt='+link1+'"><b>'+searchInput+"</b></a></li>");}else{}for(var i=0;i<11;i++){if(data&&data.ResultSet&&data.ResultSet.result&&data.ResultSet.result[i]){if(data.ResultSet.result[i].id){var nid=data.ResultSet.result[i].id;}else{if(data.ResultSet.result[i].resultType==="drug info"){var nid=data.ResultSet.result[i].term;}}if(data.ResultSet.result[i].term){data.ResultSet.result[i].term=data.ResultSet.result[i].term.replace(/&amp;/g,"&");}var result=data.ResultSet.result[i].term;var url=data.ResultSet.result[i].url;var abc=result.search("&nbsp;");var childElements="";if(data.ResultSet.singleBrandTierProductType){if(data.ResultSet.result[i].children&&data.ResultSet.result[i].children.length>0){var child=data.ResultSet.result[i].children;for(j=0;j<child.length;j++){childElements+='<li class="sublist"><a href="/search/results.jsp?N='+child[j].id+"&Ntt="+encodeURIComponent(result)+'">'+child[j].term+"</a></li>";}}}if(url&&url.indexOf("/topic/pharmacy")===-1){text1=result;url=url.replace(/ /g,"+");var replaceTerm=new RegExp(input.val(),"i");var text=result.replace(replaceTerm,function($1){return"<strong class='boldtxt'>"+$1+"</strong>";});var link=encodeURIComponent(result);$("#wag-typeaheadlists").append('<li role="option"><a href="'+url+'">'+text+"</a></li>");}else{if(url&&url.indexOf("/topic/pharmacy")>-1){text1=result;var replaceTerm=new RegExp(input.val(),"i");var text=result.replace(replaceTerm,function($1){return"<strong class='boldtxt'>"+$1+"</strong>";});var link=encodeURIComponent(result);$("#wag-typeaheadlists").append('<li role="option"><a href = "'+url+'">'+text+"</a></li>");}else{var searchQuery=input.val();var searchResult=result;words=searchQuery.split(" ");words=words.filter(function(word){return word!=="";});$.each(words,function(){var word=this.trim();var regex=new RegExp("(\\b"+word+")(?!>|b>)","gi");searchResult=searchResult.replace(regex,"<b>$1</b>");});var link=encodeURIComponent(result);if(nid){if(data.ResultSet.result[i].resultType==="drug info"){$("#wag-typeaheadlists").append('<li role="option" nid="'+nid+'" previewtype="drug info"><a href = "/search/results.jsp?Ntt='+link+'">'+searchResult+'</a><f class="wag-text-rx-green wag-body-text1 cursor-pointer"> in drug information</f></li>');}else{if(childElements!==""){$("#wag-typeaheadlists").append('<li class="wag-typeaheadcontainer-li-fontSize" role="option" nid="'+nid+'"><a href = "/search/results.jsp?Ntt='+link+'">'+searchResult+"</a></li> "+childElements+"");}else{$("#wag-typeaheadlists").append('<li role="option" nid="'+nid+'"><a href = "/search/results.jsp?Ntt='+link+'">'+searchResult+"</a></li>");}}}else{if(data.ResultSet.result[i].resultType==="drug info"){$("#wag-typeaheadlists").append('<li role="option"><a href = "/search/results.jsp?Ntt='+link+'">'+searchResult+'</a><f class="wag-text-rx-green wag-body-text1 cursor-pointer"> in drug information</f></li>');}else{if(childElements!==""){$("#wag-typeaheadlists").append('<li class="wag-typeaheadcontainer-li-fontSize" role="option" nid="'+nid+'"><a href = "/search/results.jsp?Ntt='+link+'">'+searchResult+"</a></li> "+childElements+"");}else{$("#wag-typeaheadlists").append('<li role="option"><a href = "/search/results.jsp?Ntt='+link+'">'+searchResult+"</a></li>");}}}}}}if(i===0){$("#wag-typeaheadlists li").first().addClass("wag-bg-tint-blue");}}}else{$("#wag-typeaheadcontainer").hide();$("#ntt-placeholder").attr("aria-expanded","false");$("#wag-typeaheadlists").empty();}loadTypeAhead=false;}});}}}}});$("#wag-typeaheadlists").on("click","li a , li f",function(){var click=$(this).text();if($(this).hasClass("wag-text-rx-green")){var fTag=$(this).parent().children("a");fTag[0].click();return false;}var typeAheadValue=$(this).text().trim();if($(this).next().attr("class")==="icon-XPlain"){window.dtmObject.BAS.eVar96="Recent Searches";}else{window.dtmObject.BAS.eVar96="Type Ahead";}$(document).trigger("triggerDTM","BAS-Search-Type-Ahead-Evar96-Tracking");var url=window.location.href;if(url.indexOf("results.jsp")>-1&&typeof window.headerSearchEvent==="function"){window.headerSearchEvent($(this).attr("href"),"link");return false;}});$("#wag-typeaheadlists").on("mouseover","li",function(){$("#wag-typeaheadlists li a").blur();$("#wag-typeaheadlists li").removeClass("typeaheadselected");});var timeOutForPreview,typedKeyword,hoverUrl;document.previewTimeOut=300;$("body").keydown(function(e){if($("#wag-typeaheadlists").is(":visible")&&e.keyCode===27){$("#wag-typeaheadcontainer").hide();$("#ntt-placeholder").focus();chosen="";}});$("#wag-typeaheadlists").on("mouseenter","li",function(){$("#wag-typeaheadlists li").removeClass("wag-bg-tint-blue");var hoverKeyword=$(this).text();var nidToSend=$(this).attr("nid");if($(this).attr("previewtype")!=undefined){var previewType=$(this).attr("previewtype");var hoverKeyword=$(this).find("a").text();}typedKeyword=$("#ntt-placeholder").val();if(nidToSend){if(nidToSend.toString().indexOf("sku")>-1){hoverUrl=elasticSearchServiceEndPoint+"/typeahead?q="+typedKeyword+"&deviceType="+deviceType+"&nid="+nidToSend;if(previewType){hoverUrl=hoverUrl+"&previewType="+previewType;}}else{hoverUrl=elasticSearchServiceEndPoint+"/typeahead?q="+typedKeyword+"&deviceType="+deviceType+"&nid="+hoverKeyword.replace(/&/,"amp;");if(previewType){hoverUrl=hoverUrl+"&previewType="+previewType;}}clearTimeout(timeOutForPreview);timeOutForPreview=setTimeout(function(){$.ajax({url:hoverUrl,dataType:"json",headers:{"X-wag_sid":getWagSid()},success:function(data){typeAheadPreview(data,hoverKeyword);}});},document.previewTimeOut);}else{clearTimeout(timeOutForPreview);$("#wag-type-right-product-list").hide();$("#wag-typeaheadlists").attr("style","width:100%");}});$("#wag-typeaheadlists").on("keyup","li",function(e){var nidToSend=$(this).attr("nid");var keyUpKeyword=$(this).find("a").text();typedKeyword=$("#ntt-placeholder").val();if($(this).attr("previewtype")!=undefined){var previewType=$(this).attr("previewtype");var hoverKeyword=$(this).find("a").text();}if(e.keyCode===38||e.keyCode===40){window.typeAheadFocus=true;$("#wag-typeaheadlists li").removeClass("wag-bg-tint-blue");if(nidToSend){if(nidToSend.indexOf("sku")>-1){hoverUrl=elasticSearchServiceEndPoint+"/typeahead?q="+typedKeyword+"&deviceType="+deviceType+"&nid="+nidToSend;if(previewType){hoverUrl=hoverUrl+"&previewType="+previewType;}}else{hoverUrl=elasticSearchServiceEndPoint+"/typeahead?q="+typedKeyword+"&deviceType="+deviceType+"&nid="+keyUpKeyword.replace(/&/,"amp;");if(previewType){hoverUrl=hoverUrl+"&previewType="+previewType;}}clearTimeout(timeOutForPreview);timeOutForPreview=setTimeout(function(){$.ajax({url:hoverUrl,dataType:"json",headers:{"X-wag_sid":getWagSid()},success:function(data){typeAheadPreview(data,keyUpKeyword);}});},document.previewTimeOut);}else{clearTimeout(timeOutForPreview);$("#wag-type-right-product-list").hide();$("#wag-typeaheadlists").attr("style","width:100%");}$("#ntt-placeholder").val(keyUpKeyword);}});$("#wag-typeaheadcontainer").on("keydown",function(e){if(e.keyCode===40){if(chosen===""){chosen=0;if($("#wag-typeaheadlists li a:focus").length==0){$("#wag-typeaheadlists li a").first().focus();}}else{if((chosen+1)<$("#wag-typeaheadlists li").length){chosen++;$("#wag-typeaheadlists li a:focus").parent().next().find("a").focus();}}$("#wag-typeaheadlists li").removeClass("typeaheadselected");$("#wag-typeaheadlists li a:focus").addClass("typeaheadselected");$("#wag-typeaheadlists li:eq("+chosen+")").addClass("typeaheadselected");e.preventDefault();return false;}else{if(e.keyCode===38){if(chosen===""){chosen=0;}else{if(chosen>0){chosen--;$("#wag-typeaheadlists li a:focus").parent().prev().find("a").focus();}}$("#wag-typeaheadlists li").removeClass("typeaheadselected");$("#wag-typeaheadlists li:eq("+chosen+")").addClass("typeaheadselected");$("#wag-typeaheadlists li a:focus").addClass("typeaheadselected");e.preventDefault();return false;}}});}function encodeURIData(res){if(res.indexOf("%")>-1){res=res.replace(/%%/,"%25");return encodeURIComponent(res);}else{return encodeURIComponent(res);}}function getDrugDetails(drugId,drugName,drugTitle,link){if(drugId!==""&&drugName!==""&&drugTitle!==""){var selectedDrugJson={};selectedDrugJson.drugName=unescape(drugName);selectedDrugJson.drugId=drugId;selectedDrugJson.drugTitle=unescape(drugTitle);sessionStorage.removeItem("selected_drugtarget");sessionStorage.setItem("selected_drugtarget",JSON.stringify(selectedDrugJson));if(link!==""){sessionStorage.removeItem("pageScrollValue");sessionStorage.setItem("pageScrollValue",JSON.stringify(link));}}}function typeAheadPreview(data,keywordSelected){if(keywordSelected.indexOf("%")===-1){keywordSelected=decodeURIComponent(keywordSelected);}$("#wag-type-right-product-list").empty();var products=[],count=0,type="";if(data&&data.drugProducts&&data.drugProducts.length>0){products=data.drugProducts;count=data.drugProducts.length;type="drug";}else{if(data&&data.products&&data.products.length>0){products=data.products;count=4;type="products";}}if(products.length>0){$("#wag-type-right-product-list").show();$("#wag-typeaheadlists").removeAttr("style");var topResultsText='<article class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p0 m0 '+(type==="drug"?"wag-typeahead-drug":"wag-typeahead-head")+'">';if(type==="products"){topResultsText+="<span>Top results for '<strong>"+keywordSelected+"</strong>'</span></article>";}if(type==="drug"){topResultsText+='<strong class="wag-hn-lt-55roman" style="font-size:18px">'+keywordSelected+"</strong>"+(type==="drug"&&products[0].availableProducts?'<p class="mt5 mb0 wag-hn-lt-55roman" style="font-size:12px">'+products[0].availableProducts+"</p>":"")+"</article>";}var topResultsTexthidden='<article class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p0 m0 hide'+(type==="drug"?"wag-typeahead-drug wag-hn-lt-55roman":"wag-typeahead-head")+'">';if(type==="products"){topResultsTexthidden+="<span>Top results for '<strong>"+keywordSelected+"</strong>'</span></article>";}if(type==="drug"){topResultsTexthidden+='<strong class="wag-hn-lt-55roman" style="font-size:18px">'+keywordSelected+"</strong>"+(type==="drug"&&products[0].availableProducts?'<p class="mt5 mb0 wag-hn-lt-55roman" style="font-size:12px">'+products[0].availableProducts+"</p>":"")+"</article>";}if(products.length>0){$("#wag-type-right-product-list").append(topResultsText);}else{$("#wag-type-right-product-list").append(topResultsTexthidden);}for(var i=0;i<count;i++){var dataProduts=products[i];if(dataProduts){if(type==="drug"){var prodTemplate='<section class="col-lg-12 col-md-12 col-sm-12 col-xs-12 wag-typeahead-product-cont"><section class="col-lg-12 col-md-12 col-sm-12 col-xs-5 p0 m0" style="min-height:185px"><a href="/pharmacy/marketing/library/finddrug/druginfodrugdetails.jsp?drugId='+dataProduts.drugId+'" onClick="getDrugDetails(\''+dataProduts.drugId+"','"+escape(dataProduts.drugDesc)+"','"+escape(dataProduts.drugName)+'\',\'\')"><figure class="mb10"><img alt="'+dataProduts.drugName+'" class="img-responsive" src="'+dataProduts.drugImage+'"/><figcaption></figcaption></figure></a><p class="text-primary wag-hn-lt-55roman"><a href="/pharmacy/marketing/library/finddrug/druginfodrugdetails.jsp?drugId='+dataProduts.drugId+'" style="style="color:#2a7db5" onClick="getDrugDetails(\''+dataProduts.drugId+"','"+escape(dataProduts.drugDesc)+"','"+escape(dataProduts.drugName)+"','')\">"+dataProduts.drugDesc+'</a></p></section><section class="col-lg-12 col-md-12 col-sm-12 col-xs-12 wag-typeahead-min-height p0 m0 wag-drug-preview"><aside class="row"><aside class="col-lg-4 col-md-4 col-sm-4 text-primary text-center druginfo"><a href="/pharmacy/marketing/library/finddrug/druginfodrugdetails.jsp?drugId='+dataProduts.drugId+'##InstructionsForUse" onClick="getDrugDetails(\''+dataProduts.drugId+"','"+escape(dataProduts.drugDesc)+"','"+escape(dataProduts.drugName)+'\',\'InstructionsForUse\')"><span class="icon-DrugInfo" aria-hidden="true" title="Instructions for use" style="font-size:3em;position:relative;top:5px"></span><p class="text-center wag-hn-lt-55roman" style="font-size:12px;color:#2a7db5">Instructions for Use</a></p></aside><aside class="col-lg-4 col-md-4 col-sm-4 text-primary text-center druginfo" drug-attr="SideEffectsCautions"><a href="/pharmacy/marketing/library/finddrug/druginfodrugdetails.jsp?drugId='+dataProduts.drugId+'##SideEffectsCautions" onClick="getDrugDetails(\''+dataProduts.drugId+"','"+escape(dataProduts.drugDesc)+"','"+escape(dataProduts.drugName)+'\',\'SideEffectsCautions\')"><span class="icon-Side-Effects" aria-hidden="true" title="Side Effects and Cautions" style="font-size:3em;position:relative;top:5px"></span><p class="text-center wag-hn-lt-55roman" style="font-size:12px;color:#2a7db5">Side Effects &amp; Cautions</a></p></aside><aside class="col-lg-4 col-md-4 col-sm-4 text-primary text-center druginfo" drug-attr="DrugInfoPlmCard"><a href="/pharmacy/marketing/library/finddrug/druginfodrugdetails.jsp?drugId='+dataProduts.drugId+'##DrugInfoPlmCard" onClick="getDrugDetails(\''+dataProduts.drugId+"','"+escape(dataProduts.drugDesc)+"','"+dataProduts.drugName+'\',,\'DrugInfoPlmCard\')"><span class="icon-Star" aria-hidden="true" title="Patient Reviews" style="font-size:3em;position:relative;top:5px"></span></a><a href="/pharmacy/marketing/library/finddrug/druginfodrugdetails.jsp?drugId='+dataProduts.drugId+'##DrugInfoPlmCard" onClick="getDrugDetails(\''+dataProduts.drugId+"','"+escape(dataProduts.drugDesc)+"','"+dataProduts.drugName+'\',,\'DrugInfoPlmCard\')"><p class="text-center wag-hn-lt-55roman" style="font-size:12px;color:#2a7db5">Patient Reviews</p></a></aside><aside class="col-lg-12 col-sm-12 col-md-12 col-xs-12 wag-text-black"><a class="btn wag-btn-blue-secondary-sm  btn-block" style="color:black" role="button" href="/pharmacy/marketing/library/finddrug/druginfodrugdetails.jsp?drugId='+dataProduts.drugId+'" onClick="getDrugDetails(\''+dataProduts.drugId+"','"+escape(dataProduts.drugDesc)+"','"+escape(dataProduts.drugName)+'\',\'\')">View drug details</a></aside><p class="text-right col-lg-12 col-sm-12 col-md-12 col-xs-12 mt10 wag-hn-lt-55roman" style="font-size:12px"><a href="/search/results.jsp?recType=drugs&Ntt='+dataProduts.drugName+'" style="color:#2a7db5">See more search results &rsaquo;</a></p></aside></aside>';$("#wag-type-right-product-list").append(prodTemplate);}else{var prodTemplate='<section class="col-lg-6 col-md-6 col-sm-6 col-xs-12 wag-typeahead-product-cont"><section class="col-lg-12 col-md-12 col-sm-12 col-xs-5 p0 m0 mb5 ml5" style="min-height:120px"><figure class="wag-typeahead-img"><a href="'+dataProduts.vpdUrl+'"><img alt="'+dataProduts.productTitle+'" class="img-responsive" src="'+dataProduts.productImage+'"/></a><figcaption></figcaption></figure></section><section class="col-lg-12 col-md-12 col-sm-12 col-xs-12 wag-typeahead-min-height p0 m0 ml5"><aside><dd class="wag-typeahead-product-desc"><span><a id="tiltleElipsis'+i+'" omnitrack="typeAheadPreviewData" title="'+dataProduts.productTitle+'" href="'+dataProduts.vpdUrl+'">'+dataProduts.productTitle+"</a></span></dd></aside>";if(dataProduts.reviewUrl&&dataProduts.reviewUrl.indexOf("gif")>-1){prodTemplate=prodTemplate+'<dd class="wag-review-ratings hide"><span class="media-body media-middle pull-left"><img class="ratings-image-height" title="'+dataProduts.reviewHoverMessage+'" alt="'+dataProduts.reviewHoverMessage+'"  src="'+dataProduts.reviewUrl+'"/></span><span class="wag-text-small-gray wag-typeahead-review pull-left"><small>('+dataProduts.productReviewCount+" reviews)</small></span></dd></section></section>";}else{prodTemplate=prodTemplate+"</section></section>";}$("#wag-type-right-product-list").append(prodTemplate);}}if(type!=="drug"){var tempEllipsisVal=ellipsisSet("tiltleElipsis"+i);$("#tiltleElipsis"+i).text(tempEllipsisVal);}}if(type!=="drug"){var seeMoreLink='<article class="col-lg-12 col-md-12 col-sm-12 col-xs-12 text-right pb5 wag-typeahead-link"> <a href="/search/results.jsp?Ntt='+encodeURIComponent(keywordSelected).replace(/%20/g,"+")+'">See more &#62;</a></article>';if(products.length>1){$("#wag-type-right-product-list").append(seeMoreLink);}}if($("#wag-type-right-product-list").is(":empty")){$("#wag-type-right-product-list").hide();$("#wag-typeaheadlists").attr("style","width:100%");}$("#wag-type-right-product-list,#wag-typeaheadlists").removeAttr("style");setTimeout(function(){if($("#wag-type-right-product-list").height()<$("#wag-typeaheadlists").height()){$("#wag-type-right-product-list").height($("#wag-typeaheadlists").height()+"px");}else{$("#wag-typeaheadlists").height($("#wag-type-right-product-list").height()+"px");}},100);}else{$("#wag-type-right-product-list").hide();$("#wag-typeaheadlists").attr("style","width:100%");}}function storePastSearch(inputText){var searchText=inputText;if(searchText!==""){if(wagUtil.getCookie("anonymousPastSearchData")!==null){var getAnonymousPastSearchData=JSON.parse(wagUtil.getCookie("anonymousPastSearchData"));for(var i=0;i<getAnonymousPastSearchData.searchTerm.length;i++){var sessiondata=getAnonymousPastSearchData.searchTerm[i];if($.inArray(sessiondata,searchArr)===-1){searchArr.push(getAnonymousPastSearchData.searchTerm[i]);}}}if(searchArr.length===0){pastSearchData.searchTerm.push(searchText);}if(searchArr.length>0){if(searchArr.indexOf(searchText)>-1){angular.forEach(searchArr,function(value,key){if(value===searchText){searchArr.splice(key,1);}});}searchArr.splice(0,0,searchText);if(searchArr.length>12,searchArr.length){searchArr.splice(12,1);}pastSearchData.searchTerm=searchArr;}if(pastSearchData!==""){if(window.header&&window.header.profileInfo&&window.header.profileInfo.loggedIn==="false"){if(checkSessionSupport){var curr_date=new Date();curr_date.setTime(curr_date.getTime()+(30*24*60*60*1000));document.cookie="anonymousPastSearchData="+JSON.stringify(pastSearchData)+";expires="+curr_date+";path=/";}}}}}function deleteAnonymous(i){var i=$.trim(i);if(window.header&&window.header.profileInfo&&(window.header.profileInfo.loggedIn==="true"||window.header.profileInfo.recognizedState)){$.ajax({url:Clazz.com.wag.config.commonUiConfig.getPastSearch+"?q="+encodeURIComponent($("#wag-typeaheadlists li").eq(i).text()),type:"delete",dataType:"json",contentType:"application/json",success:function(data){$("#wag-typeaheadlists li").eq(i).remove();loggedPastSearchData.searchTerm.splice(i,1);$("#wag-typeaheadlists").empty();searchList(loggedPastSearchData);if($("#wag-typeaheadlists li").length===0){$("#wag-typeaheadlists p").remove();}}});}else{if(i!==""){if(checkSessionSupport){if(wagUtil.getCookie("anonymousPastSearchData")!==null){var getAnonymousPastSearchData=JSON.parse(wagUtil.getCookie("anonymousPastSearchData"));var newArr=getAnonymousPastSearchData.searchTerm.splice(i,1);var curr_date=new Date();curr_date.setTime(curr_date.getTime()+(30*24*60*60*1000));if(getAnonymousPastSearchData.searchTerm.length>0){document.cookie="anonymousPastSearchData="+JSON.stringify(getAnonymousPastSearchData)+";expires="+curr_date+";path=/";$("#wag-typeaheadlists li").eq(i).remove();}if(getAnonymousPastSearchData.searchTerm.length===0){var pastSearchData={searchTerm:[]};document.cookie="anonymousPastSearchData="+JSON.stringify(getAnonymousPastSearchData)+";expires="+curr_date+";path=/";$("#wag-typeaheadlists li").eq(i).remove();$("#wag-typeaheadlists p").remove();}window.pastSearchData={searchTerm:[]};window.pastSearchData.searchTerm=getAnonymousPastSearchData.searchTerm;window.searchArr=getAnonymousPastSearchData.searchTerm;$("#wag-typeaheadlists").empty();searchList(getAnonymousPastSearchData);}}}}}function searchList(getAnonymousPastSearchData){var searchBox=$("input[id=ntt-placeholder]");var searchText=$.trim(searchBox.val());if(searchText.length<=2){if(getAnonymousPastSearchData.searchTerm.length>0){$("#wag-typeaheadlists").append('<p style="color:#737373;margin:10px 10px 0px 10px;">Your recent searches:</p>');}for(i=0;i<getAnonymousPastSearchData.searchTerm.length;i++){$("#wag-typeaheadcontainer").show();$("#wag-type-right-product-list").hide();$(".wag-typeahead-left-cont").css("width","100%");$("#wag-typeaheadlists").append('<li role="option" class="past-search-exist"><a style="padding-left:0 !important" href ="/search/results.jsp?Ntt='+encodeURIComponent(getAnonymousPastSearchData.searchTerm[i])+'">'+getAnonymousPastSearchData.searchTerm[i]+'</a><span onClick="deleteAnonymous('+i+');" class="icon-XPlain" style="padding:0px;padding-right:10px;color:#8c8c8c;font-size:25px;text-align:right;float:right;line-height:15px"></span></li>');}$("#resultsCount").text(getAnonymousPastSearchData.searchTerm.length+" results available Keyboard users, use up and down arrows to review and enter to select");setTimeout(function(){$("#ntt-placeholder").attr("aria-expanded","true");$("#resultsCount").text("");},100);}}var searchBox,pastSearchData,loggedPastSearchData,searchArr=[];function getPastSearchResult(){searchBox=$("input[id=ntt-placeholder]");pastSearchData={searchTerm:[]};loggedPastSearchData={searchTerm:[]};searchArr=[];window.getCloseMatch=function(opts){var data=opts;if(data&&window.header&&window.header.profileInfo&&(window.header.profileInfo.loggedIn==="true"||window.header.profileInfo.recognizedState)){var putData='{"searchTerm":['+data.replace(/[/\\,#=]/g,"")+"]}";$.ajax({url:Clazz.com.wag.config.commonUiConfig.getPastSearch,type:"put",data:putData,dataType:"json",contentType:"application/json",success:function(data){}});}else{if(checkSessionSupport){if(typeof data!=="undefined"){if(data!==null){var closeMatchKeywordPast=data;wagUtil.removeSessionItem("closeMatchKeywordPast");if(closeMatchKeywordPast!==""){var inputText=closeMatchKeywordPast;storePastSearch(inputText);}}}else{var inputText=$.trim(searchBox.val());storePastSearch(inputText);}}}};searchBox.on("click",function(){if(searchBox.val().length!==0){return false;}if(window.header&&window.header.profileInfo&&(window.header.profileInfo.loggedIn==="true"||window.header.profileInfo.recognizedState)){$.ajax({url:Clazz.com.wag.config.commonUiConfig.getPastSearch+"?tmp="+$.now(),type:"get",dataType:"json",contentType:"application/json",success:function(data){loggedPastSearchData={searchTerm:[]};angular.forEach(data.result,function(value,key){loggedPastSearchData.searchTerm.push(value.term);});searchList(loggedPastSearchData);}});}else{if(checkSessionSupport){if(wagUtil.getCookie("anonymousPastSearchData")!==null){var getAnonymousPastSearchData=JSON.parse(wagUtil.getCookie("anonymousPastSearchData"));$("#wag-typeaheadcontainer").show();searchList(getAnonymousPastSearchData);}}}});$("#ntt-placeholder").on("keydown",function(e){if(e.keyCode===27){return false;}if($(".wag-editchannelcontent").hasClass("storesinventoryfixed")){$(".wag-editchannelcontent").addClass("storesinventoryfixedTypeahead");}if($(".wag-search-res-num-items").hasClass("wag-search-res-dockfixed")){$(".wag-search-res-num-items").addClass("storesinventoryfixedTypeahead");}var input=$(this).val();if(window.header&&window.header.profileInfo&&(window.header.profileInfo.loggedIn==="true"||window.header.profileInfo.recognizedState)){if(!loggedPastSearchData){$.ajax({url:Clazz.com.wag.config.commonUiConfig.getPastSearch+"?tmp="+$.now(),type:"get",dataType:"json",contentType:"application/json",success:function(data){loggedPastSearchData={searchTerm:[]};angular.forEach(data.result,function(value,key){loggedPastSearchData.searchTerm.push(value.term);});}});}if(loggedPastSearchData){if((input.length<=2)&&(loggedPastSearchData.searchTerm.length>0)){$("#wag-typeaheadcontainer").hide();var container=$("#wag-typeaheadcontainer").is(":visible");$("#wag-typeaheadlists").empty();$("#wag-typeaheadlists").attr("style","width:100%");if(!container&&loggedPastSearchData){searchList(loggedPastSearchData);}}}}else{if(checkSessionSupport){if(wagUtil.getCookie("anonymousPastSearchData")!==null){var getAnonymousPastSearchData=JSON.parse(wagUtil.getCookie("anonymousPastSearchData"));if(getAnonymousPastSearchData){var pastSearchlength=getAnonymousPastSearchData.searchTerm.length;if((input.length<=2)&&(pastSearchlength>0)){$("#wag-typeaheadcontainer").hide();var container=$("#wag-typeaheadcontainer").is(":visible");$("#wag-typeaheadlists").empty();$("#wag-typeaheadlists").attr("style","width:100%");if(!container&&getAnonymousPastSearchData){searchList(getAnonymousPastSearchData);}}}}}}});}if(window.perfLazyLoadGlobalNav===undefined){if(window.attachEvent){window.attachEvent("onload",asyncBrowserSpecific);}else{window.addEventListener("load",asyncBrowserSpecific,false);}}function asyncBrowserSpecific(){setTimeout(function(){browserSpecific();},0);}if(windowWidth>tabletMax992){document.delayTime=500;document.delayTimeNav=1000;}if(windowWidth<=tabletMax992){$(window).resize(function(){if(navigator.userAgent.search("Android")>-1){if($(".modal-backdrop").length&&$(".modal-backdrop").innerHeight()>window.innerHeight+50){$(".modal").scrollTop(50);}else{$(".modal").scrollTop(0);}}});}function onloadClimeCouposAndMfssOperations(){var queryParamsForAffiliate=window.location.href.split("?")[1];if(queryParamsForAffiliate!==undefined){var affiliateRequestInfo={};angular.forEach(queryParamsForAffiliate.split("&"),function(value,key){if(value.indexOf("MCID")>-1){affiliateRequestInfo.MCID=value.split("MCID=")[1];}if(value.indexOf("COUPONID")>-1){affiliateRequestInfo.COUPONID=value.split("COUPONID=")[1];}if(value.indexOf("mcid")>-1){affiliateRequestInfo.MCID=value.split("mcid=")[1];}if(value.indexOf("couponid")>-1){affiliateRequestInfo.COUPONID=value.split("couponid=")[1];}if(value.indexOf("ext")>-1){affiliateRequestInfo.MCID=value.split("ext=")[1];affiliateRequestInfo.COUPONID=value.split("ext=")[1];}if(value.indexOf("EXT")>-1){affiliateRequestInfo.MCID=value.split("EXT=")[1];affiliateRequestInfo.COUPONID=value.split("EXT=")[1];}});if(!jQuery.isEmptyObject(affiliateRequestInfo)){var postData={affiliateRequestInfo:affiliateRequestInfo};$.ajax({url:"/svc/affiliate/claimCoupon",type:"post",data:JSON.stringify(postData),dataType:"json",contentType:"application/json; charset=utf-8",success:function(){}});}}if(checkSessionSupport&&window.innerWidth>767&&!sessionStorage.getItem("mfss")&&window.header&&window.header.profileInfo&&(window.header.profileInfo.loggedIn==="true"||window.header.profileInfo.recognizedState)&&window.header.profileInfo.loyaltyId){var postDataMfss={balanceRewardsId:window.header.profileInfo.loyaltyId};var mfssCall=$.ajax({url:Clazz.com.wag.config.commonUiConfig.mfssCall,type:"post",data:JSON.stringify(postDataMfss),dataType:"json",contentType:"application/json; charset=utf-8",success:function(data){if((/^\d+$/).test(data.storeNumber)){sessionStorage.setItem("mfss",data.storeNumber);setUserGeoLocation("home_store",data.storeNumber);$.ajax({url:elasticStoreLocatorServiceEndPoint+"/store?id="+data.storeNumber,type:"get",dataType:"json",contentType:"application/json; charset=utf-8",success:function(resp){if(resp.results&&resp.results[0].store&&resp.results[0].store.address&&resp.results[0].store.address.zip){setUserGeoLocation("home_store_zip",resp.results[0].store.address.zip);setUserGeoLocation("home_store_street",resp.results[0].store.address.street);}}});}else{if(data&&data.messages&&data.messages[0].code==="WAG_E_STORE_AUTH_2005"){sessionStorage.setItem("mfss",0);setUserGeoLocation("home_store");setUserGeoLocation("home_store_zip");setUserGeoLocation("home_store_street");}}}});setTimeout(function(){mfssCall.abort();},2000);}if(Clazz.App.checkSessionSupport()&&window.header&&window.header.profileInfo&&(window.header.profileInfo.loggedIn=="true"||window.header.profileInfo.recognizedState)&&!sessionStorage.getItem("preferredStore")){$.ajax({url:"/storelocator/frags/findPreferedStore.jsp?rnd="+$.now(),success:function(storeId){storeId=storeId.trim();sessionStorage.setItem("preferredStore",storeId);if(storeId&&storeId!="error"){setUserGeoLocation("preferred_store",storeId);$.ajax({url:elasticStoreLocatorServiceEndPoint+"/store?id="+storeId,type:"get",dataType:"json",contentType:"application/json; charset=utf-8",success:function(resp){if(resp.results&&resp.results[0].store&&resp.results[0].store.address&&resp.results[0].store.address.zip){setUserGeoLocation("preferred_store_zip",resp.results[0].store.address.zip);setUserGeoLocation("preferred_store_street",resp.results[0].store.address.street);}}});}}});}}if(typeof document.readyState!=="undefined"&&document.readyState==="complete"){var urlRegExp2=new RegExp("/ID=(?:(?!-tier2general)(?:.|\n))*-tier2general");if(urlRegExp2.test(location.pathname)){$(".wag_bottom_content").addClass("wag_bottom_seo_conten");$(".wag_bottom_seo_conten").removeClass("wag_bottom_content");}onloadClimeCouposAndMfssOperations();}else{if(window.attachEvent){window.attachEvent("onload",onloadClimeCouposAndMfssOperations);}else{window.addEventListener("load",onloadClimeCouposAndMfssOperations,false);}}if(checkSessionSupport){wagUtiltemp.setSessionItem("ct","");}(function($){$.fn.hoverIntent=function(handlerIn,handlerOut,selector){var cfg={interval:500,sensitivity:6,timeout:0};if(typeof handlerIn==="object"){cfg=$.extend(cfg,handlerIn);}else{if($.isFunction(handlerOut)){cfg=$.extend(cfg,{over:handlerIn,out:handlerOut,selector:selector});}else{cfg=$.extend(cfg,{over:handlerIn,out:handlerIn,selector:handlerOut});}}var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY;};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if(Math.sqrt((pX-cX)*(pX-cX)+(pY-cY)*(pY-cY))<cfg.sensitivity){$(ob).off("mousemove.hoverIntent",track);ob.hoverIntent_s=true;return cfg.over.apply(ob,[ev]);}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},document.delayTime/2);}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=false;return cfg.out.apply(ob,[ev]);};var handleHover=function(e){var ev=$.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);}if(e.type==="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).on("mousemove.hoverIntent",track);if(!ob.hoverIntent_s){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob);},document.delayTime/2);}}else{$(ob).off("mousemove.hoverIntent",track);if(ob.hoverIntent_s){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob);},cfg.timeout);}}};return this.on({"mouseenter.hoverIntent":handleHover,"mouseleave.hoverIntent":handleHover},cfg.selector);};})(jQuery);function wagnavOver(){$(this).children().find("a").first().attr("aria-expanded","true");$("nav ul.main_menu li.accordin-main .wag-second-level-menu >li").removeClass("activeMenu showMenuItems3");$(this).addClass("activeMenu showMenuItems3");$(".wag-second-level-menusymbol").show().parent().find(".css_arrow").remove();$(this).find(".wag-second-level-menusymbol").show().parent().prepend('<span class="css_arrow" style="border-width:'+(($(this).height()/2)+2.5)+"px 0px "+$(this).height()/2+'px 15px"></span>');}function wagMenuHover(flag){var config={sensitivity:2,interval:document.delayTime/2,over:wagnavOver,timeout:0,out:function(){}};if(flag){$("nav ul.main_menu li.accordin-main .wag-second-level-menu >li").hoverIntent(config);}else{$("nav ul.main_menu li.accordin-main .wag-second-level-menu >li").unbind("mouseenter").unbind("mouseleave");}$("nav ul.main_menu li.accordin-main .wag-second-level-menu >li").hover(function(){if($(this).find(".wag-tier1-width").length===2){$(this).find("#fourthLevelMenu").addClass("wag-third-level-menu");}else{$(this).find("#fourthLevelMenu").attr("style","width:410px !important;height:"+Math.round($(this).parent().parent().find(".wag-second-level-menu").height()+29.5)+"px");$(this).find("#fourthLevelMenu").find(".accordin-main").attr("style","width:50%");$(this).find(".wag-third-level-menu1").attr("style","width:100% !important");$(this).find(".wag-third-level-menu1").css({display:"inline-block"});}},function(){});}function browserSpecific(){if($("#new-nav-main-menu").length<=0){return false;}var globalNavData;if(typeof globalNavQueryString==="undefined"||globalNavQueryString===null){globalNavQueryString="?new=true";}if(checkSessionSupport&&wagUtiltemp.getSessionItem("globalNav")!==null&&typeof wagUtiltemp.getSessionItem("globalNav")!=="undefined"){globalNavData=wagUtiltemp.getSessionItem("globalNav");$("#new-nav-main-menu").empty();doOnloadHeaderNav(globalNavData);}else{var GlobalHeaderNavPath="/assets/nav-a/template/GlobalHeaderNavigationElements_ab.jsp"+globalNavQueryString;$.ajax({url:GlobalHeaderNavPath,success:function(result){if(checkSessionSupport){wagUtiltemp.setSessionItem("globalNav",result);}globalNavData=result;doOnloadHeaderNav(globalNavData);}});}function doOnloadHeaderNav(globalNavData){$("#new-nav-main-menu").html(globalNavData);var flagformobile=(typeof window.matchMedia!=="undefined")?(window.matchMedia("(min-width: 320px) and (max-width: 767px)").matches):($(window).width()>=320&&$(window).width()<768);if(flagformobile!==true){$("#new-nav-main-menu").addClass("weekAdDesign");$(".wag-nav-menu-item-switch-on").removeClass("hide");$(".wag-nav-menu-item-switch-off").addClass("hide");if(typeof navAlignCenter!=="udefined"&&typeof navAlignCenter==="function"){navAlignCenter();}}if(window.header&&window.header.profileInfo&&window.header.profileInfo.loggedIn==="true"){$(".loggedInUser").attr("href","/steps/brhc-loggedin.jsp");}if(urlPathName.search("/pharmacy/psc/")>-1){$(".wag-mobile-menu").hide();}if(flagformobile){$(".wag-icon-search-btn-home").click(function(){$(".wag-killer-ac").addClass("wag-search-killerwithsearchbox");});$("body").append('<section class="wag-slide-humbergunmenu"></section>');$(".wag-slide-humbergunmenu").html("<nav>"+$("nav").html()+"</nav>");$("#wag-header-mobile-slider").html("");$(".wag-slide-humbergunmenu").addClass("wag-top-nav clickerror desk");$(".container:eq(0)").attr("style","left:0%;");$(".wag-top-header").attr("style","z-index:1024;top:0;position:fixed;height:53px;background-color:#489cd4").addClass("wag-sticky-promo").removeClass("wag-bg-tint-blue");if($(".wag-mobile-search-area").is(":visible")){var searchAreaEle=$(".wag-search-area");if(window.location.pathname==="/"){$(".stickcontent").attr("style","min-height:45px").addClass("visible-xs");}else{$(".stickcontent").attr("style","min-height:85px").addClass("visible-xs");}$(".wag-killer-ac").addClass("wag-search-killerwithsearchbox");}}var emptyCheckSearchIcon=function(){var searchText=$("#ntt-placeholder").val();if($.trim(searchText).length>0){$("#header-search").css({"pointer-events":"auto",color:"#01728E"});}else{$("#header-search").css({"pointer-events":"none",color:"#8A8A8A"});}};emptyCheckSearchIcon();$("#ntt-placeholder").on("keyup",function(){emptyCheckSearchIcon();var inputVal=$(this).val();if(inputVal.toLowerCase().indexOf("<script>")>-1){$(this).val(inputVal.replace(/\<script\>|\<SCRIPT\>|\<\/script\>|\<\/SCRIPT\>/g,""));}});$("#header-search").on("click",function(){$("#frmHeaderSearch").submit();});$("#frmHeaderSearch").on("submit",function(e){var searchText=$("#ntt-placeholder").val();if(trim(searchText).length>0){var url=window.location.href;if(searchText&&url&&url.indexOf("results.jsp")>-1){if(typeof window.headerSearchEvent==="undefined"){return true;}window.headerSearchEvent(searchText,"");e.preventDefault();return false;}angular.element("#wag-typeaheadcontainer").hide();return true;}else{e.preventDefault();}});if(typeof window.mobileUserInfoContentReady!=="undefined"&&window.mobileUserInfoContentReady){$("#wag-userinfohamburger").replaceWith($("#wag-userinfo-widget-mobile"));$("#wag-userinfo-widget-mobile").attr("style","display:block");}else{window.mobileUserInfoPlaceholderReady=true;}$("#msgnotifications").replaceWith($(".wag-header-visible-xs-alert"));headerHoverDisplay();var focuspointer=false;var focuspointerArr=["prescriptions","healthinfo","contactlense","products","photomenu","weeklyAd"];$("li.photomenu ul.photo li:last-child").focusout(function(){$("."+focuspointerArr.join(",.")).removeClass("showMenuItems");$(".wag-second-level-menu").hide();$(".menu2").removeClass("activeTopMainMenu");});$(".wag-header-links ul li:last-child").focusin(function(){$("."+focuspointerArr.join(",.")).removeClass("showMenuItems");$(".wag-second-level-menu").hide();$(".menu2").removeClass("activeTopMainMenu");});$("#ntt-placeholder").focusin(function(){$(".wag-killer-content").addClass("wag-killer-with-typeahead");$("#yourAccMList").hide();$(".wag-youraccountdownicon").removeClass("icon-ArrowUp");var searchText=$("#ntt-placeholder").val();if($.trim(searchText).length>0){$("#header-search").css("color","#01728E");}else{$("#header-search").css("color","#8A8A8A");}});$(document).bind("click touchstart",function(e){if(e.target.className.indexOf("wag-typeaheadcontainer")==-1){window.typeAheadFocus=false;}});$("#ntt-placeholder").blur(function(){$(".wag-killer-content").removeClass("wag-killer-with-typeahead");});if(windowWidth>767){function storeLocatorPreviewLoad(){var $scope=angular.element(document.body).scope();angular.element(document).injector().invoke(["$compile",function($compile){$.ajax({url:Clazz.App.getTemplateURL("assets.store-locator-preview.template.store-locator-preview.tmpl"),success:function(result){angular.element("#storeLocatorPreview").html(result);$("#storeLocatorPreview").append('<div class="borderWrapper"></div>');$(".storeLocatorPreviewcontainer").addClass("storeLocatorPreviewcontainerNewHeader").removeClass("storeLocatorPreviewcontainer");$compile(angular.element("#storeLocatorPreview").contents())($scope);$scope.$apply();}});}]);}var storeLocatorPreviewOpen=function(e,_this){if((window.tempPrevZip&&getUserGeoLocation().zip&&(window.tempPrevZip!=getUserGeoLocation().zip))||getUserGeoLocation().storeId||noSelectedStore){angular.element("#storeLocatorPreview").empty();window.tempPrevZip=getUserGeoLocation().zip;noSelectedStore=false;}if(angular.element("#storeLocatorPreview").is(":empty")){storeLocatorPreviewLoad();}$(_this).parent().toggleClass("storeLocatorPreview");if($(_this).parent().hasClass("storeLocatorPreview")){$(".wag-header-new-store-locator-container").addClass("previewOpen");$(".wag-header-new-store-locator .wag-storeLocator-down>.icon-ArrowDown").addClass("icon-ArrowUp");$("#storeLocatorPreview").removeClass("hide");$("#storelocatorlink .sr-only").text("for Walgreens - Expanded");}else{$(".wag-header-new-store-locator-container").removeClass("previewOpen");$(".wag-header-new-store-locator .wag-storeLocator-down>.icon-ArrowDown").removeClass("icon-ArrowUp");$("#storeLocatorPreview").addClass("hide");$("#storelocatorlink .sr-only").text("for Walgreens - Collapsed");}};var storeLocatorPreviewClose=function(event){if(!event&&!event.target){return false;}var tempVarClick=$(event.target);setTimeout(function(){if(!tempVarClick.closest(".storeLocatorPreviewcontainer").length&&!tempVarClick.closest("#storelocatorlink").length&&($(".storeLocatorPreviewcontainer").is(":visible")&&!$(".storeLocatorPreviewcontainer").is(":empty"))){$("#storelocatorlink a ").find("span.wag-storeLocator-down").find("img").attr("src","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAAJCAYAAADkZNYtAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADNJREFUeNpi/A8EDEQCJiBmJEUxsYARppiRVJPxaWAk1RkYihlxmUqMyYyEQgOn2wECDABaFgQXrSMgFwAAAABJRU5ErkJggg==");$("#storelocatorlink a").parent().removeClass("storeLocatorPreview");$("#storeLocatorPreview").addClass("hide");$("#storelocatorlink .sr-only").text("for Walgreens - Collapsed");}else{if(!$(event.target).closest("#storelocatorlink").length){$("#storelocatorlink a").parent().removeClass("storeLocatorPreview");$(".wag-header-new-store-locator-container").removeClass("previewOpen");$(".wag-header-new-store-locator .wag-storeLocator-down>.icon-ArrowDown").removeClass("icon-ArrowUp");$("#storeLocatorPreview").addClass("hide");$("#storelocatorlink .sr-only").text("for Walgreens - Collapsed");}}},20);};var storeLocatorPreviewInterval=setInterval(function(){if($('[ng-mouseenter="yourAccountMouseIn()"]').is(":visible")){clearInterval(storeLocatorPreviewInterval);$("#storelocatorlink a").on("click",function(e){storeLocatorPreviewOpen(e,this);});}},500);$(document).click(function(event){storeLocatorPreviewClose(event);});$("#ntt-placeholder").focus(function(){storeLocatorPreviewClose(event);});}if(windowWidth>767&&deviceType!=="tablet"){$(".wag-top-nav ul.main_menu > li.prescriptions > section a, .wag-top-nav ul.main_menu > li.healthinfo > section a, .wag-top-nav ul.main_menu > li.contactlense > section a, .wag-top-nav ul.main_menu > li.products > section a, .wag-top-nav ul.main_menu > li.photomenu > section a, .wag-top-nav ul.main_menu > li.weeklyAd  > section a").keyup(function(e){if(!$(this).parent().parent().hasClass("showMenuItems")){$(".showMenuItems").removeClass("showMenuItems");$(".showMenuItems3").removeClass("showMenuItems3");$(".showMenuItems3 > ul > li:first a:first").attr("aria-expanded","false");$(".activeTopMainMenu").removeClass("activeTopMainMenu");$(".activeMenu").removeClass("activeMenu");}});$(".wag-top-nav ul.main_menu > li.prescriptions > section a, .wag-top-nav ul.main_menu > li.healthinfo > section a, .wag-top-nav ul.main_menu > li.contactlense > section a, .wag-top-nav ul.main_menu > li.products > section a, .wag-top-nav ul.main_menu > li.photomenu > section a, .wag-top-nav ul.main_menu > li.weeklyAd  > section a").keydown(function(e){var tempVar=$(this).parent().parent();if($(e.target).closest("section").find(".menu2:first").hasClass("menu2")){if(e.keyCode==13){if(!focuspointer){focuspointer=tempVar.attr("class").replace(" showMenuItems","").split(" ")[2];}if(focuspointer&&tempVar.attr("class")&&tempVar.attr("class").indexOf(focuspointer)<0){$("."+focuspointer).removeClass("showMenuItems");$("."+focuspointer).find(".menu2").removeClass("activeTopMainMenu");focuspointer=tempVar.attr("class").replace(" showMenuItems","").split(" ")[2];}var sec=tempVar.children().hasClass("wag-third-level-menu");if(sec===false){if(tempVar.hasClass("showMenuItems")){tempVar.removeClass("showMenuItems");tempVar.find(".menu2:first").removeClass("activeTopMainMenu");}else{tempVar.addClass("showMenuItems");$(".showMenuItems > ul > li:first a:first").focus();var isListHasClass=$(".showMenuItems").hasClass("contactlense")||$(".showMenuItems").hasClass("products")||$(".showMenuItems").hasClass("prescriptions")||$(".showMenuItems").hasClass("healthinfo")||$(".showMenuItems").hasClass("photomenu");if(isListHasClass){if($(".showMenuItems > ul > li:eq(0) a:first")[0]){$(".showMenuItems > ul > li:eq(0) a:first").focus();}else{$(".showMenuItems > ul > li:eq(1) a:first").focus();}}tempVar.find(".menu2:first").addClass("activeTopMainMenu");}}if(typeof e.preventDefault()!=="undefined"){e.preventDefault();}}}});$("body").keydown(function(e){if(e.keyCode===27){if($(".showMenuItems3").length>0){$(".showMenuItems3 > section").find("a:first").focus();$(".showMenuItems3").removeClass("showMenuItems3 activeMenu");$(".showMenuItems3 > ul > li:first a:first").attr("aria-expanded","false");}else{if($(".showMenuItems").length>0){$(".showMenuItems > section > a").focus();$(".showMenuItems").removeClass("showMenuItems");$(".activeTopMainMenu").removeClass("activeTopMainMenu");}}}});$(".wag-top-nav ul.main_menu > li > ul >li a").keydown(function(e){if(e.keyCode===38){e.preventDefault();$(this).parent().prev().find("a").focus();if($(".showMenuItems").hasClass("products")){if($(this).attr("title")==="Shop Products - As Seen on TV"){$(this).parent().parent().prev().find("a").focus();}else{if($(this).parent().hasClass("wag-shopby-shopby")||$(this).parent().hasClass("wag-shop-allproducts")||$(this).parent().hasClass("wag-shop-weeklyonlinedeals")){if($(this).parent().hasClass("wag-shopby-shopby")){$(this).parent().prev().prev().find("a").focus();}else{$(this).parent().prev().find("a").focus();}}else{$(this).parent().parent().parent().prev().find("a").focus();}}}else{if($(".showMenuItems").hasClass("healthinfo")){$(this).parent().parent().prev().find("a").focus();}}}if(e.keyCode===40){e.preventDefault();$(this).parent().next().find("a").focus();if($(".showMenuItems").hasClass("products")){if(!$(this).hasClass("menu2 link")){if($(this).parent().parent().next().find("a").attr("title")){$(this).parent().parent().next().find("a").focus();}else{$(this).parent().parent().next().next().find("a").focus();}}else{if($(this).parent().hasClass("wag-shopby-shopby")||$(this).parent().hasClass("wag-shop-allproducts")||$(this).parent().hasClass("wag-shop-weeklyonlinedeals")){$(this).parent().next().find("a").focus();}else{$(this).parent().parent().parent().next().find("a").focus();}}}else{if($(".showMenuItems").hasClass("healthinfo")){$(this).parent().parent().next().find("a").focus();}}}});$(".wag-top-nav ul.main_menu > li > ul >li.accordin-main > section a").keydown(function(e){var tempVar=$(this).parent().parent();if(!tempVar.hasClass("accordin-main")){tempVar=tempVar.parent();}if(e.keyCode==13){if(tempVar.hasClass("showMenuItems3")){tempVar.removeClass("showMenuItems3 activeMenu");tempVar.children().find("a").first().attr("aria-expanded","false");}else{$(".showMenuItems3").removeClass("showMenuItems3 activeMenu");$(".showMenuItems3 > ul > li:first a:first").attr("aria-expanded","false");tempVar.addClass("showMenuItems3 activeMenu");tempVar.children().find("a").first().attr("aria-expanded","true");$(".showMenuItems3 > ul > li:first a:first").focus();if($(".showMenuItems3").parent().parent().hasClass("products")){$(".showMenuItems3 > ul > li.accordin-main:first a:first").focus();}}if(typeof e.preventDefault()!=="undefined"){e.preventDefault();}}});}$("body").on("click","span#wag-youraccount-infomob,article.wag-user-picture",function(){if(windowWidth>767&&windowWidth<1025){$("#yourAccMList").toggle();$(".wag-youraccountdownicon").toggleClass("icon-ArrowUp");}});$("#cartFocus").focusin(function(){$("#yourAccMList").hide();});var timeOut,outTimeout,timeOutS,outTimeoutS,megaMenuAvailable=false,hoverTime,houtTime,timeToClose,c,d,previous,NeedToclose=[];var navHoverOptOnYAnSL=function(){if($("#yourAccMList").is(":visible")){$(".wag-signin-header-down").removeClass("icon-ArrowUp");$("#NewExpVersion_A_span").removeClass("wag-header-signin-newexp");$("#NewExpVersion_A_UserValue").removeClass("wag-header-signin-newexpLogged");$("#yourAccMList").hide();if(window.width>767&&window.width<1025){$("#newExpHide").removeClass("newExpHideClass");$("#newExpHideLogin").removeClass("newExpHideClassLogin");}}if($("#storeLocatorPreview").is(":visible")){$("#storelocatorlink a").parent().removeClass("storeLocatorPreview");$(".wag-header-new-store-locator-container").removeClass("previewOpen");$(".wag-header-new-store-locator .wag-storeLocator-down>.icon-ArrowDown").removeClass("icon-ArrowUp");$("#storeLocatorPreview").addClass("hide");$("#storelocatorlink .sr-only").text("for Walgreens - Collapsed");}};function navHoverOperations(resolution){var normalMenuSelector="nav ul.main_menu li.accordin-main";if(megaMenuAvailable){normalMenuSelector="nav ul.main_menu li.nav1.accordin-main,nav ul.main_menu li.nav2.accordin-main,nav ul.main_menu li.nav3.accordin-main, nav ul.main_menu li.wag-link-orange.accordin-main,nav ul.main_menu li.nav6.accordin-main";}$(normalMenuSelector).hover(function(){navHoverOptOnYAnSL();hoverTime=new Date().getTime();var _thisEle=$(this);var a=d=_thisEle.find(".wag-second-level-menu");if(c!==undefined&&a.attr("class")===c.attr("class")&&a.parent().find("a:first").hasClass("activeTopMainMenu")){if(megaMenuAvailable){clearTimeout(timeOutS);}a.attr("style","display:block !important");a.parent().addClass("showMenuItems");clearTimeout(outTimeout);}timeOut=setTimeout(function(){if(_thisEle.parent().hasClass("main_menu")){$(".main_menu>.accordin-main>.wag-second-level-menu").each(function(){var _this=$(this);if(_this.attr("style")){_this.attr("style","display:none !important");}});$(".main_menu>.accordin-main.showMenuItems").removeClass("showMenuItems");$(".main_menu>.accordin-main>section>.activeTopMainMenu").removeClass("activeTopMainMenu");}a.attr("style","display:block !important");a.parent().addClass("showMenuItems");a.parent().find("a:first").addClass("activeTopMainMenu");},document.delayTimeNav);},function(){houtTime=new Date().getTime();var a=$(this).find(".wag-second-level-menu");c=$(this).find(".wag-second-level-menu");timeToClose=houtTime-hoverTime;previous=a;if(timeToClose<document.delayTime){clearTimeout(timeOut);}outTimeout=setTimeout(function(){if(previous&&previous.attr("class")&&previous.attr("class")===a.attr("class")){a.attr("style","display:none");a.parent().removeClass("showMenuItems");if(resolution==="desktop"){a.parent().find("a:first").removeClass("activeTopMainMenu");}else{a.parent().find("a:first").removeClass("activeNavMenu activeTopMainMenu");}$("nav ul.main_menu li.accordin-main .wag-second-level-menu >li").removeClass("activeMenu showMenuItems3");$(".wag-second-level-menusymbol").show().parent().find(".css_arrow").remove();c=undefined;for(var close in NeedToclose){if(close!=="messageArrayIndex"&&NeedToclose[close].attr&&d.attr("class")!==NeedToclose[close].attr("class")){NeedToclose[close].attr("style","display:none");NeedToclose[close].parent().removeClass("showMenuItems");if(resolution==="desktop"){NeedToclose[close].parent().find("a:first").removeClass("activeTopMainMenu");}else{NeedToclose[close].parent().find("a:first").removeClass("activeNavMenu activeTopMainMenu");}$("nav ul.main_menu li.accordin-main .wag-second-level-menu >li").removeClass("activeMenu showMenuItems3");$("nav ul.main_menu li.accordin-main .wag-second-level-menu >li").children().find("a").first().attr("aria-expanded","false");$(".wag-second-level-menusymbol").show().parent().find(".css_arrow").remove();}}NeedToclose=[];}else{if(a.attr("class")){index=a.attr("class").replace(/ /g,".");if(!NeedToclose[index]){NeedToclose[index]=a;}}}},document.delayTimeNav);});wagMenuHover(true);}$(document).bind("touchstart",function(e){if($(e.target).hasClass("activeNavMenu")){window.location.href=e.target.getAttribute("href");}});function loadMegaMenu(){var subMenuTimeOut;function megamenuOperations(event,m_opt){var _this=$(event.target);if(m_opt==="click"){if(_this.closest("div#mega-menu-nav .dropdown").hasClass("active")&&!_this.closest("div#mega-menu-nav .dropdown").hasClass("wag-mouse-over")&&_this.context.localName==="a"){window.location.href=_this.attr("href");}else{if(_this.closest("div#mega-menu-nav .dropdown").hasClass("wag-mouse-over")){_this.closest("div#mega-menu-nav .dropdown").removeClass("wag-mouse-over");}}}else{if($(".nav4.products").is(":hover")||$("#mega-menu-nav").is(":hover")){clearTimeout(outTimeoutS);navHoverOptOnYAnSL();clearTimeout(timeOut);if($("div#mega-menu-nav").hasClass("hide")){timeOutS=setTimeout(function(){if($(".nav4.products").is(":hover")||$("#mega-menu-nav").is(":hover")){if(deviceType==="desktop"){$("nav>ul.main_menu>li.accordin-main>ul.wag-second-level-menu").attr("style","display:none !important;");}$(".navbar-nav li.dropdown").removeClass("open");$("div#mega-menu-nav").removeClass("hide");$(".nav4.products").find("a.menu2.link").addClass("activeTopMainMenu");}},document.delayTimeNav);}else{clearTimeout(timeOutS);}$(".navbar-nav li.dropdown:first").addClass("active");$(".navbar-nav li.dropdown:first  .dropdown-menu").addClass("active");}else{if(!$("div#mega-menu-nav").hasClass("hide")){if(typeof deviceType!=="undefined"&&deviceType==="tablet"){megaMenuCloseOpt();}else{clearTimeout(timeOutS);outTimeoutS=setTimeout(function(){if(!($(".nav4.products").is(":hover")||$("#mega-menu-nav").is(":hover"))){megaMenuCloseOpt();clearTimeout(subMenuTimeOut);}},document.delayTimeNav);}}}if(_this.closest(".dropdown").length>0){if(typeof deviceType!=="undefined"&&deviceType==="tablet"){subMenuEventOpt("t");}else{clearTimeout(subMenuTimeOut);subMenuTimeOut=setTimeout(function(){subMenuEventOpt("d");},document.delayTime);}}function megaMenuCloseOpt(){if(_this.closest(".nav4.products").length===0&&_this.closest("div.wag-shopproducts-nav-element-container").length===0){$("div#mega-menu-nav").addClass("hide");$(".nav4.products").find("a.menu2.link").removeClass("activeTopMainMenu");$(".navbar-nav li.dropdown").removeClass("active");$(".navbar-nav li.dropdown .dropdown-menu").removeClass("active");}}function subMenuEventOpt(device){if(device==="t"&&!_this.closest(".dropdown").hasClass("active")){_this.closest(".dropdown").addClass("wag-mouse-over");}$(".navbar-nav li.dropdown").removeClass("active");$(".navbar-nav li.dropdown .dropdown-menu").removeClass("active");_this.closest(".dropdown").addClass("active");_this.closest(".dropdown").find(".dropdown-menu").addClass("active");}}$("#mega-menu-nav>div>nav").css("background-color","transparent");}$("body").on("mouseover touchstart",function(event){megamenuOperations(event,"hover");});$("body").on("click",function(event){megamenuOperations(event,"click");$("#ntt-placeholder").attr("aria-expanded","false");});function enter_space_action(event){if($(event.target).closest("div#mega-menu-nav").length>0&&$(document.activeElement).attr("href").length>0){window.location.href=$(document.activeElement).attr("href");}else{if($("div#mega-menu-nav").hasClass("hide")){setTimeout(function(){$(".nav4.products").find("a.menu2.link").addClass("activeTopMainMenu1");},1000);$("div#mega-menu-nav").removeClass("hide");}else{$("div#mega-menu-nav").addClass("hide");$(".nav4.products").find("a.menu2.link").removeClass("activeTopMainMenu");}$(".nav.navbar-nav > li:first").addClass("active");$(".nav.navbar-nav > li:first >a").focus();$(document.activeElement,this).parent().find("ul.dropdown-menu.dropdown-menu-large").addClass("active");}}$(".wag-top-nav ul.main_menu > li.products > section a,div#mega-menu-nav").keydown(function(e){if(e.shiftKey&&e.keyCode===9){if($(document.activeElement).parent().hasClass("tier1-iden")&&$(document.activeElement).parent().index()===0){$("div#mega-menu-nav").addClass("hide");$(".nav4.products").find("a.menu2.link").removeClass("activeTopMainMenu").focus();return false;}}});var skipTabMegamenu=false;$(".wag-top-nav ul.main_menu > li.products > section a,div#mega-menu-nav").keydown(function(e){switch(e.keyCode){case 9:if(skipTabMegamenu){skipTabMegamenu=false;if(!e.shiftKey){$(".photomenu>section>a:eq(0)").focus();$("#mega-menu-nav").addClass("hide");return false;}}if($(document.activeElement).parents(".wag-menu-tier1-link").length&&$(document.activeElement).parent().is(":last-child")){$(".nav.navbar-nav > li:first >a").focus();var index=$(".tier1-iden.active").index();$(".navbar-nav li.dropdown .dropdown-menu").removeClass("active");$(".navbar-nav li.dropdown").eq(index).addClass("active");$(document.activeElement,this).parent().find("ul.dropdown-menu.dropdown-menu-large").addClass("active");return false;}$("#moreLink").on("keyup",function(){skipTabMegamenu=true;});break;case 13:enter_space_action(e);break;case 32:e.preventDefault();enter_space_action(e);break;case 37:if($(document.activeElement).parent().attr("id")==="tier2Item"&&$(document.activeElement).parent().parent().parent().parent().index()===0){var index=$(".tier1-iden.active").index();$(".navbar-nav li.dropdown").eq(index).find("a").eq(0).focus();$(document.activeElement,this).addClass("active");return false;}else{if($(document.activeElement).parent().attr("id")==="tier1Item"&&$(document.activeElement).parent().index()===0){$("ul.wag-menu-tier1-link>li:last-child>a").focus();}else{if($(document.activeElement).parents(".wag-menu-tier1-link").length&&$(document.activeElement).parent().index()===0){$(".nav.navbar-nav > li:last-child >a").focus();$(document.activeElement,this).parent().find("ul.dropdown-menu.dropdown-menu-large").addClass("active");}else{if($(document.activeElement).parent().attr("id")==="tier2Item"&&$(document.activeElement).parent().parent().parent().parent().index()>0){$(document.activeElement).parent().parent().parent().parent().prev().find("li.dropdown-header > a").focus();}else{if($(document.activeElement).parent().attr("id")==="tier2Item"&&$(document.activeElement).parent().parent().parent().parent().index()===0){var index=$(".tier1-iden.active").index();$(".tier1-iden.active").eq(index).find("a").focus();$(".tier1-iden.active").eq(index).find("ul.dropdown-menu.dropdown-menu-large").addClass("active");}else{if($(document.activeElement).parent().parent().attr("id")==="extraTier2"&&$(document.activeElement).parent().index()!==2){$(document.activeElement).parent().prev().find("a").focus();}else{if($(document.activeElement).parents(".wag-megamenu-linksource").length>0&&$(document.activeElement).parent().index()>0){if($(document.activeElement).parent().prev().find("a").length===0){$(document.activeElement).parent().prev().prev().find("a").focus();}else{$(document.activeElement).parent().prev().find("a").focus();}}else{if($(document.activeElement).parents(".wag-megamenu-linksource").length>0&&$(document.activeElement).parent().index()===0){var index=$(".tier1-iden.active").index();$(".extra-tier2-item").eq(index).find("li:last-child > a").focus();}else{if($(document.activeElement).parents(".extra-tier2-item").length>0&&$(document.activeElement).parent().index()===2){var index=$(".tier1-iden.active").index();$(".tier1-iden.active").find("li#tier2Item").eq(5).find("a").focus();}else{if($(document.activeElement).parents(".wag-menu-tier1-link").length&&$(document.activeElement).parent().index()>=0){$(document.activeElement,this).parent().find("ul.dropdown-menu.dropdown-menu-large").addClass("active");$(document.activeElement).parent().prev().find("a").focus();}else{$(".navbar-nav li.dropdown").removeClass("active");$(".navbar-nav li.dropdown .dropdown-menu").removeClass("active");$(document.activeElement).parent().prev().find("a").focus();$(document.activeElement,this).parent().addClass("active");$(document.activeElement,this).parent().find("ul.dropdown-menu.dropdown-menu-large").addClass("active");}}}}}}}}}}break;case 38:if($(document.activeElement).parent().attr("id")==="tier2Item"&&$(document.activeElement).parent().parent().parent().parent().index()===0){var index=$(".tier1-iden.active").index();$(".navbar-nav li.dropdown").eq(index).find("a").eq(0).focus();$(document.activeElement,this).addClass("active");return false;}else{if($(document.activeElement).parents(".wag-menu-tier1-link").length&&$(document.activeElement).parent().index()===0){$(".nav.navbar-nav > li:last-child >a").focus();$(document.activeElement,this).parent().find("ul.dropdown-menu.dropdown-menu-large").addClass("active");}else{if($(document.activeElement).parent().attr("id")==="tier2Item"&&$(document.activeElement).parent().parent().parent().parent().index()>0){$(document.activeElement).parent().parent().parent().parent().prev().find("li.dropdown-header > a").focus();}else{if($(document.activeElement).parent().parent().attr("id")==="extraTier2"&&$(document.activeElement).parent().index()!==2){$(document.activeElement).parent().prev().find("a").focus();}else{if($(document.activeElement).parents(".extra-tier2-item").length>0&&$(document.activeElement).parent().index()===2){var index=$(".tier1-iden.active").index();$(".tier1-iden.active").find("li#tier2Item").eq(5).find("a").focus();}else{if($(document.activeElement).parents(".wag-megamenu-linksource").length>0&&$(document.activeElement).parent().index()>0){if($(document.activeElement).parent().prev().find("a").length===0){$(document.activeElement).parent().prev().prev().find("a").focus();}else{$(document.activeElement).parent().prev().find("a").focus();}}else{if($(document.activeElement).parents(".wag-megamenu-linksource").length>0&&$(document.activeElement).parent().index()===0){var index=$(".tier1-iden.active").index();$(".extra-tier2-item").eq(index).find("li:last-child > a").focus();}else{if($(document.activeElement).parent().hasClass("tier1-iden")&&$(".tier1-iden.active").index()===0){e.preventDefault();$("div#mega-menu-nav").addClass("hide");$(".nav4.products").find("a.menu2.link").removeClass("activeTopMainMenu");$(".nav4.products").find("a.menu2.link").focus();return false;}else{if(($(document.activeElement).parent().hasClass("tier1-iden")&&$(".tier1-iden.active").index()>0)||$(document.activeElement).parent().attr("id")==="moreLink"||($(document.activeElement).parents(".wag-menu-tier1-link").length&&$(document.activeElement).parent().index()>0)){$(".navbar-nav li.dropdown").removeClass("active");$(".navbar-nav li.dropdown .dropdown-menu").removeClass("active");$(document.activeElement,this).parent().prev().find("a").focus();$(document.activeElement,this).parent().addClass("active");$(document.activeElement,this).parent().find("ul.dropdown-menu.dropdown-menu-large").addClass("active");return false;}}}}}}}}}break;case 39:if(($(document.activeElement).parent().attr("id")==="tier1Item"||$(document.activeElement).parent().attr("id")==="moreLink")&&$(document.activeElement).parent().index()===6){$("ul.wag-menu-tier1-link>li:first>a").focus();}else{if($(document.activeElement).parents(".wag-menu-tier1-link").length&&$(document.activeElement).parent().is(":last-child")){$(".navbar-nav li.dropdown .dropdown-menu").removeClass("active");$(".nav.navbar-nav > li:first >a").focus();$(".nav.navbar-nav > li:first").addClass("active");$(".nav.navbar-nav > li:first").find("ul.dropdown-menu.dropdown-menu-large").addClass("active");}else{if($(document.activeElement).parent().attr("id")==="tier2Item"){if($(document.activeElement).parent().parent().parent().parent().hasClass("visible-lg")&&$(document.activeElement).parent().parent().parent().parent().index()===5){var index=$(".tier1-iden.active").index();$(".extra-tier2-item").eq(index).find("li:eq(2) > a").focus();}else{$(document.activeElement).parent().parent().parent().parent().next().find("li.dropdown-header > a").focus();}}else{if($(document.activeElement).parent().parent().attr("id")==="extraTier2"&&$(document.activeElement).parent().index()>0&&!$(document.activeElement).parent().is(":last-child")){$(document.activeElement).parent().next().find("a").focus();}else{if($(document.activeElement).parent().parent().attr("id")==="extraTier2"&&$(document.activeElement).parent().index()>0&&$(document.activeElement).parent().is(":last-child")){if($(".tier1-iden.active").find("ul.wag-megamenu-linksource > li").length>0){$(".tier1-iden.active").find("ul.wag-megamenu-linksource > li:first > a").focus();}else{var index=$(".tier1-iden.active").index();$(".nav.navbar-nav > li").eq(index+1).find("a").focus();$(".navbar-nav li.dropdown").removeClass("active");$(".navbar-nav li.dropdown .dropdown-menu").removeClass("active");$(".nav.navbar-nav > li").eq(index+1).find("ul.dropdown-menu.dropdown-menu-large").addClass("active");}}else{if($(document.activeElement).parents(".wag-megamenu-linksource").length>0&&!$(document.activeElement).parent().is(":last-child")){if($(document.activeElement).parent().next().find("a").length===0){$(document.activeElement).parent().next().next().find("a").focus();}else{$(document.activeElement).parent().next().find("a").focus();}}else{if($(document.activeElement).parents(".wag-megamenu-linksource").length>0&&$(document.activeElement).parent().is(":last-child")){var index=$(".tier1-iden.active").index();$(".navbar-nav li.dropdown").eq(index).find("a").eq(0).focus();$(document.activeElement,this).addClass("active");}else{if($(document.activeElement).parents(".wag-menu-tier1-link").length&&$(document.activeElement).parent().index()>=0){var index=$(".tier1-iden.active").index();$(".navbar-nav li.dropdown").eq(index).addClass("active");$(document.activeElement).parent().next().find("a").focus();$(document.activeElement,this).parent().find("ul.dropdown-menu.dropdown-menu-large").addClass("active");}else{$(".navbar-nav li.dropdown").removeClass("active");$(".navbar-nav li.dropdown .dropdown-menu").removeClass("active");$(document.activeElement).parent().next().find("a").focus();$(document.activeElement,this).parent().addClass("active");$(document.activeElement,this).parent().find("ul.dropdown-menu.dropdown-menu-large").addClass("active");}}}}}}}}break;case 40:e.preventDefault();if($(document.activeElement).parent().attr("id")==="tier2Item"){if($(document.activeElement).parent().parent().parent().parent().hasClass("visible-lg")&&$(document.activeElement).parent().parent().parent().parent().index()===5){var index=$(".tier1-iden.active").index();$(".extra-tier2-item").eq(index).find("li:eq(2) > a").focus();}else{$(document.activeElement).parent().parent().parent().parent().next().find("li.dropdown-header > a").focus();}}else{if($(document.activeElement).parent().parent().attr("id")==="extraTier2"&&$(document.activeElement).parent().index()>0&&!$(document.activeElement).parent().is(":last-child")){$(document.activeElement).parent().next().find("a").focus();}else{if($(document.activeElement).parent().parent().attr("id")==="extraTier2"&&$(document.activeElement).parent().index()>0&&$(document.activeElement).parent().is(":last-child")){if($(".tier1-iden.active").find("ul.wag-megamenu-linksource > li").length>0){$(".tier1-iden.active").find("ul.wag-megamenu-linksource > li:first > a").focus();}else{var index=$(".tier1-iden.active").index();$(".nav.navbar-nav > li").eq(index+1).find("a").focus();$(".navbar-nav li.dropdown").removeClass("active");$(".navbar-nav li.dropdown .dropdown-menu").removeClass("active");$(".nav.navbar-nav > li").eq(index+1).find("ul.dropdown-menu.dropdown-menu-large").addClass("active");}}else{if($(document.activeElement).parents(".wag-megamenu-linksource").length>0&&!$(document.activeElement).parent().is(":last-child")){if($(document.activeElement).parent().next().find("a").length===0){$(document.activeElement).parent().next().next().find("a").focus();}else{$(document.activeElement).parent().next().find("a").focus();}}else{if($(document.activeElement).parents(".wag-megamenu-linksource").length>0&&$(document.activeElement).parent().is(":last-child")){var index=$(".tier1-iden.active").index();$(".nav.navbar-nav > li").eq(index+1).find("a").focus();$(".navbar-nav li.dropdown").removeClass("active");$(".navbar-nav li.dropdown .dropdown-menu").removeClass("active");$(".nav.navbar-nav > li").eq(index+1).addClass("active");$(".nav.navbar-nav > li").eq(index+1).find("ul.dropdown-menu.dropdown-menu-large").addClass("active");}else{if($(document.activeElement).parent().hasClass("tier1-iden")){var index=$(".tier1-iden.active").index();$(".navbar-nav li.dropdown").removeClass("active");$(".navbar-nav li.dropdown .dropdown-menu").eq(index).addClass("active");$(".tier1-iden.active").eq(index).find("ul.dropdown-menu.dropdown-menu-large").addClass("active");$(".navbar-nav li.dropdown").eq(index).addClass("active");$(".nav.navbar-nav > li").eq(index).find("li#tier2Item").eq(0).find("a").focus();return false;}}}}}}break;case 27:if($(document.activeElement).parents(".wag-sub-menu-items-left").length>0||$(document.activeElement).parents(".extra-tier2-item").length>0||$(document.activeElement).parents(".wag-megamenu-linksource").length>0){var index=$(".tier1-iden.active").index();$(".navbar-nav li.dropdown").eq(index).find("a").eq(0).focus();$(document.activeElement,this).addClass("active");return false;}else{if(!$("div#mega-menu-nav").hasClass("hide")){$("div#mega-menu-nav").addClass("hide");}}break;}});var beautybar=$(".wag-tier1-banner").length;if(beautybar){$(".wag-body-container-wrapper").attr("style","padding-top:0px !important;");$(".wag-tier1-banner").attr("style","margin-top:0px !important;");}}var flagformobile=(typeof window.matchMedia!=="undefined")?(window.matchMedia("(min-width: 320px) and (max-width: 767px)").matches):($(window).width()>=320&&$(window).width()<768);if(flagformobile!==true){var aboveSmDeviceFalg=(typeof window.matchMedia!=="undefined")?window.matchMedia("(min-width: 768px)").matches:$(window).width()>767;if(aboveSmDeviceFalg){$(".nav4.products").find(".wag-second-level-menu.shopprod").addClass("hide").attr("style","display:none !important");}megaMenuAvailable=true;$.ajax({url:"/assets/user-info/template/megamenu.jsp",success:function(result){var megaMenuCompileInterval=setInterval(function(){if(typeof angular.element(document).injector()!=="undefined"){clearInterval(megaMenuCompileInterval);angular.element(document).injector().invoke(["$compile",function($compile){var $scope=angular.element(document.body).scope();angular.element("#mega-menu-nav").html(result);$compile(angular.element("#mega-menu-nav").contents())($scope);loadMegaMenu();}]);}},200);}});}if(flagformobile===true){var megaMenuMBCompileInterval=setInterval(function(){if(typeof angular.element(document).injector()!=="undefined"){clearInterval(megaMenuMBCompileInterval);angular.element(document).injector().invoke(["$compile",function($compile){var $scope=angular.element(document.body).scope();$.ajax({url:Clazz.App.getTemplateURL("assets.user-info.template.megamenu-mob.tmpl"),success:function(mbMenu){angular.element("#mb-mega-menu-nav").html(mbMenu);$compile(angular.element("#mb-mega-menu-nav"))($scope);if(flagformobile!==true){setTimeout(function(){wagMenuHover(true);},2000);}}});}]);}},200);}if(windowWidth>tabletMax992){navHoverOperations("desktop");}else{if(windowWidth>=767&&windowWidth<tabletMax992&&deviceType!=="tablet"){navHoverOperations("tablet");}}}$(window).bind("resize",function(){if((document.documentElement.clientWidth||document.body.clientWidth||window.innerWidth)<=tabletMax992){document.delayTime=0;wagMenuHover(false);}else{document.delayTime=300;document.delayTimeNav=1000;wagMenuHover(true);}}).resize();function headerHoverDisplay(){currentScreenWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;$.fn.mobileHide=function(){$(this).addClass("wag-nav-hide");};$.fn.mobileShow=function(){$(this).removeClass("wag-nav-hide");};var showHideBlackBg=function(){if($(window).width()>=320&&$(window).width()<768){if($(".wag-opacity-cont-section").length<1){$("body").prepend('<section class="wag-opacity-cont-section"></section>');}}};var $wagtopnav=$(".wag-top-nav");var $window=$(window);var anchors=$(".accordin-main  a,.accordin-main section a");var accordionMain=$(".accordin-main");var navStore=[];var additionalMenu=$(".wag-header-links");accordionMain.find(">ul").mobileHide();accordionMain.find(">section .menu").mobileHide();$wagtopnav.find("li").each(function(index){$(this).attr("menu_index",index.toString());});additionalMenu.find("li").each(function(index){$(this).attr("menu_index","m"+index.toString());});additionalMenu.on("click","a",function(){sessionStoreClear("navStore");});var onloadwidth=windowWidth;$window.bind("resize",function(){if((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>767){$(".wag-header-reward-container-mobile, .wag-header-youraccount-mobile, .wag-top-nav nav, .wag-body-container-wrapper").show();$(".wag-opacity-cont").remove();$(".wag-mobile-menu").removeClass("hamburger-menu-open");}else{if(onloadwidth>767){$(".wag-header-reward-container-mobile, .wag-header-youraccount-mobile, .wag-top-nav nav").hide();}}onloadwidth=windowWidth;anchors.unbind("click",menuOpener);if(windowWidth>315&&windowWidth<767){$wagtopnav.removeClass("desk");anchors.bind("click",menuOpener);$("nav ul.main_menu li.accordin-main ul.wag-second-level-menu li.accordin-main").unbind("mouseover");$("nav ul.main_menu li.accordin-main ul.wag-second-level-menu li.accordin-main").find("ul.wag-third-level-menu").removeAttr("style");}else{$wagtopnav.addClass("desk");anchors.unbind("click",menuOpener);$("nav ul.main_menu li.accordin-main ul.wag-second-level-menu li.accordin-main").unbind("mouseover");$("nav ul.main_menu li.accordin-main ul.wag-second-level-menu li.accordin-main").mouseover(function(){$("ul.wag-third-level-menu").css("min-height",Math.round($(this).parent().height()+20)+"px");});$("nav ul.main_menu li.accordin-main ul.wag-second-level-menu > li.accordin-main").mouseover(function(){if($(window).width()<=tabletMax992){$("nav ul.main_menu li.accordin-main ul.wag-second-level-menu li.accordin-main").removeClass("activeMenu");$(this).addClass("activeMenu");$($(this).parent().parent().find(".menu2")[0]).addClass("activeNavMenu");$("nav ul.main_menu li.accordin-main ul.wag-second-level-menu > li").mouseover(function(){if(!$(this).hasClass("accordin-main")){$("nav ul.main_menu li.accordin-main ul.wag-second-level-menu li.accordin-main").removeClass("activeMenu");$(".wag-second-level-menusymbol").show().parent().find(".css_arrow").remove();}});$(".main_menu > li .link").mouseenter(function(){$("nav ul.main_menu li.accordin-main ul.wag-second-level-menu li.accordin-main").removeClass("activeMenu");$(".wag-second-level-menusymbol").show().parent().find(".css_arrow").remove();});}if(((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)>767)&&((window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)<=tabletMax992)){$(this).find(".wag-second-level-menusymbol").hide().parent().prepend('<span class="css_arrow" style="border-width:'+(($(this).height()/2)+2.5)+"px 0px "+$(this).height()/2+'px 15px"></span>');}});if((document.documentElement.clientWidth>767)&&(document.documentElement.clientWidth<=tabletMax992)){if(typeof isTabletDevice!=="undefined"){$("nav ul.main_menu li ul.wag-second-level-menu li.accordin-main .wag-third-level-menu li").mouseover(function(){window.location.href=$(this).find("a").attr("href");});$(document).bind("click touchstart",function(e){if(e.target.className.indexOf("activeNavMenu")==-1){if(!$(".activeNavMenu").closest("li").find("ul").is(":visible")){$(".activeNavMenu").removeClass("activeNavMenu");}}});$("nav>ul>li.nav1>section>a.link,nav>ul>li.nav2>section>a.link,nav>ul>li.nav3>section>a.link,nav>ul>li.photomenu>section>a.link,nav>ul>li.nav6>section>a.link").on("click",function(e){var _this=$(this);e.stopPropagation();if(_this.closest("li").has("ul").length>=1){if(!_this.hasClass("activeNavMenu")){e.preventDefault();$(".activeNavMenu").removeClass("activeNavMenu");_this.addClass("activeNavMenu");}}});$("nav>ul>li.nav4>section>a.link").on("click",function(e){var _this=$(this);if(_this.hasClass("activeTopMainMenu")&&$("div#mega-menu-nav>div>nav").length>0){window.location.href=_this.attr("href");}});var previousLink;$("nav ul.main_menu li.accordin-main ul.wag-second-level-menu > li.accordin-main > section a").click(function(e){if($(this).closest("li").has("ul").length>=1){if($(this).attr("href")!==previousLink){$(".readyToRedirect").removeClass("readyToRedirect");}if($(this).closest("li").hasClass("activeMenu")&&!$(this).hasClass("readyToRedirect")){e.preventDefault();$(this).addClass("readyToRedirect");previousLink=$(this).attr("href");}else{if(!$(this).closest("li").hasClass("activeMenu")){e.preventDefault();$(this).addClass("readyToRedirect");previousLink=$(this).attr("href");}}}});}else{$("nav ul.main_menu li ul.wag-second-level-menu li.accordin-main .wag-third-level-menu li").click(function(){window.location.href=$(this).find("a").attr("href");});$("nav ul.main_menu li ul.wag-second-level-menu li.accordin-main a").click(function(){window.location.href=$(this).attr("href");});}}}$("nav ul.main_menu li.products .wag-second-level-menu >li #fourthLevelMenu >li").each(function(){var _thisLi=$(this);_thisLi.find(".wag-fourthlevelmenus").children().addClass("wag-second-ul-li");});if(window.innerWidth<1025){$("nav ul.main_menu li.products .wag-second-level-menu >li #fourthLevelMenu >li").each(function(){var _thisLi=$(this);_thisLi.find(".wag-third-level-menu1").append(_thisLi.find(".wag-fourthlevelmenus").children());_thisLi.find(".wag-fourthlevelmenus").css("display","none");});}else{if(window.innerWidth>=1025){$("nav ul.main_menu li.products .wag-second-level-menu >li #fourthLevelMenu >li").each(function(){var _thisLi=$(this);var _secondUlLi=_thisLi.find(".wag-third-level-menu1").find(".wag-second-ul-li");_thisLi.find(".wag-fourthlevelmenus").append(_secondUlLi);_thisLi.find(".wag-fourthlevelmenus").css("display","inline-block");});}}if(window.innerWidth<768){$("#wag-moreShopProducts").parent().append($("#wag-moreShopProducts >ul").children().addClass("wag-shop-more-chaild"));$("#wag-moreShopProducts").css("display","none");$(".wag-shopby-shopby").parent().append($(".wag-shopby-shopby"));$(".wag-shop-allproducts").parent().append($(".wag-shop-allproducts"));$(".wag-shop-weeklyonlinedeals").parent().append($(".wag-shop-weeklyonlinedeals"));}else{$("#wag-moreShopProducts").css("display","block");$("#wag-moreShopProducts >ul").append($("#wag-moreShopProducts").parent().find(".wag-shop-more-chaild"));}}).resize();function menuOpener(event,manulTrigger){if($(this).attr("id")==="ShopProductsMenu"){event.preventDefault();}var _this=$(this);if($(this).attr("id")==="ShopProductsMenu"&&shopProductsHitMobile){shopProductsHitMobile=false;if(typeof(IsNativeApp)==="undefined"){IsNativeApp=false;}tier3function();menuOpenerFrag(event,manulTrigger,_this);}else{menuOpenerFrag(event,manulTrigger,_this);}}function tier3function(){$wagtopnav.find("li").each(function(index){$(this).attr("menu_index",index.toString());});additionalMenu.find("li").each(function(index){$(this).attr("menu_index","m"+index.toString());});var anchors=$(".accordin-main  a,.accordin-main section a");anchors.unbind("click",menuOpener);anchors.bind("click",menuOpener);}function menuOpenerFrag(event,manulTrigger,_this){var elemText=_this.text().trim();if(!_this.hasClass("link")&&!_this.hasClass("menu")){addNavStore(_this.closest("li").attr("menu_index"));return;}if(_this.closest("li").hasClass("nav5")&&$(".youraccount").children().length===1){$(".youraccount").append($("#yourAccMList").html());}event.preventDefault();_this.css("z-index",1);_this.css("position","relative");var main_tab=_this.closest(".accordin-main");var ul=main_tab.find(">ul");ul.find("ul").mobileHide();ul.toggleClass("wag-nav-hide");if(!ul.hasClass("wag-nav-hide")){main_tab.find(">section .menu").mobileShow();main_tab.find(">section .link").mobileHide();main_tab.siblings().mobileHide();$("#homelink").removeClass("wag-nav-hide");if(!manulTrigger&&elemText!=="Your Account"){addNavStore(_this.closest("li").attr("menu_index"));}if(navStore.length<=1){$(".wag-header-reward-container-mobile").css("top",($(".main_menu").height()+50)+"px");$(".wag-header-youraccount-mobile").css("top",($(".main_menu").height()+$(".wag-header-reward-container-mobile").height()+50)+"px");}else{$(".wag-header-reward-container-mobile").css("top",($(".main_menu").height())+"px");$(".wag-header-youraccount-mobile").css("top",($(".main_menu").height()+$(".wag-header-reward-container-mobile").height())+"px");}}else{if(!manulTrigger){removeNavStore(_this.closest("li").attr("menu_index"));}main_tab.find(">section .link").mobileShow();main_tab.find(">section .menu").mobileHide();main_tab.siblings().mobileShow();main_tab.find("li,span").mobileShow();main_tab.find("li ul").mobileHide();main_tab.find("li section .link").mobileShow();main_tab.find("li section .menu").mobileHide();$(".main_menu li").removeClass("wag-list-hide");$(".main_menu li.nav5").addClass("wag-list-hide");$("#yourAccMList").removeClass("wag-list-hide");$(".wag-header-youraccount-wrapper").removeClass("wag-nav-hide");setTimeout(function(){$(".wag-header-reward-container-mobile").css("top",($(".main_menu").height())+"px");$(".wag-header-youraccount-mobile").css("top",($(".main_menu").height()+$(".wag-header-reward-container-mobile").height())+"px");},100);}$("body").animate({scrollTop:0});$(".main_menu a.wag-header-mob-home").mobileShow();}function findURL(){var locationURL=location.pathname,arr=[],breakId=[],childId,childElement;if(location.pathname==="/"){sessionStoreClear("navStore");return false;}$("nav ul.main_menu > li").each(function(k,v){breakId.push($(this).attr("menu_index"));});if($("nav ul.main_menu").find("a[href$='"+locationURL+"']").parent("section").parent("li").attr("menu_index")){childId=$("nav ul.main_menu").find("a[href$='"+locationURL+"']").parent("section").parent("li").attr("menu_index");childElement=$("nav ul.main_menu").find("a[href$='"+locationURL+"']").parent("section").parent("li");}else{childId=$("nav ul.main_menu").find("a[href$='"+locationURL+"']").parent("li").attr("menu_index");childElement=$("nav ul.main_menu").find("a[href$='"+locationURL+"']").parent("li");}if(childId&&!childElement.hasClass("wag-no-nav-store")){var tempElement=childElement,tempId,tempRes;do{if(tempElement.parent("ul").parent("li").attr("menu_index")){tempId=tempElement.parent("ul").parent("li").attr("menu_index");}else{tempId=tempElement.parent("ul").parent("section").parent("li").attr("menu_index");}if(tempId){if(tempElement.parent("ul").parent("li")){tempElement=tempElement.parent("ul").parent("li");}else{tempElement=tempElement.parent("ul").parent("section").parent("li");}tempRes=true;arr.push(tempId);if(breakId.indexOf(tempId)!==-1){break;}}else{tempRes=false;}}while(tempRes);arr.reverse();navStore=navStore.concat(arr);addNavStore(childId);}}if(windowWidth<=760){findURL();}function addNavStore(val){navStore.push(val);if(checkSessionSupport){wagUtiltemp.setSessionItem("navStore",JSON.stringify(navStore));}}function removeNavStore(val){var index=navStore.indexOf(val);navStore.splice(index);if(checkSessionSupport){wagUtiltemp.setSessionItem("navStore",JSON.stringify(navStore));}}if(windowWidth>315&&windowWidth<767){$("body").css("overflow","auto");$(".wag-top-nav .accordin-main").on("click","a",function(e){if(!$(this).hasClass("menu2")){$(this).parent().siblings().children(".bold").removeClass("bold");$(this).html("<span class='bold'>"+$(this).html()+"</span>");}});}else{$(".wag-top-nav .accordin-main").on("click","a",function(e){if($(this).hasClass("menu2")){if(checkSessionSupport){sessionStorage.removeItem("searchOffset");}}});}if(windowWidth>315&&windowWidth<767){$(document).ready(function(){if($(".wag-search-area").is(":visible")){$(".wag-mobile-search").addClass("wag-mobile-search-inactive");$(".wag-mobile-search a span.wag-icon-search-btn-home").addClass("wag-icon-search-btn-home-open");$(".wag-killer-ac").addClass("wag-search-killerwithsearchbox");}});}$(".wag-mobile-search").click(function(){$(".wag-killer-ac").removeClass("wag-search-killerareascrolldown");if($(".wag-search-area").is(":visible")){return false;}setTimeout(function(){if(!flowIso){$(".wag-search-area").attr("style","margin-top:51px;display:block");}else{$(".wag-search-area").attr("style","margin-top:100px;display:block");}},0);if($(".wag-search-area").is(":visible")){$(".wag-mobile-search").addClass("wag-mobile-search-inactive");$(".wag-mobile-search a span.wag-icon-search-btn-home").addClass("wag-icon-search-btn-home-open");}else{$(".wag-mobile-search").addClass("wag-mobile-search-inactive");$(".wag-mobile-search a span.wag-icon-search-btn-home").removeClass("wag-icon-search-btn-home-open");}setTimeout(function(){$("#ntt-placeholder").focus();},0);setTimeout(function(){$(".stickcontent").attr("style","margin-bottom:"+parseInt($(".wag-mobile-search-area").height()+30)+"px");},0);});if(windowWidth<768&&(typeof IsNativeApp!=="undefined"&&IsNativeApp==="false")){var wagScrollTop=0;window.scrollDelay=100;var lastScrollTop=0;var previousScrollPos=lastScrollTop;document.searchBoxFoucs=false;var body_container=document.querySelector(".wag-body-container-wrapper");if(body_container){body_container.addEventListener("touchmove",function(){$("#ntt-placeholder").blur();});}var IOS_VERSION=navigator.userAgent.match(/OS (\d)_[\d+]_?[\d+]? like Mac OS X/i);if(IOS_VERSION&&IOS_VERSION[1]>=8){var input_el=document.getElementById("ntt-placeholder");input_el.addEventListener("touchstart",function(){document.searchBoxFoucs=true;var stickyNav={"wag-sticky-nav":"wag-sticky","wag-sticky-nav-homecnt":"wag-sticky-nav-h","wag-sticky-nav-user-info":"wag-sticky-u","wag-sticky-nav-search":"wag-sticky-s","wag-sticky-nav-bg":"wag-sticky-bg"};var bottom=window.scrollY;if(window.location.href.indexOf("results.jsp")===-1){$(".wag-globle-search-tab").addClass("wag-sticky-search-tab");}for(var a in stickyNav){}setTimeout(function(){},500);function blured(){if(window.location.href.indexOf("results.jsp")===-1){$(".wag-globle-search-tab").removeClass("wag-sticky-search-tab");}for(var a in stickyNav){$("."+stickyNav[a]).addClass(a).css("top",0);}document.searchBoxFoucs=false;input_el.removeEventListener("blur",blured);}input_el.addEventListener("blur",blured);});}$(window).on("scroll",function(event){if(document.searchBoxFoucs){return false;}var bottomPosition=$(document).height()-$(window).height()-120-window.scrollDelay;var stickyNav={"wag-sticky-nav":"wag-sticky","wag-sticky-nav-homecnt":"wag-sticky-nav-h","wag-sticky-nav-user-info":"wag-sticky-u","wag-sticky-nav-searchbar":"wag-sticky-s",topbanner:"wag-sticky-promo","wag-sticky-nav-bg":"wag-sticky-bg"};if($("#hamburgerMenu").hasClass("icon-Hamburger-home")&&window.enableHeaderAnimation){var CurPos=$(this).scrollTop();if($("#wag-typeaheadcontainer").is(":visible")){for(var a in stickyNav){$("."+stickyNav[a]).removeClass("wag-search-areascrolldown").removeClass("wag-search-areaanimation");$("."+stickyNav[a]).each(function(){this.style.setProperty("top",(0-CurPos)+"px","important");});}}else{if(CurPos>lastScrollTop){if(CurPos>=window.scrollDelay&&CurPos>=previousScrollPos+10){for(var a in stickyNav){$("."+stickyNav[a]).each(function(){this.style.setProperty("top",0);});$("."+stickyNav[a]).addClass("wag-search-areaanimation");$("."+stickyNav[a]).removeClass("wag-search-areascrolldown");}if(!$(".wag-search-area").is(":visible")){$(".wag-search-area").removeClass("wag-search-areaanimation");}$(".stickcontent").hide();}}else{if(CurPos===0||(CurPos<=bottomPosition&&CurPos<=previousScrollPos-10)){for(var a in stickyNav){$("."+stickyNav[a]).each(function(){this.style.setProperty("top",0);});$("."+stickyNav[a]).removeClass("wag-search-areaanimation");if(!flowIso){$("."+stickyNav[a]).addClass("wag-search-areascrolldown");}}if(!$(".wag-search-area").is(":visible")){$(".wag-search-area").removeClass("wag-search-areascrolldown");}$(".stickcontent").show();}}}previousScrollPos=lastScrollTop;lastScrollTop=CurPos;}});}$('<section id="strip" class="wag-slide-wrapper"></section>').insertBefore(".container:eq(0)");$("#strip").hide();var flowIso=false;wagUtiltemp.getUserInfo(function(response){if(response.profileInfo.flow&&(response.profileInfo.flow==="iso"||response.profileInfo.flow==="beauty")){flowIso=true;}});$("body").on("click",".wag-mobile-menu, .wag-opacity-cont-section, #strip",function(){$("nav").show();$(".container:eq(0)").removeClass("hamburger-menu-open").addClass("hamburger-menu-open-in");var slideTimer,stripTimer;var stickyNav={"wag-sticky-nav":"wag-sticky","wag-sticky-nav-homecnt":"wag-sticky-nav-h","wag-sticky-nav-user-info":"wag-sticky-u","wag-sticky-nav-search":"wag-sticky-s","wag-sticky-nav-bg":"wag-sticky-bg"};if($("#hamburgerMenu").hasClass("icon-Hamburger-home")){$(".wag-killer-ac").addClass("wag-killer-ac-pos");if(window.location.href.indexOf("results.jsp")===-1){$(".wag-globle-search-tab").addClass("wag-sticky-search-tab");}$(".wag-header-logo-ipad").removeClass("mobileLogo");for(var a in stickyNav){if(!flowIso){$("."+stickyNav[a]).removeClass(a).css("top",0);}else{$("."+stickyNav[a]).removeClass(a);}}$(".stickcontent").addClass("stickcontentZeroMinHight");if($(".wag-search-area").is(":visible")){$(".stickcontent").addClass("stickcontentMarginBottomForSearch");}$("#wag-footer-main-container").hide();$("#hamburgerMenu img").addClass("hide");$("#hamburgerMenu").removeClass("icon-Hamburger-home").addClass("icon-XPlain").addClass("wag-hamburgaricon-close");$(".wag-mobile-menu").css("width","16%");$(this).parent().find("a").attr("style","height:52px");$(".container:eq(0)").addClass("hamburger-menu-in");$(".container:eq(0)").attr("style","left:84%");$(".wag-top-header").attr("style","position:absolute;z-index:-1");$(".wag-slide-humbergunmenu nav").addClass("nav-ham");$(".wag-slide-humbergunmenu nav").show();setTimeout(function(){$(".wag-compare-drawer").css({position:"absolute"});if($(".wag-search-res-num-items").hasClass("wag-search-res-dockfixed")){$(".wag-search-res-num-items").css({position:"absolute"});}},0);stripTimer=setTimeout(function(){if($("#strip").length===0){$('<section id="strip" class="wag-slide-wrapper"></section>').insertBefore(".container:eq(0)");}else{$("#strip").show();}if(flowIso){$(".wag-mobile-menu").attr("style","margin-top:0;width:16%");$("#wagIsoLogoutContainer").hide();}},500);clearTimeout(slideTimer);}else{$(".wag-killer-ac").removeClass("wag-killer-ac-pos");var IOS_VERSION=navigator.userAgent.match(/OS (\d)_[\d+]_?[\d+]? like Mac OS X/i);if(IOS_VERSION){$(".wag-killer-ac").css("left","10px");setTimeout(function(){$(".wag-killer-ac").attr("style","");},500);}if(!flowIso){$(".wag-mobile-menu").attr("style","");}else{$(".wag-mobile-menu").attr("style","margin-top:44px");$("#wagIsoLogoutContainer").show();}$(".wag-header-logo-ipad").addClass("mobileLogo");$(".wag-slide-humbergunmenu nav").removeClass("nav-ham");$("#strip").hide();$("#hamburgerMenu img").removeClass("hide");$("#hamburgerMenu").removeClass("icon-XPlain").removeClass("wag-hamburgaricon-close");slideTimer=setTimeout(function(){$(".container:eq(0)").removeClass("hamburger-menu-in");$(".wag-compare-drawer").removeAttr("style");$(".wag-top-header").attr("style","z-index:1024;top:0;position:fixed;height:53px;background-color:#489cd4");for(var a in stickyNav){$("."+stickyNav[a]).addClass(a);}$(".stickcontent").removeClass("stickcontentZeroMinHight").removeClass("stickcontentMarginBottomForSearch");if(window.location.href.indexOf("results.jsp")===-1){$(".wag-globle-search-tab").removeClass("wag-sticky-search-tab");}$(".wag-slide-humbergunmenu nav").hide();},500);$(".container:eq(0)").attr("style","left:0%");$("#wag-footer-main-container").delay(500).show("slow");}if($(".wag-hamburgaricon-close").is(":visible")){$(".wag-footer-social-row,#footer").css({display:"none"});$("#hamburgerMenu").removeClass("icon-Hamburger-home");}else{setTimeout(function(){$(".wag-footer-social-row,#footer").css({display:"block"});},500);$("#hamburgerMenu").addClass("icon-Hamburger-home");}$(".wag-mobmenu-arrow2").parent().filter(".menu2.menu").attr("style","border-top:2px solid #d2d6d7 !important;font-size:114.5%;padding: 8px 0 10px 0 !important;color: #1d5e8d!important;");showHideBlackBg();if(checkSessionSupport){if(wagUtiltemp.getSessionItem("navStore")&&wagUtiltemp.getSessionItem("navStore")!=="[]"){navStore=JSON.parse(wagUtiltemp.getSessionItem("navStore"));var navLength=navStore.length;var previousNavStore=0;for(i=0;i<navLength;i++){if(previousNavStore!==navStore[i]){var tab=$wagtopnav.find("[menu_index='"+navStore[i]+"']");tab.find(">section .link").trigger("click",true);previousNavStore=navStore[i];}}if(navLength>1){var lastData=navStore[navLength-1];$("li[menu_index="+lastData+"]").children().addClass("bold");}}}setTimeout(function(){if($(".youraccount").hasClass("wag-nav-hide")){$(".wag-header-reward-container-mobile").css("top",$(".main_menu").height()+"px");$(".wag-header-userinfotab").css("top",$(".main_menu").height()+$(".wag-header-reward-container-mobile").height()+"px");}else{$(".wag-header-reward-container-mobile").css("top",$(".main_menu").height()+$("#yourAccMList").height()+"px");$(".wag-header-userinfotab").css("top",$(".main_menu").height()+$(".wag-header-reward-container-mobile").height()+$("#yourAccMList").height()+"px");}},500);});$("#appsearch").keyup(function(){var length=$("#appsearch").val().length;if(length>0){$("#app-search-close").removeClass("hide");}else{$("#app-search-close").addClass("hide");}});$("input[id=appsearch]").unbind("focus");$("input[id=appsearch]").on("focus",function(){$("input[id=appsearch]").attr("placeholder","");});$("input[id=appsearch]").unbind("focusout");$("input[id=appsearch]").on("focusout",function(){$("input[id=appsearch]").attr("placeholder","Search by keyword or item..");});$("#app-search-close").click(function(){$("#appsearch").val("");$("#app-search-close").removeClass("show");$("#app-search-close").addClass("hide");});$("#app-search-close").bind("touchstart",function(){$("#appsearch").val("");$("#app-search-close").removeClass("show");$("#app-search-close").addClass("hide");});var navLinks=$("nav li a");var pharmacyPageContextOnHeader=$("#pharmacyPageContextOnHeader").val();navLinks.each(function(){if($(this).attr("href").indexOf("<%=pharmacyPageContext%>")>-1){$(this).attr("href",$(this).attr("href").replace("<%=pharmacyPageContext%>",pharmacyPageContextOnHeader));}});if($(window).width()>=768&&$(window).width()<=tabletMax992){$(window).scroll(function(){restrictClick();});$(".clickerror").on("click",function(e){if(checkSessionSupport){if(wagUtiltemp.getSessionItem("ct")===e.target.title){$(".clickerror nav").css("z-index",1);}else{if(e.target.nextElementSibling&&e.target.nextElementSibling.className!=="wag-mobmenu-arrow3"){e.preventDefault();}}wagUtiltemp.setSessionItem("ct",e.target.title);}});}if(window.header&&window.header.profileInfo&&window.header.profileInfo.loggedIn==="true"){$(".wag-second-level-menu.photo a.photo-your-photos").attr("href","/photo/default.jsp?successURL=https://photo.walgreens.com/library/photos");$(".wag-second-level-menu.photo a.photo-upload-photos").attr("href","/photo/default.jsp?successURL=https://photo.walgreens.com/store/welcome");$(".wag-second-level-menu.photo a.photo-prints").attr("href","/photo/default.jsp?successURL=https://photo.walgreens.com/store/prints");$(".wag-second-level-menu.photo a[href$='/store/photo-books']").attr("href","/photo/default.jsp?successURL=https://photo.walgreens.com/store/photo-books");$(".wag-second-level-menu.photo a[href$='/store/cards']").attr("href","/photo/default.jsp?successURL=https://photo.walgreens.com/store/cards");$(".wag-second-level-menu.photo a[href$='/store/calendars']").attr("href","/photo/default.jsp?successURL=https://photo.walgreens.com/store/calendars");$(".wag-second-level-menu.photo a[href$='/store/posters']").attr("href","/photo/default.jsp?successURL=https://photo.walgreens.com/store/posters");$(".wag-second-level-menu.photo a[href$='/store/wall-decor']").attr("href","/photo/default.jsp?successURL=https://photo.walgreens.com/store/wall-decor");$(".wag-second-level-menu.photo a[href$='/store/home-decor']").attr("href","/photo/default.jsp?successURL=https://photo.walgreens.com/store/home-decor");$(".wag-second-level-menu.photo a[href$='/store/gifts']").attr("href","/photo/default.jsp?successURL=https://photo.walgreens.com/store/gifts");$(".wag-second-level-menu.photo a[href$='/store/same-day-pickup']").attr("href","/photo/default.jsp?successURL=https://photo.walgreens.com/store/same-day-pickup");$(".wag-second-level-menu.photo a[href$='/store/deals']").attr("href","/photo/default.jsp?successURL=https://photo.walgreens.com/store/deals");$(".wag-second-level-menu.photo a[href$='/store/all-products']").attr("href","/photo/default.jsp?successURL=https://photo.walgreens.com/store/all-products");}if(window.header&&window.header.profileInfo&&window.header.profileInfo.loggedIn==="true"){var UserInfo='<span class="wag-user-details">Hi&nbsp;&nbsp;'+window.header.profileInfo.firstName+'</span><span>|</span><span><a href="" title="Sign Out">Sign Out</a></span>';$("#wag-userinfohamburger").html(UserInfo);}else{var UserInfo='<span><a class="" href="/" title="home">Sign In</a></span><span>|</span><span><a href="" title="Register">Register</a></span>';$("#wag-userinfohamburger").html(UserInfo);}}$("body").on("click",".wag-modal-outer, .wag-modal-dialog",function(e){if($(e.target).hasClass("wag-modal-outer")||$(e.target).hasClass("wag-modal-dialog")){$(e.target).find("[data-dismiss=modal]").click();return false;}});$("#wag-youraccount-infomob > a").focus(function(){$("#wag-typeaheadcontainer").hide();});function getLatLng(){var locServiceUrl=Clazz.com.wag.config.commonUiConfig.getStoreLocation+"?rnd="+$.now();var locPostData={isGeoLocated:"true"};$.ajax({url:locServiceUrl,type:"post",data:JSON.stringify(locPostData),dataType:"json",contentType:"application/json; charset=utf-8",success:function(data){if(data&&data.lat&&data.lng){setUserGeoLocation("lat",data.lat);setUserGeoLocation("lng",data.lng);}else{if(data&&data.zipCode){var geocoder=new google.maps.Geocoder();geocoder.geocode({address:data.zipCode},function(res,status){if(status==google.maps.GeocoderStatus.OK){var lat=res[0].geometry.location.lat();var lng=res[0].geometry.location.lng();setUserGeoLocation("lat",lat);setUserGeoLocation("lng",lng);}});}}}});}if(!getUserGeoLocation().lat&&typeof google!="undefined"){getLatLng();}else{loadGoogleMapApi();var timeInterval=setInterval(function(){if(typeof google!="undefined"){clearInterval(timeInterval);getLatLng();}},500);}}function restrictClick(){try{var offset=$(".wag-top-nav").offset();var w=$(window);var offsetTop=offset.top-w.scrollTop();if(offsetTop===185){$(".wag-top-nav nav").css("z-index",1);}}catch(e){}}$(".wag-header-mob-home").bind("click",function(){sessionStoreClear("navStore");sessionStoreClear("extMenu");});function sessionStoreClear(sKey){if(checkSessionSupport){sessionStorage.removeItem(sKey);}}var IsLoadGoogleMapApi=false;function loadGoogleMapApi(){if(!IsLoadGoogleMapApi&&typeof google=="undefined"){var script=document.createElement("script");script.type="text/javascript";script.src="https://maps.googleapis.com/maps/api/js?client=gme-walgreens&libraries=places";document.body.appendChild(script);IsLoadGoogleMapApi=true;}}$(document).on("touchstart, click, mouseover",".nav2.accordin-main.healthinfo a:first",function(){$('.nav2 ul.wag-second-level-menu li section a:contains("Balance Rewards for") br').replaceWith(" ");});if(typeof IsNativeApp!=="undefined"&&IsNativeApp==="true"){$(".wag-skip-access").hide();}function addLazyloadResources(value,type,prependURL,callback){if((!value||value===undefined||value===""||value.length===0)||(!type||type===undefined||type===""||type.length===0)){return true;}var resourceDetails;if(type==="css"){resourceDetails=document.createElement("link");resourceDetails.setAttribute("rel","stylesheet");resourceDetails.setAttribute("type","text/css");resourceDetails.setAttribute("href",prependURL+value);}else{if(type==="js"||type==="prefetch-js"){resourceDetails=document.createElement("script");resourceDetails.setAttribute("type","text/javascript");resourceDetails.setAttribute("src",prependURL+value);var done=false;var head=document.getElementsByTagName("head")[0];if(typeof callback!=="undefined"){resourceDetails.onload=resourceDetails.onreadystatechange=function(){if(!done&&(!this.readyState||this.readyState==="loaded"||this.readyState==="complete")){done=true;callback();resourceDetails.onload=resourceDetails.onreadystatechange=null;if(head&&resourceDetails.parentNode){head.removeChild(resourceDetails);}}};}}else{if(type==="prefetch-css"){resourceDetails=document.createElement("link");resourceDetails.setAttribute("rel","stylesheet");resourceDetails.setAttribute("type","text/css");resourceDetails.setAttribute("media","preload for next page");resourceDetails.setAttribute("href",prependURL+value);}else{return true;}}}document.getElementsByTagName("head")[0].appendChild(resourceDetails);}$("body").on("keydown",'[data-toggle="modal"]',function(e){if(e.keyCode===32||e.keyCode===13){window.focusedElement=$(document.activeElement)[0];}});$("body").on("keydown",'[data-dismiss="modal"]',function(e){if(e.keyCode===32||e.keyCode===13){setTimeout(function(){$(document.activeElement).modal("hide");if(window.focusedElement){window.focusedElement.focus();window.focusedElement="";}});}});setTimeout(function(){$("#yourAccMList>li>a").click(function(){if($(this).attr("href")!=="undefined"){window.location.href=$(this).attr("href");}});},1000);var renderGlobalRxAlert=function(){var nonGlobalRxAlertPages=["/store/checkout/cart.jsp","/store/checkout/optimizedcheckout/ship_address.jsp","/store/checkout/optimizedcheckout/payment_method.jsp","/store/checkout/optimizedcheckout/optimize_order_review.jsp","/store/checkout/confirmorder_sdd.jsp","/pharmacy/refillhub/refillhub.jsp","/pharmacy/rxstatus/rxStatus.jsp","/pharmacy/manageautorefills/manage_auto_refill.jsp","/pharmacy/prescriptioncheckout.jsp","/pharmacy/prescriptioncheckout_confirmation.jsp","/pharmacy/order/enterprescription.jsp","/pharmacy/order/transferprescription.jsp","/pharmacy/order/express-refills.jsp","/pharmacy/refillhub/refillPrescriptions.jsp"];if(typeof window.renderGlobalRxAlertCalled==="undefined"){window.renderGlobalRxAlertCalled=0;}else{window.renderGlobalRxAlertCalled+=1;}if(nonGlobalRxAlertPages.indexOf(window.location.pathname)===-1&&window.renderGlobalRxAlertCalled===0){wagUtiltemp.getUserInfo(function(userInfo){if(typeof userInfo!=="undefined"&&typeof userInfo.profileInfo!=="undefined"&&((typeof userInfo.profileInfo.loggedIn!=="undefined"&&userInfo.profileInfo.loggedIn==="true")||userInfo.profileInfo.recognizedState)){var renderGlobalRxAlertForRxAuth=function(isRxAuthUser){if(document.cookie.search("gRxAlDis")===-1){document.cookie="gRxAlDis=N;domain=.walgreens.com;path=/;";}if(document.cookie.match(/gRxAlDis=([^;]*)/)!==null&&document.cookie.match(/gRxAlDis=([^;]*)/)[1]!=="Y"){var globalRxAlertTemplate='<section role="alert" aria-live="assertive" class="refill" ng-controller="globalRxAlertController"><section class="refill-contain refill-one rx-{{alertData.messageType}}" style="z-index: 1;" ng-if="displayRxAlert" ng-style="bgColor"><div class="refill-content"><span class="main-text col-sm-7 col-xs-12" ng-href="{{alertData.ctaURL}}" ng-bind="(firstNameStr) + (alertData.longMessage)"></span><div class="btn-contain col-sm-5 col-xs-12 p0"><div class="btn-container-bound pull-right"><span class="col-xs-6 dismiss-btn-container"><span class="refill-dismiss" ng-click="rxAlertDismiss()"><strong>Dismiss</strong></span></span><span class="col-xs-6 refill-btn-container"><span class="refill-btn"><a ng-href="{{alertData.ctaURL}}"><strong><span ng-if="alertData.message === \'Action Needed\' || alertData.message === \'Ready for Pickup\'">View Rx</span><span ng-if="alertData.message === \'RefillDue\'">Refill now</span><span ng-if="alertData.message !== \'Action Needed\' && alertData.message !== \'Ready for Pickup\' && alertData.message !== \'RefillDue\'" ng-bind="alertData.message"></span></strong></a></span></span></div></div></div></section></section>';var renderGlobalRxAlertOnNgLoad=function(){if(typeof angular==="undefined"||typeof angular.element(document).injector()==="undefined"){setTimeout(function(){renderGlobalRxAlertOnNgLoad();},500);}else{angular.element(document).injector().invoke(["$compile",function($compile){var $scope=angular.element(document.body).scope();angular.element("#wag-global-rx-alert").html(globalRxAlertTemplate);$compile(angular.element("#wag-global-rx-alert"))($scope);}]);}};renderGlobalRxAlertOnNgLoad();}};var isRxAuthUser=false;if(userInfo.profileInfo.loggedIn==="true"){isRxAuthUser=(typeof userInfo.profileInd!=="undefined"&&userInfo.profileInd.isRxAuthenticatedUser)?userInfo.profileInd.isRxAuthenticatedUser:false;renderGlobalRxAlertForRxAuth(isRxAuthUser);}else{if(document.cookie.match(/USER_TYPE=([^;]*)/)!==null&&document.cookie.match(/USER_TYPE=([^;]*)/)[1].search("RxAuth")>-1){isRxAuthUser=true;renderGlobalRxAlertForRxAuth(isRxAuthUser);}}}});}};setTimeout(function(){var urlRegExp2=new RegExp("/ID=(?:(?!-tier2general)(?:.|\n))*-tier2general");if(urlRegExp2.test(location.pathname)){$(".wag_bottom_content").addClass("wag_bottom_seo_conten");$(".wag_bottom_seo_conten").removeClass("wag_bottom_content");}},1000);if(document.readyState==="complete"){renderGlobalRxAlert();}else{if(window.attachEvent){window.attachEvent("onload",renderGlobalRxAlert);}else{window.addEventListener("load",renderGlobalRxAlert,false);}}setTimeout(function(){if($(window).width()>=768&&$(window).width()<=1024){$("nav>ul>li.nav6").on("click",function(e){e.preventDefault();$(".weeklyAd:eq(0) .menu2 ").addClass("activeTopMainMenu");$(".weeklyAd:eq(1)").css("display","block");});$(".nav6").on("click touchstart",function(event){$(".weeklyAd:eq(0) .menu2 ").addClass("activeTopMainMenu");$(".weeklyAd:eq(1)").css("display","block");if($(".weeklyAd:eq(0) .menu2 ").hasClass("activeTopMainMenu")){}else{event.preventDefault();}});}$("nav>ul>li, wag-nav-menu-item-switch-on").on("click touchstart",function(e){$(".weeklyAd:eq(0) .menu2 ").removeClass("activeTopMainMenu");$(".weeklyAd:eq(1)").css("display","none");$("#storeLocatorPreview").addClass("hide");$("#storeInfoTab").removeClass("previewOpen");$("#NewExpVersion_A_span").removeClass("wag-header-signin-newexp");$("#yourAccMList").css("display","none");});$(".wag-userinfo-container").on("click touchstart",function(e){$(".weeklyAd:eq(0) .menu2 ").removeClass("activeTopMainMenu");$(".weeklyAd:eq(1)").css("display","none");});},2500);setTimeout(function(){if($(window).width()>=768&&$(window).width()<=1024){$(".nav6").on("click touchstart",function(event){$(".weeklyAd:eq(0) .menu2 ").addClass("activeTopMainMenu");$(".weeklyAd:eq(1)").css("display","block");event.preventDefault();});}},3500);setTimeout(function(){if($(window).width()>=768&&$(window).width()<=1024){$("nav>ul>li.nav6").on("click",function(e){e.preventDefault();$(".weeklyAd:eq(0) .menu2 ").addClass("activeTopMainMenu");$(".weeklyAd:eq(1)").css("display","block");});}},5000);setTimeout(function(){if($(window).width()>=768&&$(window).width()<=1024){$(".nav6").on("click touchstart",function(event){$(".weeklyAd:eq(0) .menu2 ").addClass("activeTopMainMenu");$(".weeklyAd:eq(1)").css("display","block");if($(".weeklyAd:eq(0) .menu2 ").hasClass("activeTopMainMenu")){}else{event.preventDefault();}});}},6000);"use strict";var countVal=0;var independentCarousels=[];var flagformobile=(typeof window.matchMedia!="undefined")?(window.matchMedia("(min-width: 320px) and (max-width: 767px)").matches):($(window).width()>=320&&$(window).width()<768);Clazz.createPackage("com.wag.userinfo");Clazz.com.wag.userinfo.UserInfo=Clazz.extend(Clazz.Widget,{initialize:function(){if(typeof CaClipCoupon!=="undefined"){CaClipCoupon.userInfoAddListenersEventsForCaClipCoupon(Clazz.com.wag.userinfo);}this.myContainer="wagUserinfoNewHeader";this.controller=Clazz.com.wag.userinfo.UserInfoController;this.service=Clazz.com.wag.userinfo.UserInfoService;this.factory=Clazz.com.wag.userinfo.UserInfoFactory;this.directive=Clazz.com.wag.userinfo.CarouselProductsDirective;if(typeof CaClipCoupon!=="undefined"){CaClipCoupon.userInfoInitializeForCaClipCoupon(this);}},injectDependencies:function(){this.controller.userInfoController.$inject=["$scope","$rootScope","userInfoFactory","$wagUtil","$sce"];this.controller.globalRxAlertController.$inject=["$scope","$wagUtil","userInfoFactory"];if(typeof contentWidzetIdx!=="undefined"){this.controller.independentCarouselController.$inject=["$scope","$rootScope","$wagUtil","userInfoFactory","$sce"];}this.controller.storeLocatorPreviewController.$inject=["$scope","$rootScope","$wagUtil","userInfoFactory"];this.controller.megaMenuController.$inject=["$scope","$rootScope","megaMenuFactory","$wagUtil","$compile","$sce"];this.directive.slyindependentcarousel.$inject=["$compile"];this.directive.waguserinfomobilewidget.$inject=[];this.directive.storeUserInfoCus.$inject=[];this.factory.userInfoFactory.$inject=["userInfoService","logOutService","rxGetAlertService","independentCarouselService","newBRService"];this.service.userInfoService.$inject=["$wagAPI","$wagUtil"];if(typeof CaClipCoupon!=="undefined"){CaClipCoupon.userInfoInjetionsForCaClipCoupon(this);}}});Clazz.com.wag.userinfo.UserInfoController={userInfoSkinIdController:function($scope,$rootScope,userInfoFactory,$wagUtil,$sce){function getCookie(name){var value="; "+document.cookie;var parts=value.split("; "+name+"=");if(parts.length>=2){return parts.pop().split(";").shift();}}$wagUtil.getUserInfo(function(response){$scope.userInfo=response;});$wagUtil.isLoggedIn(function(data){$scope.isLoggedIn=data;});var be_status=getCookie("BEAUTY_ENTHUSIAST");var is_BE_User=($scope.userInfo.profileInfo&&$scope.userInfo.profileInfo.loyaltyId&&$scope.userInfo.profileInd.isBeautyClubUser)||(be_status=="true"&&$scope.userInfo.profileInfo.recognizedState==true);if(is_BE_User){var beautyClubSvcUrl="/svc/profiles/loyalty/"+$scope.userInfo.profileInfo.loyaltyId+"/(BeautyRewardsInfo)";userInfoFactory.storeGetData(beautyClubSvcUrl,function(data){if(data&&data.rewardsProgress){$scope.beautyClub=data;$scope.rewardsProgressPercetage=($scope.beautyClub.rewardsProgress.currentAccumulation/$scope.beautyClub.rewardsProgress.targetDollarValue)*100;}});}},userInfoController:function($scope,$rootScope,userInfoFactory,$wagUtil,$sce){var userInfoListener,userInfoEvent,idleTime=0,idleInterval,url=window.location.href;var windowWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;if(windowWidth>767){$("#youaccountdropdown").addClass(".wag-header-signin-newexp");}$scope.windowWidth=windowWidth;$scope.init=function(){userInfoListener=Clazz.com.wag.userinfo.UserInfoListener;userInfoEvent=Clazz.com.wag.userinfo.UserInfoEvent;userInfoListener.initialize($scope);userInfoEvent.initialize($rootScope);$scope.load();};$wagUtil.getUserInfo(function(response){$scope.userInfo=response;});if(($scope.userInfo.profileInfo.recognizedState===true||$scope.userInfo.profileInfo.loggedIn==="true")&&($scope.userInfo.profileInfo.loyaltyId)&&!sessionStorage.getItem("evar65Triggred")){window.BAS_eVar65=$scope.userInfo.profileInfo.loyaltyId;$(document).trigger("triggerDTM","BAS_Evar65");sessionStorage.setItem("evar65Triggred","true");}if(typeof document.readyState!=="undefined"&&document.readyState==="complete"){balanceRewardsPoint();}else{if(window.attachEvent){window.attachEvent("onload",balanceRewardsPoint);}else{window.addEventListener("load",balanceRewardsPoint,false);}}function balanceRewardsPoint(){var i=0;var intervel=setInterval(function(){if(typeof killSwitchForBrMsg!=="undefined"){BRPoint();}if(i>10){clearInterval(intervel);}i++;},1000);function BRPoint(){clearInterval(intervel);if(window.location.pathname==="/store/checkout/cart.jsp"){killSwitchForBrMsg=false;}var resourceDetails=document.createElement("script");resourceDetails.setAttribute("type","text/javascript");resourceDetails.setAttribute("src",brInfoJsPath);resourceDetails.onreadystatechange=resourceDetails.onload=function(){var state=resourceDetails.readyState;if(!state||/loaded|complete/.test(state)){lazyBrInfo($scope,$sce);}};document.body.appendChild(resourceDetails);}}$scope.yourAccountFunction=function(){angular.element("#youaccountdropdown").addClass("activeAccDropMenu");angular.element("#yourAccMList").show();$scope.showHideMenu();if(angular.element(".wag-mobile-menu").is(":visible")){$(".main_menu li").addClass("wag-list-hide");$(".main_menu li").removeClass("wag-nav-hide");$(".main_menu li.nav5").removeClass("wag-list-hide");$(".main_menu li.nav5 a.menu2.link").click();if($(".yourAcContent").children().length<=0){$("#yourAccMList").appendTo(".yourAcContent");$("#yourAccMList").removeClass("wag-nav-hide");}$("#yourAccMList").removeClass("wag-nav-hide");$("#yourAccMList li").removeClass("wag-list-hide");$(".yourAcContent").removeClass("wag-list-hide");$(".wag-header-youraccount-wrapper").addClass("wag-nav-hide");$(".wag-header-reward-container-mobile").css("top",$(".main_menu").height()+$("#yourAccMList").height()+"px");$(".wag-header-userinfotab").css("top",$(".main_menu").height()+$("#yourAccMList").height()+$(".wag-header-reward-container-mobile").height()+"px");}$.each($("#new-nav-main-menu ul.wag-second-level-menu"),function(index,value){if(value.className.search("youraccount")<0&&value.className.search("wag-nav-hide")<0){var parentActiveMenu=(value.parentNode.classList[2])?"."+value.parentNode.classList[2]:"";$(parentActiveMenu+" ul.wag-second-level-menu").addClass("wag-nav-hide");$(parentActiveMenu+" ul.wag-second-level-menu span").removeClass("wag-nav-hide");$(parentActiveMenu+" .menu2.link").removeClass("wag-nav-hide");$(parentActiveMenu+" .menu2.menu").addClass("wag-nav-hide");$(parentActiveMenu+" ul.wag-third-level-menu").addClass("wag-nav-hide");}});};$scope.yourAccount=function(){if(windowWidth>767||navigator.appVersion.indexOf("MSIE 8.")!==-1){$scope.yourAccountFunction();}};$scope.yourAccountMouseOut=function(){if(windowWidth>767){angular.element("#youaccountdropdown").attr("aria-expanded","false");angular.element("#youaccountdropdown").removeClass("activeAccDropMenu");angular.element("#yourAccMList").hide();}};if(windowWidth>1024){$(".wag-user-info-dropodown-top").addClass("sample");}$scope.yourAccountMouseIn=function(){if(windowWidth>1024){angular.element("#wag-arrowinfo .icon-ArrowDown").addClass("icon-ArrowUp");angular.element("#youaccountdropdown").toggleClass("newheaderuserinfo");angular.element("#youaccountdropdown").removeClass("activeAccDropMenu");if($scope.userInfo.profileInfo.loggedIn==="true"||$scope.userInfo.profileInfo.recognizedState===true){angular.element(".wag-youraccount-infomob").css("visibility","hidden");angular.element(".userinfotxttruncate-login").css("top","12px");}}};$scope.yourAccountMouseLeave=function(flag){if(windowWidth>1024||(typeof flag!=="undefined"&&flag==="doClose")){angular.element("#wag-arrowinfo .icon-ArrowDown").removeClass("icon-ArrowUp");angular.element("#youaccountdropdown").toggleClass("newheaderuserinfo");angular.element("#youaccountdropdown").addClass("activeAccDropMenu");angular.element("#youaccountdropdown").attr("aria-expanded","false");angular.element(".wag-youraccount-infomob").css("visibility","visible");}};$("body").click(function(e){if($scope.UserInfoDrpDownOpen&&!$scope.UserInfoDrpDownOpenNgClk){$scope.UserInfoDrpDownOpen=false;$scope.$apply();}else{$scope.UserInfoDrpDownOpenNgClk=false;}if(windowWidth>767&&windowWidth<1025&&$(e.target).closest('[ng-mouseleave="yourAccountMouseLeave()"]').length===0){$scope.yourAccountMouseLeave("doClose");}});$scope.yourAccountClick=function(){angular.element("#youaccountdropdown").toggleClass("newheaderuserinfo");if($scope.UserInfoDrpDownOpen){$scope.UserInfoDrpDownOpen=false;angular.element(".wag-youraccount-infomob").css("visibility","visible");angular.element("#youaccountdropdown").attr("aria-expanded","false");}else{$scope.UserInfoDrpDownOpen=true;angular.element("#youaccountdropdown").attr("aria-expanded","true");if($scope.userInfo.profileInfo.loggedIn==="true"||$scope.userInfo.profileInfo.recognizedState===true){angular.element(".wag-youraccount-infomob").css("visibility","hidden");angular.element(".userinfotxttruncate-login").css("top","12px");}}$scope.UserInfoDrpDownOpenNgClk=true;if(windowWidth>=320&&windowWidth<768){$scope.yourAccountFunction();}};if(windowWidth>1024){var timeOut,outTimeout,hoverTime,houtTime,timeToClose,previous;$("#youaccountdropdown").hover(function(){hoverTime=new Date().getTime();if($(this).hasClass("activeAccDropMenu")){previous=true;clearTimeout(outTimeout);}previous=false;timeOut=setTimeout(function(){$scope.yourAccount();},document.delayTime);},function(){houtTime=new Date().getTime();timeToClose=houtTime-hoverTime;if(timeToClose<document.delayTime){clearTimeout(timeOut);}outTimeout=setTimeout(function(){if(!previous){$scope.yourAccountMouseOut();}},document.delayTime);});}$scope.showHideMenu=function(){if(angular.element(".wag-mobile-menu").is(":visible")){$("aside article.wag-header-youraccount-wrapper").removeClass("dropdown");}else{$("aside article.wag-header-youraccount-wrapper").addClass("dropdown");}};$(window).bind("resize",function(){$scope.showHideMenu();}).resize();if(angular.element(window).width()>767){$(document).click(function(e){if($(e.target).is($(".wag-header-youraccount-wrapper").find("span:first"))===false&&$(e.target).is($(".wag-your-account-arrow").find("img"))===false&&$(e.target).is($("#yourAccMList"))===false&&$(e.target).is($("article.wag-user-picture").find("img"))===false&&$(e.target).is($(".wag-signin-header-down.icon-ArrowDown"))===false){angular.element("#youaccountdropdown").removeClass("newheaderuserinfo");$(".wag-youraccountdownicon").removeClass("icon-ArrowUp");}});}$scope.userInfoToggleMenuForAExp=function(){$("body").on("click",function(e){if($(e.target).closest("#youaccountdropdown").length===0){$(".wag-signin-header-down").removeClass("icon-ArrowUp");$("#NewExpVersion_A_span").removeClass("wag-header-signin-newexp");$("#NewExpVersion_A_UserValue").removeClass("wag-header-signin-newexpLogged");$("#yourAccMList").hide();if(window.width>767&&window.width<1025){$("#newExpHide").removeClass("newExpHideClass");$("#newExpHideLogin").removeClass("newExpHideClassLogin");}}else{if($(e.target).closest("#NewExpVersion_A_span, #NewExpVersion_A_UserValue").length>0){$(".wag-signin-header-down").toggleClass("icon-ArrowUp");$("#headNewExp").removeClass("wag-user-info-dropodown-top");$("#NewExpVersion_A_span").toggleClass("wag-header-signin-newexp");$("#NewExpVersion_A_UserValue").toggleClass("wag-header-signin-newexpLogged");$("#yourAccMList").toggle();if($("#yourAccMList").css("display")==="block"){$("#youaccountdropdown").attr("aria-expanded","true");$(".yourAccAriaExp").attr("aria-expanded","true");}else{$("#youaccountdropdown").attr("aria-expanded","false");$(".yourAccAriaExp").attr("aria-expanded","false");}if(window.width>767&&window.width<1025){$("#newExpHide").toggleClass("newExpHideClass");$("#newExpHideLogin").toggleClass("newExpHideClassLogin");}}}});};$scope.userInfoToggleMenuForAExp();$scope.wagStoreUserLogOut=function(){userInfoFactory.storeUserLogout(function(data){sessionStorage.removeItem("header");try{localStorage.clear();sessionStorage.clear();if(typeof(localStorage)!=="undefined"&&localStorage.length>0){for(var i in localStorage){localStorage.removeItem(localStorage.key(i));}}if(typeof(sessionStorage)!=="undefined"&&sessionStorage.length>0){for(var j in typeof(sessionStorage)){sessionStorage.removeItem(sessionStorage.key(j));}}}catch(e){}if(data&&data.source&&data.source=="MyStore"){document.location="mystore://go?source=ISO";}else{window.location.href="/storeauth.jsp?app=iso";}});};$scope.load=function(){$scope.mobileCustomerLookupSetup=function(){if(flagformobile){if(typeof $("#StoreUser-UserInfo").html()!=="undefined"&&$("#Mobile-StoreUser-UserInfo").length>0){if($(".stickcontent").height()<46){$(".stickcontent").css("height","46px");}$("#Mobile-StoreUser-UserInfo").replaceWith($("#StoreUser-UserInfo"));$("#StoreUser-UserInfo").css("padding-top","10px");var lookupOpt=function(){if(!($("#isoProfInfoAExp").length||$("#wagIsoLookUp").length)){setTimeout(function(){lookupOpt();},300);return;}if($("#isoProfInfoAExp").length){$("#StoreUser-UserInfo").prepend($("#isoProfInfoAExp"));}else{if($("#wagIsoLookUp").length){$("#StoreUser-UserInfo").prepend($("#wagIsoLookUp"));}}};lookupOpt();}$(".wagIsoLogout").removeClass("container");$(".wagIsoLogout>div").removeClass("p0");$("#StoreUser-UserInfo").css("width","100%").css("float","left").css("margin-bottom","10px").css("padding-left","15px");if($(".wag-search-area").is(":visible")){$(".wag-sticky-nav-search").attr("style","margin-top:94px !important;display:block;");}else{$(".wag-sticky-nav-search").attr("style","margin-top:44px !important;display:block;");}$(".wag-sticky-nav-user-info").attr("style","margin-top:47px !important");$(".wag-sticky-nav-bg").attr("style","margin-top:44px !important");$(".wag-mobile-menu").attr("style","margin-top:44px !important");$("#wagHeaderLogoContainer").css("margin-top","0px");}};$scope.customerLookupReset=function(){userInfoFactory.storeUserReset(function(data){sessionStorage.removeItem("header");window.location.href="/store/catalog/shopLanding";});};$scope.userinfo={};$scope.userinfo.cartUrl="/store/checkout/cart.jsp";$scope.userinfo.notificationmsgcount=0;$scope.userinfo.commonContextPath=Clazz.com.wag.config.commonUiConfig.commonContextPath;$scope.userinfo.pharmacyContextPath=Clazz.com.wag.config.commonUiConfig.pharmacyContextPath;$scope.userinfo.selfServeContextPath=Clazz.com.wag.config.commonUiConfig.selfServeContextPath;$scope.userinfo.pharmacyUrlContext=angular.element("#pharmacyUrlContext").attr("value");$scope.userinfo.onSelectionChange=function(val){userInfoEvent.changeSelection(val);};$scope.userinfo.onToggleClass=function(){userInfoEvent.toggleMenu();};$scope.updateRXDLCartURL=function(RxCount,itemCount){if(RxCount>=1&&itemCount<=0){$scope.userinfo.cartUrl="/pharmacy/prescriptioncheckout.jsp";}else{$scope.userinfo.cartUrl="/store/checkout/cart.jsp";}if(RxCount){itemCount=parseInt(itemCount)+parseInt(RxCount);}return itemCount;};$scope.updateUserinfoWidget=function(){userInfoFactory.getUserInfo(function(userInfoData){$scope.userInfoData=userInfoData;var userInfo=userInfoData.profileInfo;if(typeof userInfo.phoneNumber!=="undefined"&&userInfo.phoneNumber.search("-")===-1){var nArray=userInfo.phoneNumber.match(/^(\d{3})(\d{3})(\d{4})$/);if(nArray){userInfo.phoneNumber=nArray[1]+"-"+nArray[2]+"-"+nArray[3];}}$scope.newBRprofileInfo={};$scope.newBRprofileInfo.profileInfo={};if(userInfoData.profileInfo.flow==="iso"||userInfoData.profileInfo.flow==="beauty"){$scope.newExpNoLookup=false;if(userInfo.firstName){$scope.newBRprofileInfo.profileInfo={customerFirstName:userInfo.firstName,customerLastName:userInfo.lastName,customerPhoneNumber:userInfo.phoneNumber,customerLoyaltyCardNumber:userInfo.loyaltyCardNumber,customerLoyaltyId:userInfo.loyaltyId,customerProfileId:userInfo.profileId,customerBrId:userInfo.loyaltyId};$(".newHeaderUserInfoB").addClass("newHeaderUserInfoBIso");$(".herderBLogoSearchContainer").addClass("herderBLogoSearchContainerIso");$(".wag-header-promo-wrapper").css("min-height","40px");$("#wagHeaderLogoContainer").css("margin-top","20px");$scope.newExpNoLookup=true;}$scope.newBRprofileInfo.profileInfo.loggedIn=true;window.storeUserInfo=$scope.newBRprofileInfo;userInfoEvent.storeUserDataBrodcast($scope.newBRprofileInfo);if($scope.newBRprofileInfo.profileInfo&&$scope.newBRprofileInfo.profileInfo.loggedIn){var notMobileFlag=(typeof window.matchMedia!=="undefined")?(window.matchMedia("(min-width: 768px)").matches):($(window).width()>767);var txt='<div class="wag-backgroundcolor-header" id ="wagIsoLogoutContainer" style="background-color: #02A0C0"><div class="container wagIsoLogout"><div class="col-lg-12 col-md-12 col-sm-12 col-xs-12 p0 m0"><div class="wag-team-member-text"><a href="#" onclick="$(\'#wagStoreUserLogOut\').click();">Team Member Sign Out</a>';if($scope.newExpNoLookup){txt+='<span style="color:#ffffff"> | </span><a href="#" onclick=$(\'#wagAExpIsoReset\').click();>Reset</a>';}txt+="</div></div></div>";$("body").prepend(txt);$(".wagIsoLogout").addClass("wagNewHeaderExpA").addClass("wag-hn-lt-75bold ");$(".wag-top-header.wag-bg-tint-blue").addClass("wag-iso-top-header");}$scope.mobileCustomerLookupSetup();$(window).bind("resize",function(){$scope.mobileCustomerLookupSetup();});}if(userInfoData.notificationInfo){$scope.userinfo.notificationmsgcount=userInfoData.notificationInfo.msgCount;}if(userInfoData.profileInfo){userInfoEvent.userProfile(userInfoData.profileInfo);}userInfoEvent.userProfileData(userInfoData);$scope.cartInfoData=userInfoData.cartInfo;userInfoEvent.cartInfo(userInfoData.cartInfo);if(userInfoData.profileInfo){$scope.userinfo.name=userInfoData.profileInfo.firstName;if(userInfoData.profileInfo.firstName){$scope.userinfo.captilaizeName=userInfoData.profileInfo.firstName.replace(userInfoData.profileInfo.firstName.charAt(0),userInfoData.profileInfo.firstName.charAt(0).toUpperCase());}if(userInfoData.profileInfo.firstName&&userInfoData.profileInfo.firstName.length>8){$scope.userinfo.nameTruncated=userInfoData.profileInfo.firstName.substr(0,7);$scope.userinfo.nameTruncated=$scope.userinfo.nameTruncated.replace($scope.userinfo.nameTruncated.charAt(0),$scope.userinfo.nameTruncated.charAt(0).toUpperCase());}else{if(userInfoData.profileInfo.firstName){$scope.userinfo.nameTruncated=userInfoData.profileInfo.firstName;$scope.userinfo.nameTruncated=$scope.userinfo.nameTruncated.replace($scope.userinfo.nameTruncated.charAt(0),$scope.userinfo.nameTruncated.charAt(0).toUpperCase());}}}userInfoEvent.userobject(userInfoData.profileInd);if(userInfoData.profileInfo&&userInfoData.profileInfo.loggedIn){userInfoEvent.loggedstatus(userInfoData.profileInfo.loggedIn);$scope.userinfo.loggedin=userInfoData.profileInfo.loggedIn;}if(userInfoData.profileInfo&&typeof userInfoData.profileInfo.recognizedState!="undefined"){$scope.userinfo.recognizedState=userInfoData.profileInfo.recognizedState;}else{$scope.userinfo.recognizedState=false;}if(userInfoData.cartInfo&&(userInfoData.cartInfo.itemCount||userInfoData.cartInfo.rxCount)){$scope.userinfo.ordercount=$scope.updateRXDLCartURL(userInfoData.cartInfo.rxCount,userInfoData.cartInfo.itemCount);$scope.userinfo.ordercountmobile=$scope.updateRXDLCartURL(userInfoData.cartInfo.rxCount,userInfoData.cartInfo.itemCount);}else{$scope.userinfo.ordercount="0";}if(userInfoData.notificationInfo){$scope.userinfo.msgcount="("+userInfoData.notificationInfo.msgCount+")";}else{$scope.userinfo.msgcount="(0)";}});};$scope.reCompileCartIcon=function(){if(angular.element(".wagNewHeaderCartIconContainer").length>0){angular.element(".wagNewHeaderCartIconContainer").append(angular.element("#cartFocus"));}};window.reCompileCartIcon=function(){$scope.reCompileCartIcon();};$scope.updateUserinfoWidget();$scope.userinfo.notYouLogOut=function(ev,fromWhere){$scope.userinfo.logOut(ev,fromWhere);};$scope.userinfo.logOut=function(ev,fromWhere){document.cookie="mt.ribbon=; Path=/; expires=Thu, 01 Jan 1970 00:00:01 GMT;";angular.element(".wag-hide-loading").show().css({"z-index":"1040"});userInfoFactory.logOutFactory(function(data){angular.element(".wag-hide-loading").hide();document.cookie="selectstore=false";try{localStorage.clear();sessionStorage.clear();if(typeof(localStorage)!=="undefined"&&localStorage.length>0){for(var i in localStorage){localStorage.removeItem(localStorage.key(i));}}if(typeof(sessionStorage)!=="undefined"&&sessionStorage.length>0){for(var j in typeof(sessionStorage)){sessionStorage.removeItem(sessionStorage.key(j));}}}catch(e){}if(data.messages[0].code==="WAG_I_LOGOUT_1000"){if(data.links[0].href!==undefined){var logoutSuccessURI=data.links[0].href;window.location.href=logoutSuccessURI;}else{var logoutURI="/logout.jsp?key=i_1000";window.location.href=logoutURI;}}else{if(data.messages[0].code==="WAG_I_LOGOUT_1002"){var logoutURI="/logout.jsp?key=i_1002";window.location.href=logoutURI;}}if(fromWhere&&fromWhere=="notYou"){var logoutURI="/login.jsp?sessionTimeoutMsg=true";window.location.href=logoutURI;}});ev.preventDefault();};$scope.userinfo.resetIdleTime=function(){if($("#wag-ssn-tout-overlay").is(":visible")){idleTime=13*60;}else{idleTime=0;}};$scope.userinfo.logoutAndRedirectToLogin=function(){angular.element(".wag-hide-loading").show();userInfoFactory.logOutFactory(function(data){angular.element(".wag-hide-loading").hide();document.cookie="selectstore=false";try{sessionStorage.removeItem("profile");localStorage.clear();sessionStorage.clear();if(typeof(localStorage)!=="undefined"&&localStorage.length>0){for(var i in localStorage){localStorage.removeItem(localStorage.key(i));}}if(typeof(sessionStorage)!=="undefined"&&sessionStorage.length>0){for(var j in typeof(sessionStorage)){sessionStorage.removeItem(sessionStorage.key(j));}}}catch(e){}window.location.href="/login.jsp?sessionTimeoutMsg=true";});};$scope.signinRedirection=function(){if(url.indexOf("/offers/offers.jsp")>0){try{sessionStorage.setItem("registrationsuccess",true);}catch(e){}window.location.href="/balance_rewards_redirection.jsp?endurl=signinoffers";}else{if(url.indexOf("almostDone=true")>0){$rootScope.redirectToLogin();}else{if(typeof clearIntentForLogin!=="undefined"){var redirectUrl=window.location.pathname+window.location.search;$.ajax({url:"/login_redirect_plp.jsp",type:"post",data:{redirectUrl:encodeURIComponent(redirectUrl)},success:function(){},error:function(){}});window.location.href="/login.jsp";}else{if(url.indexOf("cart.jsp")!=-1){window.location.href="/youraccount/cs_redirect.jsp?intent=redirect&landingURL=/store/checkout/cart.jsp";}else{window.location.href="/login.jsp?clearIntent=true";}}}}};$scope.registerRedirection=function(){if(url.indexOf("/offers/offers.jsp")>0){try{sessionStorage.setItem("registrationsuccess",true);}catch(e){}window.location.href="/balance_rewards_redirection.jsp?endurl=registeroffers";}else{if(url.indexOf("almostDone=true")>0){window.location.href="/balancerewards/frags/beauty_multimatch_frag.jsp?endurl=register";}else{if(window.currentPageType&&window.currentPageType==="ProductDetails"){window.location.href="/register/regOptions.jsp";}else{window.location.href="/youraccount/cs_redirect.jsp?intent=regOptions&fromPage=regOptions";}}}};$scope.brmemberlookupRedirection=function(){if(typeof window.location.pathname!=="undefined"){var beautyPages=["/balancerewards/beauty_confirmation.jsp","/balancerewards/beauty.jsp","/balancerewards/edit_questionnaire.jsp","/balancerewards/questionnaire.jsp","/balancerewards/recommendations.jsp","/store/balancerewards/beauty.jsp"];if(beautyPages.indexOf(window.location.pathname)!==-1){window.location.href="/store/balancerewards/beauty.jsp";}else{var brmemberlookupRedirectUrl=window.location.pathname+window.location.search+window.location.hash;if(window.location.pathname==="/store/checkout/confirmorder_sdd.jsp"){brmemberlookupRedirectUrl="/store/catalog/shopLanding";}brmemberlookupRedirectUrl=encodeURIComponent(brmemberlookupRedirectUrl);window.location.href="/store/checkout/brmemberlookup.jsp?referral="+brmemberlookupRedirectUrl;}}};};},globalRxAlertController:function($scope,$wagUtil,userInfoFactory){$scope.displayRxAlert=false;$wagUtil.getUserInfo(function(userInfo){if(typeof userInfo!=="undefined"&&typeof userInfo.profileInfo!=="undefined"&&((typeof userInfo.profileInfo.loggedIn!=="undefined"&&userInfo.profileInfo.loggedIn==="true"&&userInfo.profileInd!=="undefined"&&userInfo.profileInd.isRxAuthenticatedUser!=="undefined"&&userInfo.profileInd.isRxAuthenticatedUser===true)||userInfo.profileInfo.recognizedState)){var postData={},profileId=0,alertData3S={ctaURL:"/login.jsp",messageType:"alert",longMessage:"we have important things to tell you.",message:"Sign in"};$scope.firstNameStr=userInfo.profileInfo.firstName+", ";$scope.bgColor={"background-color":"#02af47"};if(userInfo.profileInfo.loggedIn==="true"){sessionStorage.removeItem("showRxAlertIn3S");profileId=userInfo.profileInfo.profileId;}if(userInfo.profileInfo.recognizedState){if(sessionStorage.getItem("showRxAlertIn3S")==="true"){$scope.displayRxAlert=true;$scope.alertData=alertData3S;setTimeout(function(){$(".refill").addClass("show-refill");},500);}}if(sessionStorage.getItem("showRxAlertIn3S")!=="true"){userInfoFactory.globalRxAlertFactory(profileId,postData,function(data){if(typeof data==="object"&&data.RxAlertList){$scope.displayRxAlert=true;$scope.alertData=(data.RxAlertList.length>0)?data.RxAlertList[0]:{};if(userInfo.profileInfo.recognizedState&&data.RxAlertList.length>0){sessionStorage.setItem("showRxAlertIn3S","true");$scope.alertData=alertData3S;}if($scope.alertData.messageType==="warning"){$scope.bgColor["background-color"]="#c6102b";}setTimeout(function(){$(".refill").addClass("show-refill");},500);}});}}});$scope.rxAlertDismiss=function(){$(".show-refill").remove();document.cookie="gRxAlDis=Y;domain=.walgreens.com;path=/;";};},independentCarouselController:function($scope,$rootscope,$wagUtil,userInfoFactory){$scope.independentCarousel={};var independent_post_data=JSON.parse($("#independentXmlData").text());var postdata=independent_post_data.postData;var requestType=independent_post_data.requestType;$scope.independentCarousel.titleToShow=independent_post_data.title;if(requestType&&requestType!==""){requestType=requestType.toUpperCase();}if(requestType&&requestType=="POST"){var serviceUrl=elasticSearchServiceEndPoint+independent_post_data.serviceUrl;if(window.location.pathname!=="/"||(typeof document.readyState!=="undefined"&&document.readyState==="complete")){userInfoFactory.independentCarouselFactory(serviceUrl,postdata,function(data){if(data){$scope.independentCarousel.products=data.products;$scope.independentCarousel.url="";globalVar($scope.independentCarousel,"independentCarousels",true);}});}else{$(window).on("load",function(){setTimeout(function(){userInfoFactory.independentCarouselFactory(serviceUrl,postdata,function(data){$scope.independentCarousel.products=data.products;$scope.independentCarousel.url="";globalVar($scope.independentCarousel,"independentCarousels",true);});},100);});}}else{if(requestType&&requestType=="GET"){var serviceUrl=elasticSearchServiceEndPoint+independent_post_data.serviceUrl;if(window.location.pathname!=="/"||(typeof document.readyState!=="undefined"&&document.readyState==="complete")){userInfoFactory.storeGetData(serviceUrl,function(data){if(data){$scope.independentCarousel.products=data.products;$scope.independentCarousel.url="";globalVar($scope.independentCarousel,"independentCarousels",true);}});}else{$(window).on("load",function(){setTimeout(function(){userInfoFactory.storeGetData(serviceUrl,function(data){$scope.independentCarousel.products=data.products;$scope.independentCarousel.url="";globalVar($scope.independentCarousel,"independentCarousels",true);});},100);});}}}},storeLocatorPreviewController:function($scope,$rootscope,$wagUtil,userInfoFactory){storeLocatorPreview($scope,$rootscope,$wagUtil,userInfoFactory);},megaMenuController:function($scope,$rootScope,megaMenuFactory,$wagUtil,$compile,$sce){var t1MenuEnd=false;var flagformobile=(typeof window.matchMedia!="undefined")?(window.matchMedia("(min-width: 320px) and (max-width: 767px)").matches):($(window).width()>=320&&$(window).width()<768);if(flagformobile===true){var serviceURLMob=elasticSearchServiceEndPoint+"/categories?source=header&device=mobile";$scope.changeToHtml=function(htmlText){return $sce.trustAsHtml(htmlText);};$scope.generateURL=function(id){var saleOnURLMob="/store/c/productlist/N="+id+"-4294896499/1/OnSale="+id;return saleOnURLMob;};megaMenuFactory.getCategoriesItem(serviceURLMob,function(data){if(data&&data.categories&&data.categories.length>0){$scope.categoriesMB=data.categories;$rootScope.categoriesList=data.categories;}});}var flagforTab=(typeof window.matchMedia!="undefined")?(window.matchMedia("(min-width: 768px) and (max-width: 1024px)").matches):($(window).width()>=767&&$(window).width()<1024);if(flagforTab===true){setTimeout(function(){$("#mega-menu-nav nav ul > li#tier1Item>a, .main_menu .menu2, .weeklyAd .menu2, span.wag-nav-menu-item-switch-on").click(function(event){if($(this).hasClass("tab-active")){return true;}else{$("#mega-menu-nav nav ul > li#tier1Item>a.tab-active, .main_menu .menu2.tab-active, .weeklyAd .menu2.tab-active, span.wag-nav-menu-item-switch-on.tab-active").not(this).removeClass("tab-active");$(this).addClass("tab-active");return false;}});},300);}if(flagformobile!==true){var serviceURL=elasticSearchServiceEndPoint+"/categories?source=header&device=desktop";$scope.changeToHtml=function(htmlText){return $sce.trustAsHtml(htmlText);};$scope.generateURL=function(id){var saleOnURL="/store/c/productlist/N="+id+"-4294896499/1/OnSale="+id;return saleOnURL;};$scope.tier1CatItems=[];megaMenuFactory.getCategoriesItem(serviceURL,function(data){if(data&&data.categories&&data.categories.length>0){$scope.categories=data.categories;$rootScope.categoriesList=data.categories;}});}}};function setMinHeight(){var temp=0;$("#wag-homepage-miscellaneous .wag-homepage-misc-title").each(function(){var _this=$(this);if(temp<_this.height()){temp=_this.height()+20;}});$("#wag-homepage-miscellaneous .wag-homepage-misc-title").attr("style","height:"+temp+"px");}$(window).load(function(){setTimeout(function(){setMinHeight();},1000);});Clazz.com.wag.userinfo.CarouselProductsDirective={slyindependentcarousel:function($compile,$http,$templateCache,$window,$interval,$rootScope,$timeout){var linker=function(scope,element,attr){var carouselsid=element.attr("id");var $frame=$("#"+carouselsid);var $wrap=$frame.parent();var slyConfig={horizontal:1,itemNav:"basic",smart:1,activateOn:"null",mouseDragging:1,touchDragging:1,releaseSwing:1,startAt:0,scrollBar:null,scrollBy:0,pagesBar:$wrap.find(".pages"),activatePageOn:"click",speed:500,dragHandle:1,dynamicHandle:1,clickBar:1,forward:$wrap.find(".forward"),backward:$wrap.find(".backward"),prev:$wrap.find(".prev"),next:$wrap.find(".next"),prevPage:$wrap.find(".prevPage"),nextPage:$wrap.find(".nextPage")};if(typeof $frame.sly!=="undefined"){var sly=$frame.sly(slyConfig);$(window).resize(function(e){$frame.sly("reload");});}setTimeout(function(){$("#"+carouselsid).sly("reload");},500);setTimeout(function(){var temp=0;$($frame.selector+" .wag-product-card-width").each(function(){var _this=$(this);if(temp<_this.height()){temp=_this.height();}});$($frame.selector+" .wag-product-card-width").attr("style","height:"+temp+"px");},500);};return{restrict:"A",scope:{data:"="},link:linker};},slycarouselbrandmodule:function(){var linker=function(scope,element,attr){scope.loadCarousel=function(idVal){var $frame=$("#"+idVal);var $slidee=$frame.children("ul").eq(0);var $wrap=$frame.parent();if(typeof $frame.sly!=="undefined"){$frame.sly({horizontal:1,itemNav:"basic",smart:1,mouseDragging:1,touchDragging:1,releaseSwing:1,startAt:0,scrollBar:null,scrollBy:0,pagesBar:$wrap.find(".pages"),activatePageOn:"click",speed:500,elasticBounds:1,dragHandle:1,dynamicHandle:1,clickBar:1,forward:$wrap.find(".forward"),backward:$wrap.find(".backward"),prev:$wrap.find(".prev"),next:$wrap.find(".next"),prevPage:$wrap.find(".prevPage"),nextPage:$wrap.find(".nextPage")});}};setTimeout(function(){scope.loadCarousel(element.attr("id"));},5000);};return{restrict:"A",scope:{data:"="},link:linker};},storeUserInfoCus:function(){return{restrict:"A",link:function(scope,element,attr){if(flagformobile&&scope.userInfoData!="undefined"&&scope.userInfoData.profileInfo!="undefined"&&scope.userInfoData.profileInfo.flow=="iso"){scope.mobileCustomerLookupSetup();}}};},waguserinfomobilewidget:function(){return{restrict:"A",scope:{data:"="},link:function(scope,element,attr){if(typeof window.mobileUserInfoPlaceholderReady!=="undefined"&&window.mobileUserInfoPlaceholderReady){angular.element("#wag-userinfohamburger").replaceWith(element);element.attr("style","display:block");}else{window.mobileUserInfoContentReady=true;}}};}};Clazz.com.wag.userinfo.UserInfoFactory={userInfoFactory:function(userInfoService,logOutService,rxGetAlertService,independentCarouselService,newBRService){var factory={},serviceUrl="";factory.getUserInfo=function(callback){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){serviceUrl="/svc/header?timeStamp="+new Date().getTime();}else{serviceUrl=Clazz.com.wag.config.commonUiConfig.getUserInfo;}userInfoService(serviceUrl,callback);};factory.logOutFactory=function(callback){if(/MSIE (\d+\.\d+);/.test(navigator.userAgent)){serviceUrl="/svc/profiles/logout?timeStamp="+new Date().getTime();}else{serviceUrl=Clazz.com.wag.config.commonUiConfig.signOut;}logOutService(serviceUrl,callback);};factory.newBRFactory=function(callback){serviceUrl=Clazz.com.wag.config.commonUiConfig.storeAuthHeader;newBRService(serviceUrl,callback);};factory.storeGetData=function(serviceUrl,callback){newBRService(serviceUrl,callback);};factory.storeUserLogout=function(callback){serviceUrl=Clazz.com.wag.config.commonUiConfig.storeAuthLogout+"?rnd="+$.now();independentCarouselService(serviceUrl,{},callback);};factory.storeUserReset=function(callback){serviceUrl="/svc/storeauth/customerReset";independentCarouselService(serviceUrl,{},callback);};factory.globalRxAlertFactory=function(profileId,data,callback){serviceUrl="/svc/profiles/<profileId>/prescriptions/(alert)";serviceUrl=serviceUrl.replace("<profileId>",profileId);rxGetAlertService(serviceUrl,data,callback);};factory.independentCarouselFactory=function(serviceUrl,data,callback){independentCarouselService(serviceUrl,data,callback);};return factory;},megaMenuFactory:function(megaMenuService){var megaMenusFactory={};megaMenusFactory.getCategoriesItem=function(serviceUrl,callback){megaMenuService(serviceUrl,callback);};return megaMenusFactory;}};Clazz.com.wag.userinfo.UserInfoService={userInfoService:function($wagAPI,$wagUtil){return function(path,callback){$wagUtil.getUserInfo(function(data){if(callback){if(window.dtmObject===undefined){window.dtmObject={};}if(window.dtmObject.CAC===undefined){window.dtmObject.CAC={};}window.dtmObject.CAC.HeaderProfile=data;if(window.dtmObject.CAC.HeaderProfile.profileInfo!==undefined){if(window.dtmObject.CAC.HeaderProfile.profileInfo.loggedIn==="true"){$(document).trigger("triggerDTM","BAS_Global_EVar9");}}callback(data);}});};},logOutService:function($wagAPI){return function(path,callback){$wagAPI.post(path).success(function(data){if(callback){callback(data);}});};},rxGetAlertService:function($http){var config={};config.timeout=25000;config.errorHandler=false;config.startTime=new Date().getTime();return function(path,data,callback){$http.post(path,data,config).success(function(data){if(callback){callback(data);}}).error(function(){callback("SvcError");});};},independentCarouselService:function($wagAPI){return function(path,postdata,callback){var customHeader={};if(path.indexOf("/storelocator/v1/stores/search")>-1||path.indexOf("/storelocator/v1/stores/status")>-1){customHeader.headers={"X-wag_sid":getWagSid()};}$wagAPI.post(path,postdata,customHeader).success(function(data){if(callback){callback(data);}}).error(function(data,xhr){if(callback){callback(data);}});};},newBRService:function($wagAPI){return function(path,callback){var customHeader={};if(path.indexOf("/store?id=")>-1){customHeader.headers={"X-wag_sid":getWagSid()};}$wagAPI.nrGet(path,undefined,customHeader).success(function(data){if(callback){callback(data);}});};},megaMenuService:function($wagAPI){return function(path,callback){$wagAPI.nrGet(path).success(function(data){if(callback){callback(data);}});};}};Clazz.com.wag.userinfo.UserInfoEvent={rootScope:null,initialize:function($rootScope){this.rootScope=$rootScope;},userProfile:function(data){this.rootScope.$broadcast("wag.userinfo.UserInfoEvent.userProfile",data);},userProfileData:function(data){this.rootScope.$broadcast("wag.userinfo.UserInfoEvent.userProfileData",data);},cartInfo:function(data){this.rootScope.$broadcast("wag.userinfo.UserInfoEvent.cartInfo",data);},changeSelection:function(data){this.rootScope.$broadcast("wag.userinfo.UserInfoEvent.ChangeSelection",data);},toggleMenu:function(){this.rootScope.$broadcast("wag.userinfo.UserInfoEvent.toggleMenu");},userobject:function(data){this.rootScope.$broadcast("wag.userinfo.UserInfoEvent.USERDATA",data);},loggedstatus:function(data){this.rootScope.$broadcast("wag.userinfo.UserInfoEvent.loginstatus",data);},sendICPlusData:function(data){this.rootScope.$broadcast("com.wag.uce.ucedefault.js.sendICPlusData",data);},sendRxData:function(data){this.rootScope.$broadcast("com.wag.uce.ucedefault.js.sendRxData",data);},storeUserDataBrodcast:function(data){this.rootScope.$broadcast("wag.userinfo.UserInfoEvent.storeUserDataBrodcast",data);}};Clazz.com.wag.userinfo.UserInfoListener={$myscope:null,initialize:function($scope){this.$myscope=$scope;this.listen();},listen:function(){var self=this;self.$myscope.$on("com.wag.cartinfo.js.UpdateCartCount",function(event,data){self.$myscope.userinfo.ordercount=self.$myscope.updateRXDLCartURL(window.header.cartInfo.rxCount,data);self.$myscope.userinfo.ordercountmobile=self.$myscope.updateRXDLCartURL(window.header.cartInfo.rxCount,data);});self.$myscope.$on("com.wag.addtocart.js.AddToCartCount",function(event,data){self.$myscope.userinfo.ordercount=self.$myscope.updateRXDLCartURL(window.header.cartInfo.rxCount,data);self.$myscope.userinfo.ordercountmobile=self.$myscope.updateRXDLCartURL(window.header.cartInfo.rxCount,data);});self.$myscope.$on("com.wag.login.signin.js.SignInEvent.showusernamepopup",function(event,data){self.$myscope.updateUserinfoWidget();});self.$myscope.$on("com.wag.dobrdspagechg.js.DoBrdsPagechgEvent.userInfoUpdate",function(event){self.$myscope.updateUserinfoWidget();});}};var primeRegFlow=(typeof primeRegFlow!=="undefined"&&primeRegFlow===true)?true:false;var wagUtil={};wagUtil=Clazz.CommonFactory.$wagUtil();wagUtil.isLoggedIn(function(res){if(sessionOverlay!==undefined&&!primeRegFlow){if(res==="true"&&sessionOverlay){Clazz.App.windowSessionTimeout();}}});$(".wag-ssn-overlay-autologin-content").addClass("hide");$("#wag-ssn-tout-overlay-logout").bind("click",function(event){Clazz.App.logoutCall();});$("#wag-ssn-tout-continue-session,#wag-ssn-tout-continue-session-autologin").bind("click",function(event){window.location.reload();});$("#wag-ssn-tout-continue-session-prime").bind("click",function(event){window.location.href="https://qa.myprime.com/";});$("#wag-ssn-tout-overlay").on("hidden.bs.modal",function(){if(!Clazz.App.readCookie("wmat")){window.location.reload();}});var width=$(window).width(),backbtnClicked,pageTrun,pageTrunResize,historyBack;function showSsnOverlay(element){$(".wag-ssn-overlay-autologin-content").removeClass("hide");$(".wag-ssn-overlay-content").addClass("hide");backbtnClicked=0;var modalPopupFullpage=$(element);modalPopupFullpage.each(function(i){var $clone=$(this).clone().css("display","block").appendTo("body");var overlayHeight=$clone.find(".modal-content").height();var top=Math.round(($clone.height()-$clone.find(".modal-content").height())/2);top=top>0?top:0;$clone.remove();});$("meta[name=viewport]").attr("content","user-scalable=yes, width=device-width, initial-scale=1.0, maximum-scale=2.0");pageTrun=true;pageTrunResize=true;$(".popup-backbutton").removeClass("hide").addClass("show");$(".close-popup").hide();modalPopupFullpage.removeClass("fade").addClass("leftPos");modalPopupFullpage.css("min-width","100%");modalPopupFullpage.find(".wag-modal-dialog-middle").css("padding","0px").css({height:"100%",background:"#fff","min-width":"100%","min-height":"100%",display:"block",margin:"0"});modalPopupFullpage.find(".page-trun-modal-content").removeClass("modal-content").removeClass("wag-modal-content");modalPopupFullpage.find("#wag-modal-outer").removeClass("modal-outer").removeClass("wag-modal-outer").css("background","#fff");$("#wag-ssn-tout-overlay").removeClass("wag-modal-center");modalPopupFullpage.find(".page-trun-modal-content").css("border","none").css("box-shadow","none");modalPopupFullpage.find(".page-trun-modal-content").find(".content-body").css("max-height","100%");modalPopupFullpage.find(".page-trun-modal-content").find(".modal-body").css("max-height","100%");modalPopupFullpage.find(".page-trun-modal-content").css("margin-top","0px");modalPopupFullpage.find(".wag-back-button-show").css("display","block");modalPopupFullpage.addClass("wag-modal-offers-overlay-mob");window.scrollNo=$(window).scrollTop();setTimeout(function(){modalPopupFullpage.css("display","block");},75);setTimeout(function(){modalPopupFullpage.css("overflow-y","auto");modalPopupFullpage.removeClass("leftPos").addClass("slide in");},200);setTimeout(function(){$("body").addClass("modal-open").addClass("wag-modal-open-page-turn-offers");},1000);$(window).bind("resize",function(){});historyBack=false;setTimeout(function(){location.hash="pageTurn";modalPopupFullpage.find(".wag-overlay-page-turn-header").css("display","block");if(window.history&&window.history.pushState){$(window).on("popstate",function(){historyBack=true;hidePageTurnOverlay(element);});}},1000);$(".popup-backbutton, .close-page-turn").on("click",function(){$rootScope.hidePageTurnOverlay(element);});}$(window).bind("resize",function(){if(pageTrunResize){window.scrollBy(0,20);}});function hidePageTurnOverlay(element){backbtnClicked=backbtnClicked+1;if(width<=767&&!historyBack&&backbtnClicked===1){window.history.back();}pageTrun=false;$("meta[name=viewport]").attr("content","width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=2.0");pageTrunResize=false;var wagDoOffersOverlay=$(element);wagDoOffersOverlay.find(".page-trun-modal-content").addClass("modal-content").addClass("wag-modal-content");$("body").removeClass("modal-open").removeClass("wag-modal-open-page-turn-offers");setTimeout(function(){$(window).scrollTop(window.scrollNo);wagDoOffersOverlay.removeClass("slide in").addClass("leftPos");},100);setTimeout(function(){wagDoOffersOverlay.css("display","none");wagDoOffersOverlay.css("overflow-y","hidden");wagDoOffersOverlay.trigger("hidden.bs.modal");wagDoOffersOverlay.unbind("hidden.bs.modal");},500);window.location.reload();}