"use strict";Clazz.createPackage("com.wag.druginfodrugdetails.js");Clazz.com.wag.druginfodrugdetails.js.DrugInfoDrugDetails=Clazz.extend(Clazz.Widget,{childWidgets:null,initialize:function(){var drugInfoHubSearch,drugInfoDrugDetails,drugInfoPlmCard;this.myContainer="wagDrugInfoBrowseResults";drugInfoHubSearch=new Clazz.com.wag.druginfohubsearch.js.DrugInfoHubSearch();drugInfoHubSearch.templateUrl=pharmacyContext+"/assets/drug-info-hub-search/template/DrugInfoHubSearch.tmpl";drugInfoDrugDetails=new Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetails();drugInfoDrugDetails.templateUrl=pharmacyContext+"/assets/drug-info-hub-drug-details/template/DrugInfoHubDrugDetails.tmpl";drugInfoPlmCard=new Clazz.com.wag.druginfoplmcard.js.DrugInfoPlmCard();drugInfoPlmCard.templateUrl=pharmacyContext+"/assets/drug-info-plm-card/template/DrugInfoPlmCard.tmpl";this.childWidgets=[drugInfoHubSearch,drugInfoDrugDetails,drugInfoPlmCard];Clazz.com.wag.druginfodrugdetails.js.DrugInfoUtils_info.parseQueryParams();this.loadOtherWidgets();this.controller=Clazz.com.wag.druginfodrugdetails.js.DrugInfoDrugDetailsController;this.filter=Clazz.com.wag.druginfodrugdetails.js.DrugInfoDrugDetailsFilter;},injectDependencies:function(){this.controller.drugInfoDrugDetailsController.$inject=["$scope","$rootScope","$window","$location"];},loadOtherWidgets:function(){var drugInfoPriceInformation,drugInfoSearchError;if(Clazz.com.wag.druginfodrugdetails.js.DrugInfoUtils_info.queryString.drugId){drugInfoPriceInformation=new Clazz.com.wag.druginfohubpriceinformation.js.DrugInfoHubPriceInformation();drugInfoPriceInformation.templateUrl=pharmacyContext+"/assets/drug-info-hub-price-information/template/DrugInfoHubPriceInformation.tmpl";this.childWidgets.push(drugInfoPriceInformation);drugInfoSearchError=new Clazz.com.wag.druginfohubsearcherror.js.DrugInfoHubSearchError();drugInfoSearchError.templateUrl=pharmacyContext+"/assets/drug-info-hub-search-error/template/DrugInfoHubSearchError.tmpl";this.childWidgets.push(drugInfoSearchError);}}});Clazz.com.wag.druginfodrugdetails.js.DrugInfoUtils_info={queryString:{},parseQueryParams:function(){var self=this;var pageUrlArray=location.href.split("?");if(pageUrlArray.length>0){$.map(location.search.substr(1).split("&"),function(o){if(!o){return;}o=o.split("=");self.queryString[o[0]]=o[1];});}}};Clazz.com.wag.druginfodrugdetails.js.DrugInfoDrugDetailsController={drugInfoDrugDetailsController:function($scope,$rootScope,$window,$location){var queryString,encoded,value,pageName,encodedTitle,titleValue;var drugInfoDrugDetailsEvent,drugInfoDrugDetailsListener;$scope.init=function(){drugInfoDrugDetailsListener=Clazz.com.wag.druginfodrugdetails.js.DrugInfoDrugDetailsListener;drugInfoDrugDetailsEvent=Clazz.com.wag.druginfodrugdetails.js.DrugInfoDrugDetailsEvent;drugInfoDrugDetailsEvent.initialize($rootScope);drugInfoDrugDetailsListener.initialize($scope);$scope.selectedDrugItem={};$scope.selectedDrug={};$scope.selectedDrug.drugName={};$scope.selectedDrug.drugId={};};$scope.viewpdfdoc=function(){$scope.viewpdfshow=true;drugInfoDrugDetailsEvent.sendViewPdfDoc($scope.viewpdfshow);};$scope.getDrugBarsCharts=function(){};$scope.getPageName=function(){$scope.tempSessionPageData={};$scope.tempSessionPageData=JSON.parse(sessionStorage.getItem("selected_drugtarget"));if($scope.tempSessionPageData&&$scope.tempSessionPageData!==undefined&&$scope.tempSessionPageData!==null){$scope.selectedDrug.drugName=$scope.tempSessionPageData.drugName;$scope.selectedDrug.drugId=$scope.tempSessionPageData.drugId;var tempSessionPageName=$scope.tempSessionPageData.drugTitle;if(tempSessionPageName===""||tempSessionPageName==="undefined"){$scope.pageName=$scope.tempSessionData.drugName;}else{$scope.pageName=tempSessionPageName;}}else{var tempPageName=decodeURIComponent((Clazz.com.wag.druginfodrugdetails.js.DrugInfoUtils_info.queryString.drugTitle).replace(/\+/g," "));if(tempPageName==""||tempPageName=="undefined"){$scope.pageName=decodeURIComponent((Clazz.com.wag.druginfodrugdetails.js.DrugInfoUtils_info.queryString.drugName||sessionStorage.getItem("dpc_druginfo_keyword")||"").replace(/\+/g," "));}else{$scope.pageName=tempPageName;}}};$scope.druginfodrugdetails={};$scope.druginfodrugdetails.drugName=function(dataRecieved){$scope.drugTitle=dataRecieved.drugDetails.drugName;document.title=$scope.drugTitle+" | Drug Information | Pharmacy | Walgreens";if(Clazz.com.wag.druginfodrugdetails.js.DrugInfoAnalytics){Clazz.com.wag.druginfodrugdetails.js.DrugInfoAnalytics.track_DrugTitle($scope.drugTitle+" | Drug Information | Pharmacy | Walgreens");}$scope.pharmacyPageContext=pharmacyPageContext;if(sessionStorage.getItem("selected_drugtarget")){$scope.selectedDrugItem=JSON.parse(sessionStorage.getItem("selected_drugtarget"));}$scope.pageName=dataRecieved.drugDetails.drugTitle;if(Clazz.com.wag.druginfodrugdetails.js.DrugInfoUtils_info.queryString.drugId){$scope.termsDisplay=false;$scope.drugInfoBC=true;drugInfoDrugDetailsEvent.sendDrugTitle($scope.pageName);}};$scope.setDrugTitleToVerify=function(){$scope.pageUrl=window.location.href;$scope.pageName=($scope.pageUrl.substring($scope.pageUrl.lastIndexOf("=")+1,$scope.pageUrl.length));drugInfoDrugDetailsEvent.setDrugTitle($scope.pageName);};angular.element(document).ready(function(){setTimeout(function(){angular.element("#query").removeAttr("aria-expanded");},1000);});}};Clazz.com.wag.druginfodrugdetails.js.DrugInfoDrugDetailsEvent={rootScope:null,initialize:function($rootScope){this.rootScope=$rootScope;},setDrugTitle:function(data){this.rootScope.$broadcast("com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsEvent.SetDrugTitle",data);},sendDrugTitle:function(data){this.rootScope.$broadcast("com.wag.druginfodrugdetails.js.DrugInfoDrugDetailsEvent.SendDrugTitle",data);},sendViewPdfDoc:function(data){this.rootScope.$broadcast("com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsEvent.sendViewPdfDoc",data);}};Clazz.com.wag.druginfodrugdetails.js.DrugInfoDrugDetailsListener={myscope:null,initialize:function($scope){this.myscope=$scope;this.listen();},listen:function(){var self=this;self.myscope.$on("com.wag.druginfodrugdetails.js.sendDrugInformationDetails",function(event,data){if(data){self.myscope.druginfodrugdetails.drugName(data);}});self.myscope.$on("com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsEvent.SetDrugTitle.reSend",function(){});self.myscope.$on("com.wag.druginfoplmcard.js.sendDrugTitleInitializeFlag",function(){self.myscope.getDrugBarsCharts();});}};Clazz.com.wag.druginfodrugdetails.js.DrugInfoDrugDetailsFilter={pagenamefilter:function(){return function(src){var pagename="";if(src.lastIndexOf("##")!==-1){pagename=src.slice(0,src.lastIndexOf("##"));}else{pagename=src;}return pagename;};}};"use strict";window.drugId="";Clazz.createPackage("com.wag.druginfohubdrugdetails.js");Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetails=Clazz.extend(Clazz.Widget,{initialize:function(){this.myContainer="wagDrugInfoHubDrugDetails";this.controller=Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsController;this.factory=Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsFactory;this.service=Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsService;this.directive=Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsDirective;},injectDependencies:function(){this.controller.drugInfoHubDrugDetailsController.$inject=["$scope","$rootScope","$location","$anchorScroll","drugInfoHubDrugDetailsFactory","$sce"];this.factory.drugInfoHubDrugDetailsFactory.$inject=["drugInfoHubDrugDetailsService","drugInfoHubDrugDetailsGetService"];this.service.drugInfoHubDrugDetailsService.$inject=["$wagAPI"];this.service.drugInfoHubDrugDetailsGetService.$inject=["$wagAPI"];}});Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsController={drugInfoHubDrugDetailsController:function($scope,$rootScope,$location,$anchorScroll,drugInfoHubDrugDetailsFactory,$sce){var encoded,value,paramsRequest={},drugInfoHubDrugDetailsEvent,drugInfoHubDrugDetailsListener;$scope.drugTitle="";$scope.init=function(){setTimeout(function(){Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsTracking.track_druginfo_details_onload($scope.omniDrugName);},200);$scope.browseResultsDisplay=false;$scope.selectedDrug={};$scope.selectedDrug.drugName="";$scope.selectedDrug.drugId="";$scope.drugTitle="";$scope.selectedDrugItem={};$scope.tempSessionData={};$scope.selectedDrugItem.drugName="";$scope.selectedDrugItem.drugId="";$scope.senddrugcode={};$scope.senddrugcode.pageName="";$scope.senddrugcode.ndcCodeObj="";$scope.senddrugcode.pageTitle="";$scope.pageNameGreater=false;$scope.commonUsesContent="";$scope.fdaviewContent="";$scope.fdaview=false;$scope.drugResponse={};$scope.omniDrugName;$scope.omniDrugId;$scope.drugChange;$scope.serverYear=new Date().getFullYear();drugInfoHubDrugDetailsFactory.DruginfoServerTime(function(dateresponse){if(dateresponse!==undefined&&dateresponse.serverDateTime!==undefined){var splitdateresponse=dateresponse.serverDateTime.split("/");$scope.serverYear=splitdateresponse[0];}});drugInfoHubDrugDetailsEvent=Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsEvent;drugInfoHubDrugDetailsListener=Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsListener;drugInfoHubDrugDetailsEvent.initialize($rootScope);drugInfoHubDrugDetailsListener.initialize($scope);$scope.decodeQueryParams();var pageScrollValue=JSON.parse(sessionStorage.getItem("pageScrollValue"));if(typeof pageScrollValue==="string"){var timeOutValue=1000;if($(window).width()<=1024){timeOutValue=10000;}setTimeout(function(){if(pageScrollValue&&pageScrollValue==="DownloadPDF"){downloadPDF();sessionStorage.removeItem("pageScrollValue");}else{sessionStorage.removeItem("pageScrollValue");$scope.goScroll(pageScrollValue);}},timeOutValue);}};$scope.getSessionDrugValue=function(){$scope.selectedDrug.drugName=$scope.tempSessionData.drugName;$scope.selectedDrug.drugId=$scope.tempSessionData.drugId;var tempSessionDrugTitle=$scope.tempSessionData.drugTitle;if(tempSessionDrugTitle===""||tempSessionDrugTitle==="undefined"){$scope.drugTitle=$scope.tempSessionData.drugName;}else{$scope.drugTitle=tempSessionDrugTitle;}};$scope.getUrlDrugValue=function(){sessionStorage.removeItem("selected_drugtarget");$scope.selectedDrug.drugName=decodeURIComponent((Clazz.com.wag.druginfodrugdetails.js.DrugInfoUtils_info.queryString.drugName||sessionStorage.getItem("dpc_druginfo_keyword")||"").replace(/\+/g," "));$scope.selectedDrug.drugId=decodeURIComponent(Clazz.com.wag.druginfodrugdetails.js.DrugInfoUtils_info.queryString.drugId);var tempDrugTitle=decodeURIComponent((Clazz.com.wag.druginfodrugdetails.js.DrugInfoUtils_info.queryString.drugTitle).replace(/\+/g," "));if(tempDrugTitle===""||tempDrugTitle==="undefined"){$scope.drugTitle=decodeURIComponent((Clazz.com.wag.druginfodrugdetails.js.DrugInfoUtils_info.queryString.drugName||sessionStorage.getItem("dpc_druginfo_keyword")||"").replace(/\+/g," "));}else{$scope.drugTitle=tempDrugTitle;}};$scope.decodeQueryParams=function(){$scope.selectedDrug.drugId=decodeURIComponent(Clazz.com.wag.druginfodrugdetails.js.DrugInfoUtils_info.queryString.drugId);$scope.getDrugDetails($scope.selectedDrug);};$scope.detailsDropdown=function(selectedDrug){$scope.drugChange=selectedDrug.drugName;var selecticon="Click on drug dosage dropdown | Drug Dosage Form | "+$scope.drugChange+" | Drug Information | Pharmacy | Walgreens";Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsTracking.track_druginfo_details_atcoSelect(selecticon);};$scope.getDrugDetails=function(selectedDrug){$scope.accordionTile="title";if($(window).width()>=768){angular.element(".accordion-toggle").addClass("collapsed");angular.element(".accordion-toggle,.panel-collapse").attr("aria-expanded","false");angular.element(".panel-collapse").removeClass("in");angular.element(".icon-ChevronUp").addClass("icon-ChevronDown").removeClass("icon-ChevronUp");}paramsRequest={drugId:selectedDrug.drugId,drugName:selectedDrug.drugName,drugTitle:$scope.drugTitle};sessionStorage.setItem("selected_drugtarget",JSON.stringify(paramsRequest));$rootScope.displayloading="wag-block";drugInfoHubDrugDetailsFactory.getDrugInfoHubDrugDetails(paramsRequest,function(response){$scope.getdruginfohubdrugdetails=function(){$scope.omniDrugName=response.drugDetails.drugName;$scope.omniDrugId=response.drugDetails.drugId;$scope.drugTitle=response.drugDetails.drugTitle;$scope.selectedDrug.drugName=response.drugDetails.drugName;$scope.selectedDrug.drugId=response.drugDetails.drugId;$scope.headerDrugname=response.drugDetails.drugName;$scope.browseResultsDisplay=true;drugInfoHubDrugDetailsEvent.sendDrugInfoDetails(response);$scope.drugResponse=response;$rootScope.displayloading="wag-hide";$scope.subCategory=function(){response.subCategory.push({drugId:parseInt(selectedDrug.drugId),drugName:selectedDrug.drugName,drugTitle:$scope.drugTitle});};if(response.hasOwnProperty("subCategory")==false){response.subCategory=[];$scope.subCategory();}else{if(response.hasOwnProperty("subCategory")==true){var drugNameArray=[];for(var i=0;i<response.subCategory.length;i++){drugNameArray.push(response.subCategory[i].drugName);}if(drugNameArray.indexOf(selectedDrug.drugName)==-1){$scope.subCategory();}}}$scope.capitalise=function(input){var splitArray=[];splitArray=input.split(" ");var result="";for(var i in splitArray){var myCharCode=splitArray[i].charCodeAt(0);var str=splitArray[i];if(((myCharCode>64)&&(myCharCode<91))||((myCharCode>96)&&(myCharCode<123))){str=str.charAt(0).toUpperCase()+str.substr(1).toLowerCase();if(str.indexOf("Dr.")!=-1&&str.indexOf("Dr.")==0){str=str.substr(str.indexOf("Dr."),3)+str.substr(str.indexOf("Dr.")+3,1).toUpperCase()+str.substr(str.indexOf("Dr.")+4).toLowerCase();}else{if(str.indexOf("And")!==-1){str=splitArray[i];}}}else{if(myCharCode==40){str=str;}else{str=str.charAt(0)+str.charAt(1).toUpperCase()+str.substr(2).toLowerCase();}}result=result+" "+str;}$scope.capitaliseResult=result;};$scope.ingredientName=response.drugDetails.ingredientName;$scope.capitalise($scope.ingredientName);response.drugDetails.ingredientName=$scope.capitaliseResult;$scope.drugManufacturer=response.drugDetails.drugManufacturer;$scope.capitalise($scope.drugManufacturer);response.drugDetails.drugManufacturer=$scope.capitaliseResult;$scope.subCat=[];$scope.subCat=response.subCategory;var spacer="<br /><br />",match=null,regEx=/\.[\t ]+[A-Z]+[\t ]+[A-Z]+/g,obj=response.drugDetails;if((obj.commonUses.search("WARNING:")!==-1)&&(obj.commonUses.search("@ COMMON USES:")!==-1)){$scope.fdaview=true;$scope.fdaviewContent=$sce.trustAsHtml(obj.commonUses.slice(obj.commonUses.indexOf(":",obj.commonUses.indexOf("WARNING"))+1,obj.commonUses.indexOf("@ COMMON USES:")));$scope.commonUsesContent=$sce.trustAsHtml(obj.commonUses.slice(obj.commonUses.indexOf(":",obj.commonUses.indexOf("@"))+1));}else{$scope.commonUsesContent=$sce.trustAsHtml(obj.commonUses);$scope.fdaview=false;}for(var k in obj){var str=obj[k];while((match=regEx.exec(str))!=null){var position=match.index+1;str=[str.slice(0,position),spacer,str.slice(position)].join("");}str=str.toString();obj[k]=$sce.trustAsHtml(str);}$scope.drugDetails=obj;$scope.drugDetailsbroadcast={};$scope.drugDetailsbroadcast.obj=obj;$scope.drugDetailsbroadcast.fdaviewContent=$scope.fdaviewContent;$scope.drugDetailsbroadcast.commonUsesContent=$scope.commonUsesContent;$scope.drugDetailsbroadcast.fdaview=$scope.fdaview;($scope.drugTitle&&$scope.drugTitle.length>=22)?$scope.pageNameGreater=true:$scope.pageNameGreater=false;$scope.genericAvailableDisplay=false;if(response.genericDrugs){$scope.genericAvailableDisplay=true;$scope.genericAvailable=response.genericDrugs;$scope.drugDetailsbroadcast.genericAvailable=$scope.genericAvailable;$scope.drugDetailsbroadcast.genericAvailableDisplay=$scope.genericAvailableDisplay;}$rootScope.$broadcast("com.wag.druginfodrugdetails.js.druginfodrugdetailsPDF",$scope.drugDetailsbroadcast);$scope.setDrugNamePricingInfo=function(){drugInfoHubDrugDetailsEvent.sendDrugNamePricingInfo($scope.omniDrugName);};$scope.setDrugNamePricingInfo();$scope.setDrugInfoResponse=function(dataRecieved){$scope.subCategory=[];$scope.subCategory=dataRecieved.subCategory;$scope.senddrugcode.pageName=$sce.getTrustedHtml(dataRecieved.drugDetails.drugName);$scope.senddrugcode.pageTitle=$sce.getTrustedHtml(dataRecieved.drugDetails.drugTitle);angular.forEach($scope.subCategory,function(value,key){if(value.drugName===$scope.senddrugcode.pageName){$scope.senddrugcode.ndcCodeObj=value.ndcCode;}});if(!$scope.senddrugcode.ndcCodeObj){$scope.senddrugcode.ndcCodeObj=window.location.href.split("nscCode=")[1].split("#")[0];}drugInfoHubDrugDetailsEvent.sendDrugCode($scope.senddrugcode);};$scope.setDrugInfoResponse(response);};if(response.messages){if(response.messages[0].code==="WAG_E_DRUGINFO_1003"){$scope.browseResultsDisplay=false;$scope.sendError(response.messages);}else{if(response.messages[0].code==="WAG_E_DRUGINFO_1005"){$scope.browseResultsDisplay=false;$scope.sendError(response.messages);}}}else{$scope.getdruginfohubdrugdetails();}if(response!==undefined&&!response.messages){Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsTracking.track_druginfo_selectdrug_details($scope.omniDrugName,$scope.omniDrugId);}});};$scope.accordionClick=function(){var selecticon="Click on accordion dropdown | Instruction for Use and Side Effects & Cautions | "+$scope.omniDrugName+" | Drug Information | Pharmacy | Walgreens";Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsTracking.track_druginfo_details_atcoSelect(selecticon);};$scope.viewClick=function(){var selecticon="Click on link 'View' | FDA Warning | "+$scope.omniDrugName+" | Drug Information | Pharmacy | Walgreens";Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsTracking.track_druginfo_details_atcoSelect(selecticon);};$scope.atcoClick=function(data){switch(data){case"InstructionsForUse":var selecticon="Click on link 'Instructions for Use' | Using Instructions | "+$scope.omniDrugName+" | Drug Information | Pharmacy | Walgreens";break;case"SideEffectsCautions":var selecticon="Click on link 'Side Effects &  Cautions' | Side Effects &  Cautions | "+$scope.omniDrugName+" | Drug Information | Pharmacy | Walgreens";break;case"DrugInfoPlmCard":var selecticon="Click on link 'Patient Reviews' | Patient Reviews Section | "+$scope.omniDrugName+" | Drug Information | Pharmacy | Walgreens";break;case"DrugInfoHubPriceInformation":var selecticon="Click on link 'Pricing Information' | Pricing Information Section | "+$scope.omniDrugName+" | Drug Information | Pharmacy | Walgreens";break;case"downloadPDF":var selecticon="Click on link 'Download PDF' | PDF Section | "+$scope.omniDrugName+" | Drug Information | Pharmacy | Walgreens";break;}Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsTracking.track_druginfo_details_atcoSelect(selecticon);};$scope.goScroll=function(data){var offset=$("#"+data).offset();if($(window).width()<768){window.scrollTo(offset.left,offset.top-46);}else{window.scrollTo(offset.left-362,offset.top);}};$scope.showViewPDF=function(data){drugInfoHubDrugDetailsEvent.downloadPDF();};$scope.sendError=function(data){if(data!==undefined&&data!==null){drugInfoHubDrugDetailsEvent.sendDrugInformationError(data);}};$scope.mobileaccordin=function(title,event){var selecticon="Click on accordion dropdown | Instruction for Use and Side Effects & Cautions | "+$scope.omniDrugName+" | Drug Information | Pharmacy | Walgreens";Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsTracking.track_druginfo_details_atcoSelect(selecticon);if($("#title"+title).is(":visible")==true){$scope.accordionTile="title";}else{$scope.accordionTile=title;}event.preventDefault();};$scope.loadRequestprescription=function(){window.location.href=pharmacyPageContext+"/order/enterprescription.jsp";var selecticon="Click on 'Request Rx' button | Request prescription | "+$scope.omniDrugName+" | Drug Information | Pharmacy | Walgreens";Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsTracking.track_druginfo_details_atcoSelect(selecticon);};$scope.loadRefill=function(){window.location.href=pharmacyPageContext+"/refillhub/refillhub.jsp";var selecticon="Click on 'Refill now' button | Refill hub | "+$scope.omniDrugName+" | Drug Information | Pharmacy | Walgreens";Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsTracking.track_druginfo_details_atcoSelect(selecticon);};},drugInfoHubDrugDetailsPDFController:function($scope,$rootScope,$sce){$rootScope.$on("com.wag.druginfodrugdetails.js.druginfodrugdetailsPDF",function(event,data){$scope.drugDetails=data.obj;$scope.genericAvailableDisplay=data.genericAvailableDisplay;$scope.fdaview=data.fdaview;if($scope.genericAvailableDisplay){$scope.genericAvailable=data.genericAvailable;}if($scope.fdaview){$scope.fdaviewContent=data.fdaviewContent;$scope.commonUsesContent=data.commonUsesContent;}else{$scope.commonUsesContent=data.commonUsesContent;}});$rootScope.$on("com.wag.druginfodrugdetails.js.downloadpdf",function(event){downloadPDF();});}};Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsFactory={drugInfoHubDrugDetailsFactory:function(drugInfoHubDrugDetailsService,drugInfoHubDrugDetailsGetService){var factory={};factory.getDrugInfoHubDrugDetails=function(data,callback){var serviceUrl="/svc/druginfo/drugdetails/";drugInfoHubDrugDetailsService(serviceUrl,data,callback);},factory.DruginfoServerTime=function(datas,callback){var serviceUrl=Clazz.com.wag.config.pharmacyConfig.getServerDateTime;drugInfoHubDrugDetailsGetService(serviceUrl,{},callback);};return factory;}};Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsService={drugInfoHubDrugDetailsService:function($wagAPI){return function(path,data,callback){var _timeout,_startTime=new Date().getTime();var _config=(_timeout=svc_timeouts.getDrugInfo||null,_timeout===null)?{}:{timeout:_timeout};$wagAPI.post(path,data,_config).success(function(response){if(callback){callback(response);}}).error(function(data){if(new Date().getTime()-_startTime>=_timeout){window.location.href="/servererror.jsp";}});};},drugInfoHubDrugDetailsGetService:function($wagAPI){return function(path,data,callback){var _timeout=new Date().getTime();var _config=(_timeout=svc_timeouts.getServerDateTime||null,_timeout===null)?{}:{timeout:_timeout};$wagAPI.get(path,data,_config).success(function(data){if(callback){callback(data);}});};}};Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsEvent={rootScope:null,initialize:function($rootScope){this.rootScope=$rootScope;},sendDrugInformationError:function(data){this.rootScope.$broadcast("com.wag.druginfodrugdetails.js.sendDrugInformationError",data);},sendDrugInfoDetails:function(data){this.rootScope.$broadcast("com.wag.druginfodrugdetails.js.sendDrugInformationDetails",data);},sendDrugCode:function(data){this.rootScope.$broadcast("com.wag.druginfoplmcard.js.sendDrugCode",data);},downloadPDF:function(){this.rootScope.$broadcast("com.wag.druginfodrugdetails.js.downloadpdf");},sendDrugNamePricingInfo:function(data){this.rootScope.$broadcast("com.wag.druginfohubpriceinformation.js.SendDrugNamePricingInfo",data);}};Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsListener={myscope:null,initialize:function($scope){this.myscope=$scope;this.listen();},listen:function(){var self=this;self.myscope.$on("com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsEvent.sendViewPdfDoc",function(event,data){if(data===true){self.myscope.showViewPDF();}});self.myscope.$on("com.wag.druginfoplmcard.js.sendDrugCode.reSend",function(event,data){self.myscope.setDrugInfoResponse(self.myscope.drugResponse);});self.myscope.$on("com.wag.druginfohubpriceinformation.js.SendDrugNamePricingInfo.reSend",function(event,data){self.myscope.setDrugNamePricingInfo();});}};Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsDirective={viewShowHide:function(){return{restrict:"A",link:function(scope,element,attrs){element.click(function(){if(element.parent("p.wag-drug-info-fda-view").next().hasClass("hide")){element.children(".icon-ChevronDown").addClass("icon-ChevronUp").removeClass("icon-ChevronDown");element.parent("p.wag-drug-info-fda-view").next(".hide").addClass("show").removeClass("hide");element.find("a").attr("aria-expanded","true");}else{element.parent("p.wag-drug-info-fda-view").next(".show").addClass("hide").removeClass("show");element.children(".icon-ChevronUp").addClass("icon-ChevronDown").removeClass("icon-ChevronUp");element.find("a").attr("aria-expanded","false");}});}};}};Clazz.com.wag.druginfohubdrugdetails.js.DrugInfoHubDrugDetailsTracking={track_druginfo_details_onload:function(drugSelect){var druginfo_details_loggedIn_evar9;var json_get_profileId=window.header.profileInfo;var loggedIn=json_get_profileId.loggedIn;window.druginfo_details_loggedIn_evar9=loggedIn;var druginfo_details_onload_prop31="Load Page "+drugSelect+" | Drug Inforamtion | Pharmacy | Walgreens ";window.druginfo_details_onload_prop31=druginfo_details_onload_prop31;if(typeof _satellite!=="undefined"){_satellite.track("druginfo_details_landing");}},track_druginfo_selectdrug_details:function(drugname,drugID){s.pageName=document.title;window.druginfo_search_drugName_evar87=drugname;window.druginfo_search_drugID_evar85=drugID;if(typeof _satellite!=="undefined"){_satellite.track("drug_info_search_term_name");}},track_druginfo_details_atcoSelect:function(iconselect){var druginfo_details_atco_prop31=iconselect;window.druginfo_details_atco_prop31=druginfo_details_atco_prop31;if(typeof _satellite!=="undefined"){_satellite.track("druginfo_atco_click");}}};(function(){Clazz.createPackage("com.wag.druginfohubpriceinformation.js");Clazz.com.wag.druginfohubpriceinformation.js.DrugInfoHubPriceInformation=Clazz.extend(Clazz.Widget,{initialize:function(){this.myContainer="wagDrugInfoHubPriceInformation";this.controller=Clazz.com.wag.druginfohubpriceinformation.js.DrugInfoHubPriceInformationController;},injectDependencies:function(){this.controller.drugInfoHubPriceInformationController.$inject=["$scope","$rootScope"];}});Clazz.com.wag.druginfohubpriceinformation.js.DrugInfoHubPriceInformationController={drugInfoHubPriceInformationController:function($scope,$rootScope){var drugInfoHubPricingEvent,drugInfoHubPricingListener;drugInfoHubPricingEvent=Clazz.com.wag.druginfohubpriceinformation.js.DrugInfoHubPricingEvent;drugInfoHubPricingListener=Clazz.com.wag.druginfohubpriceinformation.js.DrugInfoHubPricingListener;drugInfoHubPricingEvent.initialize($rootScope);drugInfoHubPricingListener.initialize($scope);$scope.drugDetail;drugInfoHubPricingEvent.reSendDrugNamePricingInfo();function getDevice(){var ua=navigator.userAgent,appV=navigator.appVersion;var device="unknow";if(ua.match(/(iPhone|iPod)/)){device="iphone";}else{if(ua.match(/(iPad)/)){device="ipad";}else{if(ua.match(/(Android)/)||appV.match(/(Android)/)){device="android";}else{if(ua.match(/BlackBerry/)){device="blackberry";}else{device="web";}}}}return device;}$scope.clickToCall=function(phoneNo){if(phoneNo!==null&&phoneNo!==undefined){phoneNo=phoneNo.replace(/[^0-9]/g,"");if(getDevice()=="android"){window.location="tel:"+phoneNo;}else{if(getDevice()=="iphone"){window.open("tel:"+phoneNo,"_self");}}}else{return;}};$("#WalgreensPharmacy").click(function(){Clazz.com.wag.druginfohubpriceinformation.js.DrugInfoHubPricingTracking.track_druginfo_pharmacy($scope.drugDetail);});}};}());Clazz.com.wag.druginfohubpriceinformation.js.DrugInfoHubPricingEvent={rootScope:null,initialize:function($rootScope){this.rootScope=$rootScope;},reSendDrugNamePricingInfo:function(data){this.rootScope.$broadcast("com.wag.druginfohubpriceinformation.js.SendDrugNamePricingInfo.reSend",data);}};Clazz.com.wag.druginfohubpriceinformation.js.DrugInfoHubPricingListener={myscope:null,initialize:function($scope){this.myscope=$scope;this.listen();},listen:function(){var self=this;self.myscope.$on("com.wag.druginfohubpriceinformation.js.SendDrugNamePricingInfo",function(event,data){if(data&&data!==undefined){self.myscope.drugDetail=data;}});}};Clazz.com.wag.druginfohubpriceinformation.js.DrugInfoHubPricingTracking={track_druginfo_pharmacy:function(drugDetail){var druginfo_pricing_pharmacy_click_prop31=" Click on link 'Walgreens Pharmacy' | Pricing without Insurance | "+drugDetail+" | Drug Information | Pharmacy | Walgreens";window.druginfo_pricing_pharmacy_click_prop31=druginfo_pricing_pharmacy_click_prop31;if(typeof _satellite!=="undefined"){_satellite.track("druginfo_pricing_pharmacy");}}};Clazz.createPackage("com.wag.druginfohubsearcherror.js");Clazz.com.wag.druginfohubsearcherror.js.DrugInfoHubSearchError=Clazz.extend(Clazz.Widget,{initialize:function(){this.myContainer="wagDrugInfoHubSearchError";this.controller=Clazz.com.wag.druginfohubsearcherror.js.DrugInfoHubSearchErrorController;},injectDependencies:function(){this.controller.drugInfoHubSearchErrorController.$inject=["$scope","$rootScope"];}});Clazz.com.wag.druginfohubsearcherror.js.DrugInfoHubSearchErrorController={drugInfoHubSearchErrorController:function($scope){var drugInfoHubSearchError;$scope.init=function(){drugInfoHubSearchError=Clazz.com.wag.druginfohubsearcherror.js.DrugInfoHubSearchErrorListener;drugInfoHubSearchError.initialize($scope);$scope.messageShow=false;};$scope.receiveMessageObj=function(data){if(data!==undefined&&data!==null){$scope.messageShow=true;$scope.messageSelect=data;}};}};Clazz.com.wag.druginfohubsearcherror.js.DrugInfoHubSearchErrorListener={myscope:null,initialize:function($scope){this.myscope=$scope;this.listen();},listen:function(){var self=this;self.myscope.$on("com.wag.druginfohubsearchresults.js.sendSearchError",function(event,data){self.myscope.receiveMessageObj(data);});self.myscope.$on("com.wag.druginfodrugdetails.js.sendDrugInformationError",function(event,data){self.myscope.receiveMessageObj(data);});self.myscope.$on("com.wag.druginfohubbrowse.js.sendSearchError",function(event,data){self.myscope.receiveMessageObj(data);});self.myscope.$on("com.wag.druginfoleftnav.js.DrugInfoHubLeftNav.SendSearchError",function(event,data){self.myscope.receiveMessageObj(data);});}};"use strict";window.searchChar="";Clazz.createPackage("com.wag.druginfohubsearch.js");Clazz.com.wag.druginfohubsearch.js.DrugInfoHubSearch=Clazz.extend(Clazz.Widget,{initialize:function(){this.myContainer="wagDrugInfoHubSearch";this.controller=Clazz.com.wag.druginfohubsearch.js.DrugInfoHubSearchController;this.factory=Clazz.com.wag.druginfohubsearch.js.DrugInfoHubSearchFactory;this.service=Clazz.com.wag.druginfohubsearch.js.DrugInfoHubSearchService;},injectDependencies:function(){this.controller.drugInfoHubSearchController.$inject=["$scope","$rootScope","drugInfoHubSearchFactory","$q"];this.factory.drugInfoHubSearchFactory.$inject=["drugInfoHubSearchService"];this.service.drugInfoHubSearchService.$inject=["$wagAPI"];}});Clazz.com.wag.druginfohubsearch.js.DrugInfoUtils_search={queryString:{},parseQueryParams:function(){var self=this;$.map(location.search.substr(1).split("&"),function(o){if(!o){return;}o=o.split("=");self.queryString[o[0]]=o[1];});},trim:function(){if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^[\s\xA0]+|[\s\xA0]+$/g,"");};}}};Clazz.com.wag.druginfohubsearch.js.DrugInfoHubSearchController={drugInfoHubSearchController:function($scope,$rootScope,drugInfoHubSearchFactory,$q){Clazz.com.wag.druginfohubsearch.js.DrugInfoUtils_search.parseQueryParams();Clazz.com.wag.druginfohubsearch.js.DrugInfoUtils_search.trim();var drugLoad,paramsRequest,drugList,encoded,value,drugInfoHubSearchEvent,drugInfoHubSearchListener;drugInfoHubSearchEvent=Clazz.com.wag.druginfohubsearch.js.DrugInfoHubSearchEvent;drugInfoHubSearchEvent.initialize($rootScope);drugInfoHubSearchListener=Clazz.com.wag.druginfohubsearch.js.DrugInfoHubSearchListener;drugInfoHubSearchListener.initialize($rootScope);drugInfoHubSearchEvent.reSendExactDrugName();$scope.pageUrl=window.location.href;$scope.title;$scope.search_button=false;$scope.pageName=$scope.pageUrl.substring($scope.pageUrl.lastIndexOf("/",$scope.pageUrl.lastIndexOf(".jsp"))+1,$scope.pageUrl.lastIndexOf(".jsp"));$scope.recentSearchList=[];$scope.sessionSearchList=[];$scope.recentSearchDrug="";$scope.exactSearchDrugObj={};$scope.exactSearchDrugObj.drug="";$scope.getDrug=function(val){drugLoad=$q.defer();paramsRequest={};paramsRequest={searchName:val};searchChar=val;drugList=[];drugInfoHubSearchFactory.getDrugSearch(paramsRequest,function(response){angular.forEach(response.drugContents,function(item){if(item.drugName.toLowerCase().indexOf(val.toLowerCase())>-1){drugList.push(item.drugName);}});if(response.messages){if(response.messages[0].code==="WAG_E_DRUGINFO_1001"){$("#wag-drug-info-search-field-section").removeClass("wag-bg-tint-blue");$("#wag-drug-info-search-field-section").addClass("has-error");$("#wag_drug_err_msg").removeClass("hide");$scope.search_button=true;}$scope.sendError();}else{$("#wag-drug-info-search-field-section").removeClass("has-error");$("#wag-drug-info-search-field-section").addClass("wag-bg-tint-blue");$("#wag_drug_err_msg").addClass("hide");$scope.search_button=false;}$scope.onDrugInfo(drugList);});return drugLoad.promise;};$scope.removeErrorDisplay=function(){$scope.search_button=false;$("#wag-drug-info-search-field").val("");$("#wag-drug-info-search-field-section").removeClass("has-error");$("#wag-drug-info-search-field-section").addClass("wag-bg-tint-blue");$("#wag_drug_err_msg").addClass("hide");};$scope.drugsearchkeydown=function($event,searchDrugName){var searchvalue=$event.which;var shiftRestrictArray=[49,50,51,52,54,55,56,186,187,188,189,190,191,192,219,220,221,222];var restrictArray=[106,107,109,111,186,187,188,189,190,191,192,219,220,221,222];if(shiftRestrictArray.indexOf(searchvalue)!=-1&&$event.shiftKey){$event.preventDefault();}else{if(restrictArray.indexOf(searchvalue)!=-1){$event.preventDefault();}}if(event.which==13){$scope.drugsearchkeyPress(searchDrugName,$event);}};$(document).on("focusout","#wag-search-box input",function(){$("span.wag-icon-search-type").addClass("text-info");$("span.wag-icon-search-type").removeClass("text-primary");});$scope.druginputfocus=function(){if($("#wag-drug-info-search-field").is(":visible")){var drugKeyword=$("#wag-drug-info-search-field").val();if(drugKeyword==="No search results were returned for your query"){$("#wag-drug-info-search-field").val("");}}else{if($(".wag-oral-chemo-search-field").is(":visible")){var drugChemoKeyword=$(".wag-oral-chemo-search-field").val();if(drugChemoKeyword==="No search results were returned for your query"){$(".wag-oral-chemo-search-field").val("");}}else{if($(".wag-drugdetails-search-field").is(":visible")){var drugKeyword=$(".wag-drugdetails-search-field").val();if(drugKeyword==="No search results were returned for your query"){$(".wag-drugdetails-search-field").val("");}}}}};$(document).on("focusin","#wag-search-box input",function(){$("span.wag-icon-search-type").removeClass("text-info");$("span.wag-icon-search-type").addClass("text-primary");});$(document).on("keypress keyup keydown focus","#query",function(){$("span.wag-icon-search-type").addClass("text-primary").css({cursor:"pointer","pointer-events":"auto"});$("span.wag-icon-search-type").removeClass("text-info");});$scope.drugsearchkeyPress=function(searchDrugName,$event){$scope.searchTerm=searchDrugName;if($scope.searchTerm!=="No search results were returned for your query"){switch($scope.pageName){case"druginfobrowseresults":$scope.title="Click Search button | Local Search | Alphabetical Search Page | Walgreens | Health library";break;case"druginfodrugdetails":$scope.title="Tap on enter key | Local Search | "+$scope.searchTerm+" | Drug Information | Pharmacy | Walgreens";break;case"search_results_drug":$scope.title="Click Search button | Local Search | Drug Search Results | Drug Information | Pharmacy | Walgreens";break;}Clazz.com.wag.druginfohubsearch.js.DrugInfoHubSearchTracking.track_druginfo_select_drug($scope.searchTerm,$scope.title);setTimeout(function(){if(searchDrugName){sessionStorage.removeItem("filteredDrugData");sessionStorage.removeItem("filteredRefimentData");sessionStorage.removeItem("filteredButtonStatus");window.location.href="/pharmacy/marketing/library/finddrug/search/search_results_drug.jsp?keyword="+encodeURIComponent(searchDrugName);}},100);}else{if($event!==undefined){$event.preventDefault();}else{if($scope.searchTerm==="No search results were returned for your query"){if($(".wag-drug-info-search-field").is(":visible")){var drugKeyword=$(".wag-drug-info-search-field").val();if(drugKeyword==="No search results were returned for your query"){$(".wag-drug-info-search-field").val("");}}else{if($(".wag-oral-chemo-search-field").is(":visible")){var drugChemoKeyword=$(".wag-oral-chemo-search-field").val();if(drugChemoKeyword==="No search results were returned for your query"){$(".wag-oral-chemo-search-field").val("");}}else{if($(".wag-drugdetails-search-field").is(":visible")){var drugKeyword=$(".wag-drugdetails-search-field").val();if(drugKeyword==="No search results were returned for your query"){$(".wag-drugdetails-search-field").val("");}}}}}}}};$scope.onDrugInfo=function(drug){drugLoad.resolve(drug);};$("#wag-drug-info-search-field").click(function(){var inputText=$("#wag-drug-info-search-field").val();if(inputText=="No search results were returned for your query"){$("#wag-drug-info-search-field").val("");}});$("#wag-drug-info-search-field").keydown(function(){var inputText=$("#wag-drug-info-search-field").val();if(inputText=="No search results were returned for your query"){$("#wag-drug-info-search-field").val("");}});if(Clazz.com.wag.druginfohubsearch.js.DrugInfoUtils_search.queryString.keyword!==undefined&&Clazz.com.wag.druginfohubsearch.js.DrugInfoUtils_search.queryString.keyword!==null){sessionStorage.setItem("dpc_druginfo_keyword",Clazz.com.wag.druginfohubsearch.js.DrugInfoUtils_search.queryString.keyword);}encoded=Clazz.com.wag.druginfohubsearch.js.DrugInfoUtils_search.queryString.keyword||sessionStorage.getItem("dpc_druginfo_keyword")||"";value=decodeURIComponent(encoded.replace(/\+/g," "));$scope.drugName=value;$scope.sendError=function(data){if(data!==undefined&&data!==null){drugInfoHubSearchEvent.sendSearchError(data);}};angular.element(document).ready(function(){setTimeout(function(){angular.element("#wag-drug-info-search-field, #query").removeAttr("aria-expanded");},1000);});}};Clazz.com.wag.druginfohubsearch.js.DrugInfoHubSearchFactory={drugInfoHubSearchFactory:function(drugInfoHubSearchService){var factory={};factory.getDrugSearch=function(data,callback){var serviceUrl;if(ServiceSwitch){serviceUrl=elasticSearchServiceEndPoint+Clazz.com.wag.config.pharmacyConfig.getDrugSearchElastic;var replaceSearchChar=searchChar;serviceUrl=serviceUrl.replace("{typeAheadReq}",replaceSearchChar);}else{serviceUrl=Clazz.com.wag.config.pharmacyConfig.getDrugSearch;var replaceSearchChar=searchChar;serviceUrl=serviceUrl.replace("{searchchar}",replaceSearchChar);}drugInfoHubSearchService(serviceUrl,data,callback);};return factory;}};Clazz.com.wag.druginfohubsearch.js.DrugInfoHubSearchService={drugInfoHubSearchService:function($wagAPI){return function(path,data,callback){var _timeout,_startTime=new Date().getTime();var _config=(_timeout=svc_timeouts.getDrugSearch||null,_timeout===null)?{}:{timeout:_timeout};$wagAPI.get(path,data,_config).success(function(response){if(callback){return callback(response);}}).error(function(data){if(new Date().getTime()-_startTime>=_timeout){window.location.href="/servererror.jsp";}else{if(callback){callback(data);}}});};}};Clazz.com.wag.druginfohubsearch.js.DrugInfoHubSearchEvent={rootScope:null,initialize:function($rootScope){this.rootScope=$rootScope;},sendSearchError:function(data){this.rootScope.$broadcast("com.wag.druginfohubsearch.js.sendSearchError",data);},reSendExactDrugName:function(data){this.rootScope.$broadcast("com.wag.druginfohubsearchresults.js.SendExactDrugSearchName.resend",data);}};Clazz.com.wag.druginfohubsearch.js.DrugInfoHubSearchListener={myscope:null,myrootscope:null,initialize:function($scope,$rootScope){this.myscope=$scope;this.myrootscope=$rootScope;this.listen();},listen:function(){var self=this;self.myscope.$on("com.wag.druginfohubsearchresults.js.SendExactDrugSearchName",function(event,data){if(data){self.myscope.drug=data;}});}};Clazz.com.wag.druginfohubsearch.js.DrugInfoHubSearchTracking={track_druginfo_select_drug:function(drug,pageTitle){document.title="Drug Search results | Drug Information | Pharmacy | Walgreens";s.pageName=document.title;window.druginfo_search_drug_evar81=drug;var druginfo_search_click_prop31=pageTitle;window.druginfo_search_click_prop31=druginfo_search_click_prop31;if(typeof _satellite!=="undefined"){_satellite.track("drug_info_search_term");}}};Clazz.createPackage("com.wag.druginfoplmcard.js");Clazz.com.wag.druginfoplmcard.js.DrugInfoPlmCard=Clazz.extend(Clazz.Widget,{initialize:function(){this.myContainer="wagDrugInfoPlmCard";this.controller=Clazz.com.wag.druginfoplmcard.js.DrugPlmDefaultController;this.factory=Clazz.com.wag.druginfoplmcard.js.DrugPlmDefaultFactory;this.service=Clazz.com.wag.druginfoplmcard.js.DrugPlmDefaultService;this.filter=Clazz.com.wag.druginfoplmcard.js.DrugPlmDefaultFilter;this.directive=Clazz.com.wag.druginfoplmcard.js.DrugPlmDefaultDirective;},injectDependencies:function(){this.controller.drugplmcontroller.$inject=["$scope","$rootScope","drugplmFactory","$wagUtil","$timeout","$window"];this.factory.drugplmFactory.$inject=["drugplmservice","postPlmService"];this.service.drugplmservice.$inject=["$wagAPI"];this.service.postPlmService.$inject=["$wagAPI"];this.filter.trustAsHtml.$inject=["$sce"];}});Clazz.com.wag.druginfoplmcard.js.DrugPlmDefaultController={drugplmcontroller:function($scope,$rootScope,drugplmFactory,$wagUtil,$timeout,$window){var drugPlmListener,drugPlmEvent;$scope.DrugPlmCard={};$scope.DrugPlmCard.sideEffects={};$scope.DrugPlmCard.sideEffectError="";$scope.DrugPlmCard.sideEffectError=false;$scope.DrugPlmCard.drugs={};$scope.DrugPlmCard.limit=3;$scope.sideEffectLoading="wag-hide";var drugDetailsHeight;$scope.browserWidth=angular.element($window).width();$scope.mobileViewSize=768;$scope.useAndEffective=false;$scope.showReviewChart=false;$scope.DrugPlmCard.rxSideEffects={};$scope.init=function(){angular.element(".wag-plm-no-rx-img").show();$scope.displayloading="wag-block";$scope.plmprofileId="";drugPlmListener=Clazz.com.wag.druginfoplmcard.js.DrugPlmListener;drugPlmListener.initialize($scope);drugPlmEvent=Clazz.com.wag.druginfoplmcard.js.DrugPlmEvent;drugPlmEvent.initialize($rootScope);drugPlmEvent.sendDrugTitleInitializeFlag();drugPlmEvent.resendDrugCode();angular.element(".wag-drug-plm-charts").show();angular.element(".wag-plm-zero-state-img").hide();};$scope.DrugGenerateReport=function(data){$scope.DrugPlmCard.showSideEffects(data);$scope.DrugGenName=data.pageTitle;};$scope.showOverlayAsPageTurn=function(element){var modalPopupFullpage=$(element);modalPopupFullpage.each(function(i){var $clone=$(this).clone().css("display","block").appendTo("body");$scope.overlayHeight=$clone.find(".modal-content").height();var top=Math.round(($clone.height()-$clone.find(".modal-content").height())/2);top=top>0?top:0;$clone.remove();$(this).find(".modal-content").css("margin-top",top);});var width=$(window).width();if(width>=768&&width<=1024){modalPopupFullpage.modal("show");}else{if(width<=767){if($scope.overlayHeight>360){$scope.pageTrunResize=true;modalPopupFullpage.find(".modal-content").css("margin-top","0");$(".popup-backbutton").removeClass("hide").addClass("show");$(".close-popup").hide();modalPopupFullpage.removeClass("fade").addClass("leftPos");modalPopupFullpage.css("min-width",width+"px");modalPopupFullpage.find(".wag-modal-dialog").css("padding","0").css({height:"100%",background:"#fff","min-width":"100%"});modalPopupFullpage.find(".modal-content").addClass("page-trun-modal-content");modalPopupFullpage.find(".page-trun-modal-content").removeClass("modal-content").removeClass("wag-modal-content");modalPopupFullpage.find(".page-trun-modal-content").css("border","none").css("box-shadow","none");modalPopupFullpage.find(".page-trun-modal-content").find(".content-body").css("max-height","100%");modalPopupFullpage.find(".page-trun-modal-content").find(".modal-body").css("max-height","100%");modalPopupFullpage.find(".page-trun-modal-content").css("margin-top","0");window.scrollNo=$(window).scrollTop();setTimeout(function(){modalPopupFullpage.css("display","block");},75);setTimeout(function(){modalPopupFullpage.css("overflow-y","auto");modalPopupFullpage.removeClass("leftPos").addClass("slide in");$("#isstickyBar").removeClass("hide");},200);setTimeout(function(){$("body").addClass("modal-open").addClass("wag-modal-open-page-turn");},1300);$(window).bind("resize",function(){});}else{modalPopupFullpage.find(".wag-overlay-page-turn-header").hide();modalPopupFullpage.modal("show");}}else{modalPopupFullpage.modal("show");}}$(".popup-backbutton, .close-page-turn").on("click",function(){$scope.hidePageTurnOverlay(element);});};var lastFocus;$("#wag-mdr-pn-fnd-mdl").on("show.bs.modal",function(){lastFocus=document.activeElement;});$("#wag-mdr-pn-fnd-mdl").on("hidden.bs.modal",function(){lastFocus.focus();});$scope.hidePageTurnOverlay=function(element){$("#isstickyBar").addClass("hide");$scope.pageTrunResize=false;var wagDoOffersOverlay=$(element);wagDoOffersOverlay.find(".page-trun-modal-content").addClass("modal-content").addClass("wag-modal-content");$("body").removeClass("modal-open").removeClass("wag-modal-open-page-turn");setTimeout(function(){$(window).scrollTop(window.scrollNo);wagDoOffersOverlay.removeClass("slide in").addClass("leftPos");},100);setTimeout(function(){wagDoOffersOverlay.css("display","none");wagDoOffersOverlay.css("overflow-y","hidden");},500);};$scope.DrugPlmCard.setLimit=function(lim){$scope.DrugPlmCard.limit=(lim<=0)?$scope.DrugPlmCard.drugs.length:3;};$scope.wagDashboardLeavingConfirm=function(){if($scope.wagDashboardLeavingUrl!==""){window.open($scope.wagDashboardLeavingUrl,"_blank");}};$scope.DrugPlmCard.showSideEffects=function(drug){$scope.plmDrugName=drug.pageName;$scope.plmNdc=drug.ndcCodeObj;$scope.sideEffectLoading="wag-block";$(".wag-plm-title-text").slideUp("600");$(".wag-plm-section_sub").hide();$(".wag-plm-section1_hr").hide();$(".wag-plm-section1").css("border-bottom","0px solid #e17708").animate({height:"85px"},"800");$(".wag-plm-section3").fadeOut();$(".wag-plm-section2").animate({height:"275px"},"800");$scope.requJSON={ndc_code:$scope.plmNdc};var sideEffectsList=[];var earlierTreatmentList=[];var laterTreatmentList=[];var effectiveList=[];var effectiveListPercent=[];drugplmFactory.getRxSideEffectsFactory($scope.requJSON,function(data){if(data!=undefined){$scope.showReviewChart=true;if(data.messages){if(data.messages[0].code=="WAG_I_PLM_1002"){angular.element(".wag-drug-plm-charts").hide();angular.element(".wag-plm-zero-state-img").show();}if(data.messages[0].code=="WAG_I_PLM_1005"){angular.element(".wag-drug-plm-charts").hide();angular.element(".wag-plm-zero-state-img").show();}if(data.messages[0].code=="WAG_E_SVC_UNAVAILABLE_1500"){angular.element(".wag-drug-plm-charts").hide();angular.element(".wag-plm-zero-state-img").show();}}else{$scope.plmSeeAllDrug=data.druginfo.treatment_id;$scope.sideEffects={};var responseNdcCode=data.druginfo.ndcCodes;$scope.splitdata=responseNdcCode.split(",");if($scope.splitdata.indexOf($scope.requJSON.ndc_code)!==-1){$scope.sideEffects=data.druginfo;angular.element(".wag-drug-plm-charts").show();angular.element(".wag-plm-zero-state-img").hide();}else{angular.element(".wag-drug-plm-charts").hide();angular.element(".wag-plm-zero-state-img").show();}$scope.genericDrugName=$scope.sideEffects.generic_name;$scope.sideEffectReviewTotal=$scope.sideEffects.most_common_side_effect_total_count;$scope.overallSeverityReviewTotal=$scope.sideEffects.total_side_effect_count;$scope.earlierTreatmentReview=$scope.sideEffects.earlier_treatments_total;$scope.laterTreatmentReview=$scope.sideEffects.later_treatments_total;$scope.mostCommonreviewTotal=$scope.sideEffects.most_common_purposes_total;if($scope.sideEffects!==undefined){$scope.DrugPlmCard.sideEffects=$scope.sideEffects;$scope.onIndicatorClick(0);autoAdjustslide();if($scope.sideEffects.mostcommon_side_effects!==undefined){var arra1=[];$scope.sideEffects.mostcommon_side_effects.sort(function(a,b){if(a.num_report<b.num_report){return 1;}sideEffectsList;if(a.num_report>b.num_report){return -1;}return 0;});angular.forEach($scope.sideEffects.mostcommon_side_effects,function(item,index){var newItem=[item.name,Math.round((item.num_report/$scope.sideEffects.most_common_side_effect_total_count)*100)];if(sideEffectsList.length<5){sideEffectsList.push(newItem);}});$("#side-effect-chart-mobile").highcharts({chart:{renderTo:"side-effect-chart-mobile",type:"bar",showAxes:false,backgroundColor:"#f3f4f4",marginRight:40},exporting:{enabled:false},title:{text:""},credits:{enabled:false},xAxis:{type:"category",tickLength:0,lineColor:"transparent",labels:{style:{font:"normal 12px/14px arial,sans-serif",whiteSpace:"nowrap",color:"#35393d"},useHTML:true,x:-10,y:2,formatter:function(){if(this.value.length>10){return(this.value.substring(0,10)+"...");}else{return(this.value);}}}},yAxis:{gridLineWidth:0,title:{text:""},labels:{enabled:false}},tooltip:{formatter:function(){return this.point.name+"<br/> <b>"+this.y+"</b> %";},useHTML:true,enabled:true,style:{whiteSpace:"normal"}},plotOptions:{bar:{dataLabels:{enabled:true,formatter:function(){return this.y+"%";},crop:false,overflow:"none"}},series:{borderWidth:0,pointPadding:0,groupPadding:0,pointWidth:13}},legend:{enabled:false},colors:["#489AD3"],series:[{name:"",data:sideEffectsList}]});$("#side-effect-chart").highcharts({chart:{renderTo:"side-effect-chart",type:"bar",showAxes:false,backgroundColor:"#f3f4f4",marginRight:40},exporting:{enabled:false},title:{text:""},credits:{enabled:false},xAxis:{type:"category",tickLength:0,lineColor:"transparent",labels:{style:{font:"normal 12px/14px arial,sans-serif",whiteSpace:"nowrap",color:"#35393d"},useHTML:true,x:-10,y:2,formatter:function(){if(this.value.length>16){return(this.value.substring(0,16)+"...");}else{return(this.value);}}}},yAxis:{gridLineWidth:0,title:{text:""},labels:{enabled:false}},tooltip:{formatter:function(){return this.point.name+"<br/> <b>"+this.y+"</b> %";},useHTML:true,enabled:true,style:{whiteSpace:"normal"}},plotOptions:{bar:{dataLabels:{enabled:true,formatter:function(){return this.y+"%";},crop:false,overflow:"none"}},series:{borderWidth:0,pointPadding:0,groupPadding:0,pointWidth:13}},legend:{enabled:false},colors:["#489AD3"],series:[{name:"",data:sideEffectsList}]});}else{$scope.DrugPlmCard.sideEffectError=true;$scope.sideEffectLoading="wag-hide";angular.element(".wag-plm-error-lnk").show();}var severityList={};severityList=$scope.sideEffects.side_effects_severity;if($scope.sideEffects.side_effects_severity!==undefined){var reportedSeverity=[];reportedSeverity=[["Severe",severityList.severe],["Moderate",severityList.moderate],["Mild",severityList.mild],["None",severityList.none]];Highcharts.setOptions({colors:["#2A7DB5","#489CD4","#6DB8E2","#D2D5D7"]});$("#reported-severity-chart").highcharts({chart:{spacingTop:0,spacingBottom:0,spacingLeft:0,spacingRight:0,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:false,backgroundColor:"#f3f4f4",marginRight:130},exporting:{enabled:false},legend:{x:30,width:150,padding:0,verticalAlign:"middle",symbolRadius:5,symbolHeight:10,symbolWidth:10,itemMarginBottom:6,itemDistance:5,itemStyle:{font:"normal 12px/20px arial,sans-serif",color:"#35393d"},labelFormatter:function(){return this.name+'<span style=" color:#6a737b;">  '+this.y+"% </span>";},align:"right",layout:"vertical"},credits:{enabled:false},title:{text:""},tooltip:{pointFormat:"<b>{point.percentage:.0f}%</b>"},plotOptions:{pie:{size:100,allowPointSelect:true,cursor:"pointer",dataLabels:{enabled:false},showInLegend:true},series:{states:{hover:{enabled:false}}}},series:[{type:"pie",data:reportedSeverity}]});$("#reported-severity-chart-mobile").highcharts({chart:{spacingTop:0,spacingBottom:0,spacingLeft:0,spacingRight:0,plotBackgroundColor:null,plotBorderWidth:null,plotShadow:false,backgroundColor:"#f3f4f4",marginRight:130},exporting:{enabled:false},legend:{x:30,width:150,padding:0,verticalAlign:"middle",symbolRadius:5,symbolHeight:10,symbolWidth:10,itemMarginBottom:6,itemDistance:5,itemStyle:{font:"normal 12px/20px arial,sans-serif",color:"#35393d"},labelFormatter:function(){return this.name+'<span style=" color:#6a737b;">  '+this.y+"% </span>";},align:"right",layout:"vertical"},credits:{enabled:false},title:{text:""},tooltip:{pointFormat:"<b>{point.percentage:.0f}%</b>"},plotOptions:{pie:{size:100,allowPointSelect:true,cursor:"pointer",dataLabels:{enabled:false},showInLegend:true},series:{sliced:false,selected:true,states:{hover:{enabled:false}}}},series:[{type:"pie",data:reportedSeverity}]});$scope.sideEffectLoading="wag-hide";}else{$scope.DrugPlmCard.sideEffectError=true;$scope.sideEffectLoading="wag-hide";angular.element(".wag-plm-error-lnk").show();}}if($scope.sideEffects!==undefined){$scope.DrugPlmCard.sideEffects=$scope.sideEffects;if($scope.sideEffects.earlier_treatments!==undefined&&$scope.sideEffects.earlier_treatments!=null&&$scope.sideEffects.earlier_treatments.length>0){$(".wag-before-drugusage").show();var arra1=[];$scope.sideEffects.earlier_treatments.sort(function(a,b){if(a.num_reports<b.num_reports){return 1;}if(a.num_reports>b.num_reports){return -1;}return 0;});angular.forEach($scope.sideEffects.earlier_treatments,function(item,index){var newItem=[item.generic_name,Math.round((item.num_reports/$scope.sideEffects.earlier_treatments_total)*100)];if(earlierTreatmentList.length<5){earlierTreatmentList.push(newItem);}});$("#side-effect-chart-before").highcharts({chart:{renderTo:"side-effect-chart-before",type:"bar",showAxes:false,backgroundColor:"#f3f4f4",marginRight:40},exporting:{enabled:false},title:{text:""},credits:{enabled:false},xAxis:{type:"category",tickLength:0,lineColor:"transparent",labels:{style:{font:"normal 12px/14px arial,sans-serif",whiteSpace:"nowrap",color:"#35393d"},useHTML:true,y:2,formatter:function(){if(this.value.length>10){return(this.value.substring(0,10)+"...");}else{return(this.value);}}}},yAxis:{gridLineWidth:0,title:{text:""},labels:{enabled:false}},tooltip:{formatter:function(){return this.point.name+"<br/> <b>"+this.y+"</b> %";},useHTML:true,enabled:true,style:{whiteSpace:"normal"}},plotOptions:{bar:{dataLabels:{enabled:true,formatter:function(){return this.y+"%";},crop:false,overflow:"none"}},series:{borderWidth:0,pointPadding:0,groupPadding:0,pointWidth:13}},legend:{enabled:false},colors:["#489AD3"],series:[{name:"",data:earlierTreatmentList}]});$("#side-effect-chart-before-mobile").highcharts({chart:{renderTo:"side-effect-chart-before-mobile",type:"bar",showAxes:false,backgroundColor:"#f3f4f4",marginRight:40},exporting:{enabled:false},title:{text:""},credits:{enabled:false},xAxis:{type:"category",tickLength:0,lineColor:"transparent",labels:{style:{font:"normal 12px/14px arial,sans-serif",whiteSpace:"nowrap",color:"#35393d"},useHTML:true,y:2,formatter:function(){if(this.value.length>10){return(this.value.substring(0,10)+"...");}else{return(this.value);}}}},yAxis:{gridLineWidth:0,title:{text:""},labels:{enabled:false}},tooltip:{formatter:function(){return this.point.name+"<br/> <b>"+this.y+"</b> %";},useHTML:true,enabled:true,style:{whiteSpace:"normal"}},plotOptions:{bar:{dataLabels:{enabled:true,formatter:function(){return this.y+"%";},crop:false,overflow:"none"}},series:{borderWidth:0,pointPadding:0,groupPadding:0,pointWidth:13}},legend:{enabled:false},colors:["#489AD3"],series:[{name:"",data:earlierTreatmentList}]});}else{$scope.DrugPlmCard.sideEffectError=true;$scope.sideEffectLoading="wag-hide";$(".wag-before-drugusage").hide();$(".wag-after-drugusage").css("padding-left","0px");angular.element(".wag-plm-error-lnk").show();}if($scope.sideEffects!==undefined){$scope.DrugPlmCard.sideEffects=$scope.sideEffects;$scope.onIndicatorClick(0);autoAdjustslide();if($scope.sideEffects.later_treatments!==undefined&&$scope.sideEffects.later_treatments!==null&&$scope.sideEffects.later_treatments.length>0){$(".wag-after-drugusage").show();var arra1=[];$scope.sideEffects.later_treatments.sort(function(a,b){if(a.num_reports<b.num_reports){return 1;}if(a.num_reports>b.num_reports){return -1;}return 0;});angular.forEach($scope.sideEffects.later_treatments,function(item,index){var newItem=[item.generic_name,Math.round((item.num_reports/$scope.sideEffects.later_treatments_total)*100)];if(laterTreatmentList.length<5){laterTreatmentList.push(newItem);}});$("#side-effect-chart-after").highcharts({chart:{renderTo:"side-effect-chart-after",type:"bar",showAxes:false,backgroundColor:"#f3f4f4",marginRight:40},exporting:{enabled:false},title:{text:""},credits:{enabled:false},xAxis:{type:"category",tickLength:0,lineColor:"transparent",labels:{style:{font:"normal 12px/14px arial,sans-serif",whiteSpace:"nowrap",color:"#35393d"},useHTML:true,paddingRight:"20px",y:2,formatter:function(){if(this.value.length>10){return(this.value.substring(0,10)+"...");}else{return(this.value);}}}},yAxis:{gridLineWidth:0,title:{text:""},labels:{enabled:false}},tooltip:{formatter:function(){return this.point.name+"<br/> <b>"+this.y+"</b> %";},useHTML:true,enabled:true,style:{whiteSpace:"normal"}},plotOptions:{bar:{dataLabels:{enabled:true,formatter:function(){return this.y+"%";},crop:false,overflow:"none"}},series:{borderWidth:0,pointPadding:0,groupPadding:0,pointWidth:13}},legend:{enabled:false},colors:["#489AD3"],series:[{name:"",data:laterTreatmentList}]});$("#side-effect-chart-after-mobile").highcharts({chart:{renderTo:"side-effect-chart-after-mobile",type:"bar",showAxes:false,backgroundColor:"#f3f4f4",marginRight:40},exporting:{enabled:false},title:{text:""},credits:{enabled:false},xAxis:{type:"category",tickLength:0,lineColor:"transparent",labels:{style:{font:"normal 12px/14px arial,sans-serif",whiteSpace:"nowrap",color:"#35393d"},useHTML:true,y:2,formatter:function(){if(this.value.length>10){return(this.value.substring(0,10)+"...");}else{return(this.value);}}}},yAxis:{gridLineWidth:0,title:{text:""},labels:{enabled:false}},tooltip:{formatter:function(){return this.point.name+"<br/> <b>"+this.y+"</b> %";},useHTML:true,enabled:true,style:{whiteSpace:"normal"}},plotOptions:{bar:{dataLabels:{enabled:true,formatter:function(){return this.y+"%";},crop:false,overflow:"none"}},series:{borderWidth:0,pointPadding:0,groupPadding:0,pointWidth:13}},legend:{enabled:false},colors:["#489AD3"],series:[{name:"",data:laterTreatmentList}]});}else{$scope.DrugPlmCard.sideEffectError=true;$scope.sideEffectLoading="wag-hide";$(".wag-after-drugusage").hide();angular.element(".wag-plm-error-lnk").show();}if($scope.sideEffects!==undefined){if(($scope.sideEffects.earlier_treatments===undefined||$scope.sideEffects.earlier_treatments.length===0)&&($scope.sideEffects.later_treatments===undefined||$scope.sideEffects.later_treatments.length===0)){$(".wag-drug-treatments").hide();$(".wag-treatment-plm-card-prev").addClass("hide");$(".wag-drugplm-treatments").hide();}if($scope.sideEffects.earlier_treatments===undefined||$scope.sideEffects.later_treatments===undefined||$scope.sideEffects.earlier_treatments.length===0||$scope.sideEffects.later_treatments.length===0){$(".wag-drug-treatments").hide();$(".wag-treatment-plm-card-prev").addClass("hide");}else{$(".wag-drug-treatments").show();$(".wag-drugplm-treatments").show();$(".wag-treatment-plm-card-prev").addClass("show");}}if($scope.sideEffects!==undefined){$scope.DrugPlmCard.sideEffects=$scope.sideEffects;$scope.onIndicatorClick(0);autoAdjustslide();$scope.mostPurposesList=$scope.sideEffects.most_common_purposes;if($scope.sideEffects.most_common_purposes!==undefined){var arra1=[];$scope.useAndEffective=true;$scope.sideEffects.most_common_purposes.sort(function(a,b){if(a.percent_patients_reporting<b.percent_patients_reporting){return 1;}if(a.percent_patients_reporting>b.percent_patients_reporting){return -1;}return 0;});$scope.majorPoints=[];$scope.moderatePoints=[];$scope.slightPoints=[];$scope.nonePoints=[];$scope.unknownPoints=[];$scope.numevaluation=[];angular.forEach($scope.sideEffects.most_common_purposes,function(item){if(item.perceived_effectiveness_percents.Major===0&&item.perceived_effectiveness_percents.Moderate===0&&item.perceived_effectiveness_percents.Slight===0&&item.perceived_effectiveness_percents.None===0&&item.perceived_effectiveness_percents.Unknown===0){item.perceived_effectiveness_percents.Unknown=1;}$scope.majorPoints.push(item.perceived_effectiveness_percents.Major);$scope.moderatePoints.push(item.perceived_effectiveness_percents.Moderate);$scope.slightPoints.push(item.perceived_effectiveness_percents.Slight);$scope.nonePoints.push(item.perceived_effectiveness_percents.None);$scope.unknownPoints.push(item.perceived_effectiveness_percents.Unknown);$scope.numevaluation.push(item.num_evaluations);});setTimeout(function(){drugDetailsHeight=$(".wag-drugDetails-height").height();$("#wag-use-effect-chart").highcharts({chart:{type:"bar",showAxes:false,backgroundColor:"#f3f4f4",height:drugDetailsHeight},exporting:{enabled:false},title:{text:""},credits:{enabled:false},xAxis:{type:"category",tickLength:0,lineColor:"transparent",labels:{style:{font:"normal 12px/14px arial,sans-serif",whiteSpace:"nowrap",color:"#35393d"},y:2,formatter:function(){if(this.value.length>16){return(this.value.substring(0,16)+"...");}else{return(this.value);}},enabled:false}},yAxis:{gridLineWidth:0,title:{text:""},labels:{enabled:false},stackLabels:{qTotals:$scope.numevaluation,enabled:true,formatter:function(){return this.options.qTotals[this.x];}}},tooltip:{formatter:function(){if(this.y===1){return this.series.name+"<br/> <b> 0% </b>";}else{return this.series.name+"<br/> <b>"+this.y+"</b> %";}},useHTML:true,enabled:true,style:{whiteSpace:"normal"}},plotOptions:{pointPadding:0,column:{cursor:"pointer"},series:{stacking:"normal",pointWidth:15,pointPadding:0,groupPadding:0},dataLabels:{enabled:true}},legend:{x:-17,symbolHeight:12,symbolWidth:12,symbolRadius:6},series:[{name:"Very",data:$scope.majorPoints,color:"#0A6DAE",index:4,legendIndex:0},{name:"Moderately",data:$scope.moderatePoints,color:"#479AD0",index:3,legendIndex:1},{name:"Slightly",data:$scope.slightPoints,color:"#71BDF1",index:2,legendIndex:2},{name:"Ineffective",data:$scope.nonePoints,color:"#9ED4F8",index:1,legendIndex:3},{name:"Can't tell",data:$scope.unknownPoints,color:"#B9B9B9",index:0,legendIndex:4}]});},100);var loop=1;angular.forEach($scope.sideEffects.most_common_purposes,function(item){var majorPointsMob=item.perceived_effectiveness_percents.Major;var moderatePointsMob=item.perceived_effectiveness_percents.Moderate;var slightPointsMob=item.perceived_effectiveness_percents.Slight;var nonePointsMob=item.perceived_effectiveness_percents.None;var unknownPointsMob=item.perceived_effectiveness_percents.Unknown;(function(loop,majorPointsMob,moderatePointsMob,slightPointsMob,nonePointsMob,unknownPointsMob){$timeout(function(){$("#wag-use-effect-chart-mobile"+loop).highcharts({chart:{type:"bar",showAxes:false,backgroundColor:"#f3f4f4",height:null},exporting:{enabled:false},title:{text:""},credits:{enabled:false},xAxis:{type:"category",tickLength:0,lineColor:"transparent",labels:{style:{font:"normal 12px/14px arial,sans-serif",whiteSpace:"nowrap",color:"#35393d"},y:2,enabled:false}},yAxis:{gridLineWidth:0,title:{text:""},labels:{enabled:false}},tooltip:{formatter:function(){if(this.y===1){return this.series.name+"<br/> <b> 0% </b>";}else{return this.series.name+"<br/> <b>"+this.y+"</b> %";}},useHTML:true,enabled:true,style:{whiteSpace:"normal"}},plotOptions:{pointPadding:0,column:{cursor:"pointer"},series:{stacking:"normal",pointWidth:15,groupPadding:0},dataLabels:{enabled:true}},legend:{symbolHeight:12,symbolWidth:12,symbolRadius:6},series:[{name:"Very",data:[majorPointsMob],color:"#0A6DAE",index:4,legendIndex:0},{name:"Moderately",data:[moderatePointsMob],color:"#479AD0",index:3,legendIndex:1},{name:"Slightly",data:[slightPointsMob],color:"#71BDF1",index:2,legendIndex:2},{name:"Ineffective",data:[nonePointsMob],color:"#9ED4F8",index:1,legendIndex:3},{name:"Can't tell",data:[unknownPointsMob],color:"#B9B9B9",index:0,legendIndex:4}]});},loop*1000);})(loop,majorPointsMob,moderatePointsMob,slightPointsMob,nonePointsMob,unknownPointsMob);loop++;});}else{$scope.useAndEffective=false;$scope.DrugPlmCard.sideEffectError=true;$scope.sideEffectLoading="wag-hide";angular.element(".wag-plm-error-lnk").show();}if(data.message=="No Results Found"){$scope.sideEffectLoading="wag-hide";$scope.DrugPlmCard.sideEffectError=true;angular.element(".wag-plm-error-lnk").show();}}}}}}});};var tileWidth;var selectedIndex=0;var noOfSlides=0;var activecardNo=0;var cardno;var noofrecs=0;var tileWidthTreatments;var selectedIndexTreatments=0;var noOfSlidesTreatments=0;var activecardNoTreatments=0;var noofrecsTreatments=0;var tileWidthEffects;var selectedIndexEffects=0;var noOfSlidesEffects=0;var activecardNoEffects=0;var noofrecsEffects=0;$(window).resize(function(){setTimeout(function(){autoAdjustslide();autoAdjustslideTreatments();autoAdjustslideEffects();if(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){var temp=$("#wag-use-effect-chart").highcharts();temp.setSize($("#wag-use-effect-chart").width(),$("#wag-use-effect-chart").height());}},10);});function autoAdjustslide(){var item=$("#wag-plm-card-center-space");var width=$(window).width()-parseInt(20);$("#wag-plm-drugCardContent>li").css("width",width);var tile=$("#wag-plm-drugCardContent>li:first");try{tileWidth=tile.width()+Number(tile.css("margin-right").replace("px",""));$("#wag-plm-drugCardContent").css("left","-"+(selectedIndex*tileWidth)+"px");}catch(e){}}function autoAdjustslideTreatments(){var item=$("#wag-plm-card-center-space");var width=$(window).width()-parseInt(20);$("#wag-plm-drugCardContentTreatment>li").css("width",width);var tile=$("#wag-plm-drugCardContentTreatment>li:first");try{tileWidthTreatments=tile.width()+Number(tile.css("margin-right").replace("px",""));$("#wag-plm-drugCardContentTreatment").css("left","-"+(selectedIndexTreatments*tileWidthTreatments)+"px");}catch(e){}}function autoAdjustslideEffects(){var item=$("#wag-plm-card-center-space");var width=$(window).width()-parseInt(20);$("#wag-plm-drugCardContentEffects>li").css("width",width);var tile=$("#wag-plm-drugCardContentEffects>li:first");try{tileWidthEffects=tile.width()+Number(tile.css("margin-right").replace("px",""));$("#wag-plm-drugCardContentEffects").css("left","-"+(selectedIndexEffects*tileWidthEffects)+"px");}catch(e){}}setTimeout(function(){tileWidth=$("#wag-plm-drugCardContent>li:first").width()+Number($("#wag-plm-drugCardContent>li:first").css("margin-right").replace("px",""));noOfSlides=$(".wag-plm-card-slider-indicator>a").length;$("#wag-plm-drugCardContent>li").on("swipeleft",leftAnim);$("#wag-plm-drugCardContent>li").on("swiperight",rightAnim);$(".wag-side-plm-card-prev").hide();noOfSlides=$(".wag-plm-card-slider-indicator>a").length;autoAdjustslide();},10);setTimeout(function(){tileWidthTreatments=$("#wag-plm-drugCardContentTreatment>li:first").width()+Number($("#wag-plm-drugCardContentTreatment>li:first").css("margin-right").replace("px",""));noOfSlidesTreatments=$(".wag-plm-card-slider-indicator-treatment>a").length;$("#wag-plm-drugCardContentTreatment>li").on("swipeleft",leftAnimTreatments);$("#wag-plm-drugCardContentTreatment>li").on("swiperight",rightAnimTreatments);$(".wag-treatment-plm-card-prev").hide();noOfSlidesTreatments=$(".wag-plm-card-slider-indicator-treatment>a").length;autoAdjustslideTreatments();},10);setTimeout(function(){tileWidthEffects=$("#wag-plm-drugCardContentEffects>li:first").width()+Number($("#wag-plm-drugCardContentEffects>li:first").css("margin-right").replace("px",""));noOfSlidesEffects=$scope.mostPurposesList.length;$("#wag-plm-drugCardContentEffects>li").on("swipeleft",leftAnimEffects);$("#wag-plm-drugCardContentEffects>li").on("swiperight",rightAnimEffects);$(".wag-effect-plm-card-prev").hide();noOfSlidesEffects=$scope.mostPurposesList.length;autoAdjustslideEffects();},10);function leftAnim(e){if(!$scope.disableClick){if(selectedIndex!==noOfSlides-1){$("#wag-plm-drugCardContent").animate({left:"-="+tileWidth},"slow",setCurrentIndex);$scope.disableClick=true;}}}function leftAnimTreatments(e){if(!$scope.disableClick){if(selectedIndexTreatments!==noOfSlidesTreatments-1){$("#wag-plm-drugCardContentTreatment").animate({left:"-="+tileWidthTreatments},"slow",setCurrentIndexTreatments);$scope.disableClick=true;}}}function leftAnimEffects(e){if(!$scope.disableClick){if(selectedIndexEffects!==noOfSlidesEffects-1){$("#wag-plm-drugCardContentEffects").animate({left:"-="+tileWidthEffects},"slow",setCurrentIndexEffects);$scope.disableClick=true;}}}function rightAnim(e){if(!$scope.disableClick){if(selectedIndex!==0){$("#wag-plm-drugCardContent").animate({left:"+="+tileWidth},"slow",setCurrentIndex);$scope.disableClick=true;}}}function rightAnimTreatments(e){if(!$scope.disableClick){if(selectedIndexTreatments!==0){$("#wag-plm-drugCardContentTreatment").animate({left:"+="+tileWidthTreatments},"slow",setCurrentIndexTreatments);$scope.disableClick=true;}}}function rightAnimEffects(e){if(!$scope.disableClick){if(selectedIndexEffects!==0){$("#wag-plm-drugCardContentEffects").animate({left:"+="+tileWidthEffects},"slow",setCurrentIndexEffects);$scope.disableClick=true;}}}function setCurrentIndex(){var leftPos=Math.abs($("#wag-plm-drugCardContent").css("left").replace("px",""));selectedIndex=leftPos/tileWidth;hightlightIndicator(selectedIndex);}function setCurrentIndexTreatments(){var leftPosOne=Math.abs($("#wag-plm-drugCardContentTreatment").css("left").replace("px",""));selectedIndexTreatments=leftPosOne/tileWidthTreatments;hightlightIndicatorTreatments(selectedIndexTreatments);}function setCurrentIndexEffects(){var leftPosTwo=Math.abs($("#wag-plm-drugCardContentEffects").css("left").replace("px",""));selectedIndexEffects=leftPosTwo/tileWidthEffects;hightlightIndicatorEffects(selectedIndexEffects);}function hightlightIndicator(index){$(".wag-plm-card-slider-indicator>a").removeClass("active");$(".wag-plm-card-slider-indicator>a:nth-child("+(index+1)+")").addClass("active");$(".wag-side-plm-card-prev, .wag-side-plm-card-next").show();if(index===0){$(".wag-side-plm-card-prev").hide();}else{if(index===3-1&&noOfSlides<=3){$(".wag-side-plm-card-next").hide();}}$scope.disableClick=false;}function hightlightIndicatorTreatments(index){$(".wag-plm-card-slider-indicator-treatment>a").removeClass("active");$(".wag-plm-card-slider-indicator-treatment>a:nth-child("+(index+1)+")").addClass("active");$(".wag-treatment-plm-card-prev, .wag-treatment-plm-card-next").show();if(index===0){$(".wag-treatment-plm-card-prev").hide();}else{if(index===3-1&&noOfSlidesTreatments<=3){$(".wag-treatment-plm-card-next").hide();}}$scope.disableClick=false;}function hightlightIndicatorEffects(index){$(".wag-plm-card-slider-indicator-effect>a").removeClass("active");$(".wag-plm-card-slider-indicator-effect>a:nth-child("+(index+1)+")").addClass("active");$(".wag-effect-plm-card-prev, .wag-effect-plm-card-next").show();if(index===0){$(".wag-effect-plm-card-prev").hide();}else{if(index===3-1&&noOfSlidesEffects<=3){$(".wag-effect-plm-card-next").hide();}}$scope.disableClick=false;}$scope.leftAnim=function(e){leftAnim(e);};$scope.rightAnim=function(e){rightAnim(e);};$scope.leftAnimTreatments=function(e){leftAnimTreatments(e);};$scope.rightAnimTreatments=function(e){rightAnimTreatments(e);};$scope.leftAnimEffects=function(e){leftAnimEffects(e);};$scope.rightAnimEffects=function(e){rightAnimEffects(e);};$scope.onIndicatorClick=function(index){var targetIndex=index;hightlightIndicator(targetIndex);if(selectedIndex<targetIndex&&targetIndex!=0){$("#wag-plm-drugCardContent").animate({left:"-"+(targetIndex*tileWidth)},"slow");}else{if(selectedIndex>targetIndex&&targetIndex!=0){$("#wag-plm-drugCardContent").animate({left:"-"+(targetIndex*tileWidth)},"slow");}else{if(targetIndex===0){$("#wag-plm-drugCardContent").animate({left:"0px"},"slow");}}}selectedIndex=targetIndex;};$scope.onIndicatorClickTreatments=function(index){var targetIndex=index;hightlightIndicatorTreatments(targetIndex);if(selectedIndexTreatments<targetIndex&&targetIndex!=0){$("#wag-plm-drugCardContentTreatment").animate({left:"-"+(targetIndex*tileWidthTreatments)},"slow");}else{if(selectedIndexTreatments>targetIndex&&targetIndex!=0){$("#wag-plm-drugCardContentTreatment").animate({left:"-"+(targetIndex*tileWidthTreatments)},"slow");}else{if(targetIndex===0){$("#wag-plm-drugCardContentTreatment").animate({left:"0px"},"slow");}}}selectedIndexTreatments=targetIndex;};$scope.onIndicatorClickEffect=function(index){var targetIndex=index;hightlightIndicatorEffects(targetIndex);if(selectedIndexEffects<targetIndex&&targetIndex!=0){$("#wag-plm-drugCardContentEffects").animate({left:"-"+(targetIndex*tileWidthEffects)},"slow");}else{if(selectedIndexEffects>targetIndex&&targetIndex!=0){$("#wag-plm-drugCardContentEffects").animate({left:"-"+(targetIndex*tileWidthEffects)},"slow");}else{if(targetIndex===0){$("#wag-plm-drugCardContentEffects").animate({left:"0px"},"slow");}}}selectedIndexEffects=targetIndex;};$("#slideshow").on("swiperight",function(){$("#slideshow").carousel("prev");if(noofrecs>1){cardno=angular.element(".item.active").data("cardno");if(typeof cardno==="undefined"){activecardNo=2;}else{if(cardno===0){if(noofrecs>3){activecardNo=3;}else{activecardNo=noofrecs-1;}}else{activecardNo=cardno-1;}}for(var i=0;i<=noofrecs;i++){if(i===activecardNo){if(activecardNo===3){angular.element("#seeAllRecsIndicator").addClass("active");for(var j=0;j<=noofrecs;j++){angular.element("#plmcardIndicator"+i).removeClass("active");}}else{angular.element("#plmcardIndicator"+i).addClass("active");angular.element("#seeAllRecsIndicator").removeClass("active");}}else{angular.element("#plmcardIndicator"+i).removeClass("active");}}}});$("#slideshowOne").on("swiperight",function(){$("#slideshowOne").carousel("prev");if(noofrecsTreatments>1){cardno=angular.element(".item.active").data("cardno");if(typeof cardno==="undefined"){activecardNoTreatments=2;}else{if(cardno===0){if(noofrecsTreatments>3){activecardNoTreatments=3;}else{activecardNoTreatments=noofrecsTreatments-1;}}else{activecardNoTreatments=cardno-1;}}for(var i=0;i<=noofrecsTreatments;i++){if(i===activecardNoTreatments){if(activecardNoTreatments===3){angular.element("#seeAllRecsIndicator").addClass("active");for(var j=0;j<=noofrecsTreatments;j++){angular.element("#plmcardIndicator"+i).removeClass("active");}}else{angular.element("#plmcardIndicator"+i).addClass("active");angular.element("#seeAllRecsIndicator").removeClass("active");}}else{angular.element("#plmcardIndicator"+i).removeClass("active");}}}});$("#slideshowTwo").on("swiperight",function(){$("#slideshowTwo").carousel("prev");if(noofrecsEffects>1){cardno=angular.element(".item.active").data("cardno");if(typeof cardno==="undefined"){activecardNoEffects=2;}else{if(cardno===0){if(noofrecsEffects>3){activecardNoEffects=3;}else{activecardNoEffects=noofrecsEffects-1;}}else{activecardNoEffects=cardno-1;}}for(var i=0;i<=noofrecsEffects;i++){if(i===activecardNoEffects){if(activecardNoEffects===3){angular.element("#seeAllRecsIndicator").addClass("active");for(var j=0;j<=noofrecsEffects;j++){angular.element("#plmcardIndicator"+i).removeClass("active");}}else{angular.element("#plmcardIndicator"+i).addClass("active");angular.element("#seeAllRecsIndicator").removeClass("active");}}else{angular.element("#plmcardIndicator"+i).removeClass("active");}}}});$("#slideshow").on("swipeleft",function(){$("#slideshow").carousel("next");if(noofrecs>1){cardno=angular.element(".item.active").data("cardno");if(typeof cardno==="undefined"){activecardNo=0;}else{if(cardno===noofrecs-1){activecardNo=0;}else{activecardNo=cardno+1;}}for(var i=0;i<=noofrecs;i++){if(i===activecardNo){if(activecardNo===3){angular.element("#seeAllRecsIndicator").addClass("active");for(var j=0;j<=noofrecs;j++){angular.element("#plmcardIndicator"+i).removeClass("active");}}else{angular.element("#plmcardIndicator"+i).addClass("active");angular.element("#seeAllRecsIndicator").removeClass("active");}}else{angular.element("#plmcardIndicator"+i).removeClass("active");}}}});$("#slideshowOne").on("swipeleft",function(){$("#slideshowOne").carousel("next");if(noofrecsTreatments>1){cardno=angular.element(".item.active").data("cardno");if(typeof cardno==="undefined"){activecardNoTreatments=0;}else{if(cardno===noofrecsTreatments-1){activecardNoTreatments=0;}else{activecardNoTreatments=cardno+1;}}for(var i=0;i<=noofrecsTreatments;i++){if(i===activecardNoTreatments){if(activecardNoTreatments===3){angular.element("#seeAllRecsIndicator").addClass("active");for(var j=0;j<=noofrecsTreatments;j++){angular.element("#plmcardIndicator"+i).removeClass("active");}}else{angular.element("#plmcardIndicator"+i).addClass("active");angular.element("#seeAllRecsIndicator").removeClass("active");}}else{angular.element("#plmcardIndicator"+i).removeClass("active");}}}});$("#slideshowTwo").on("swipeleft",function(){$("#slideshowTwo").carousel("next");if(noofrecsEffects>1){cardno=angular.element(".item.active").data("cardno");if(typeof cardno==="undefined"){activecardNoEffects=0;}else{if(cardno===noofrecsEffects-1){activecardNoEffects=0;}else{activecardNoEffects=cardno+1;}}for(var i=0;i<=noofrecsEffects;i++){if(i===activecardNoEffects){if(activecardNoEffects===3){angular.element("#seeAllRecsIndicator").addClass("active");for(var j=0;j<=noofrecsEffects;j++){angular.element("#plmcardIndicator"+i).removeClass("active");}}else{angular.element("#plmcardIndicator"+i).addClass("active");angular.element("#seeAllRecsIndicator").removeClass("active");}}else{angular.element("#plmcardIndicator"+i).removeClass("active");}}}});$scope.DrugPlmCard.updateLeavingUrl=function(url){$scope.updateUrl=url+"?utm_source=walgreens&utm_medium=partner&utm_campaign=walgreens_druginfo_drugdetails";};$scope.wagDashboardLeavingConfirm=function(){window.open($scope.updateUrl,"_blank");var proceed="Click on button 'Continue' | Interstitial pop up | "+$scope.plmDrugName+" | Drug Information | Pharmacy | Walgreens";Clazz.com.wag.druginfoplmcard.js.DrugInfoPlmTracking.track_druginfo_plm_overlay(proceed);};$scope.cancel=function(){var cancel="Click on link 'Cancel' | Interstitial pop up | "+$scope.plmDrugName+" | Drug Information | Pharmacy | Walgreens";Clazz.com.wag.druginfoplmcard.js.DrugInfoPlmTracking.track_druginfo_plm_overlay(cancel);};$scope.sideEffectSellAll=function(){var sideEffectSellAll="Click on link 'See all' | 'Side Effects' Chart | "+$scope.plmDrugName+" | Drug Information | Pharmacy | Walgreens";Clazz.com.wag.druginfoplmcard.js.DrugInfoPlmTracking.track_druginfo_plm_overlay(sideEffectSellAll);};$scope.triedBeforeSeeAll=function(){var triedBeforeSeeAll="Click on link 'See all' | 'Tried Before...' Chart | "+$scope.plmDrugName+" | Drug Information | Pharmacy | Walgreens";Clazz.com.wag.druginfoplmcard.js.DrugInfoPlmTracking.track_druginfo_plm_overlay(triedBeforeSeeAll);};$scope.triedAfterSeeAll=function(){var triedAfterSeeAll=" Click on link 'See all' | 'Tried After...' Chart | "+$scope.plmDrugName+" | Drug Information | Pharmacy | Walgreens";Clazz.com.wag.druginfoplmcard.js.DrugInfoPlmTracking.track_druginfo_plm_overlay(triedAfterSeeAll);};$scope.plmDrug=function(){var plmDrug="Click on link "+$scope.genericDrugName+" | patientslikeme section "+$scope.plmDrugName+" | Drug Information | Pharmacy | Walgreens";Clazz.com.wag.druginfoplmcard.js.DrugInfoPlmTracking.track_druginfo_plm_overlay(plmDrug);};}};Clazz.com.wag.druginfoplmcard.js.DrugPlmDefaultFactory={drugplmFactory:function(drugplmservice,postPlmService){var factory={};factory.getRxSideEffectsFactory=function(requJSON,callback){var serviceUrl;if(PlmServiceSwitch){serviceUrl=elasticPharmacyServiceEndPoint+Clazz.com.wag.config.pharmacyConfig.druginfoPlmElastic;}else{serviceUrl=Clazz.com.wag.config.pharmacyConfig.druginfoPlm;}postPlmService(serviceUrl,requJSON,callback);};return factory;}};Clazz.com.wag.druginfoplmcard.js.DrugPlmDefaultService={getPlmService:function($wagAPI){return function(path,callback){$wagAPI.get(path).success(function(value){if(typeof callback==="function"){callback(value);}}).error(function(status){});};},postPlmService:function($wagAPI){return function(path,data,callback){$wagAPI.post(path,data).success(function(value){if(typeof callback==="function"){callback(value);}}).error(function(status){});};},drugplmservice:function($wagAPI){return function(path,param,callback){var _timeout,_startTime=new Date().getTime();var _config=(_timeout=svc_timeouts.getTextAuthenticationOptions||null,_timeout===null)?{}:{timeout:_timeout};$wagAPI.post(path,param,callback).success(function(data){if(callback){callback(data);}}).error(function(data){if(new Date().getTime()-_startTime>=_timeout){window.location.href="/servererror.jsp";}});};}};Clazz.com.wag.druginfoplmcard.js.DrugPlmDefaultDirective={wagPopOverme:function(){return{restrict:"A",scope:{storeData:"="},link:function(scope,el,attrs){el.on("mouseover",function(){updateContent();});function updateContent(){if(scope.browserWidth<scope.mobileViewSize||(scope.browserWidth>scope.mobileViewSize-1&&scope.browserWidth<=1024)){var pop=$(el).popover({trigger:"click",html:true,placement:attrs.popoverPlacement});}else{var pop=$(el).popover({trigger:"hover",html:true,placement:attrs.popoverPlacement});}}updateContent();}};}};Clazz.com.wag.druginfoplmcard.js.DrugPlmDefaultFilter={trustAsHtml:function($sce){return function(input){return $sce.trustAsHtml(input);};}};Clazz.com.wag.druginfoplmcard.js.DrugPlmEvent={scope:null,initialize:function($rootScope){this.rootScope=$rootScope;},sendDrugTitleInitializeFlag:function(data){this.rootScope.$broadcast("com.wag.druginfoplmcard.js.sendDrugTitleInitializeFlag");},resendDrugCode:function(data){this.rootScope.$broadcast("com.wag.druginfoplmcard.js.sendDrugCode.reSend");}};Clazz.com.wag.druginfoplmcard.js.DrugPlmListener={myscope:null,initialize:function($scope){this.myscope=$scope;this.listen($scope);},listen:function(scope){var self=this;self.myscope.$on("com.wag.druginfoplmcard.js.sendDrugCode",function(event,data){if(data){self.myscope.DrugGenerateReport(data);}});}};Clazz.com.wag.druginfoplmcard.js.DrugInfoPlmTracking={track_druginfo_plm_overlay:function(select){var druginfo_plm_overlay_select_prop31=select;window.druginfo_plm_overlay_select_prop31=druginfo_plm_overlay_select_prop31;if(typeof _satellite!=="undefined"){_satellite.track("druginfo_plm_overlay");}}};