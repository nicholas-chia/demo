function dobValidation(year,month,date,ageMin){var result="Valid Date";var subDate=new Date(year,month,date);var calcDay=subDate.getDate();var calcMonth=subDate.getMonth();var calcYear=subDate.getFullYear();if(calcDay!=date||calcMonth!=month||calcYear!=year){result="Invalid Date format";}if(result){var currDate=new Date();var currYear=currDate.getFullYear();var currMonth=currDate.getMonth();var currDay=currDate.getDate();var age=currYear-year;if(month>currMonth){age=age-1;}else{if(month==currMonth&&currDay<date){age=age-1;}}if(ageMin!=undefined){if(age<ageMin){result="Lessthan a age";}}}return result;}$(document).ready(function(){$(".wag-switch, .wag-switch-small").click(function(e){if($(this).hasClass("disabled")){e.preventDefault();}else{$(this).toggleClass("on").toggleClass("off");}});$(".wag-color-swatch").click(function(){$("a.wag-color-swatch").removeClass("active");$(this).addClass("active");});var $frame=$("#sly-carousel-lsg");var $slidee=$frame.children("ul");var $wrap=$frame.parent();if(typeof $frame.sly!=="undefined"){$frame.sly({horizontal:1,itemNav:"basic",smart:1,activateOn:"click",mouseDragging:1,touchDragging:1,releaseSwing:1,startAt:3,scrollBar:$wrap.find(".scrollbar"),scrollBy:1,pagesBar:$wrap.find(".pages"),activatePageOn:"click",speed:300,elasticBounds:1,easing:"easeOutExpo",dragHandle:1,dynamicHandle:1,clickBar:1,forward:$wrap.find(".forward"),backward:$wrap.find(".backward"),prev:$wrap.find(".prev"),next:$wrap.find(".next"),prevPage:$wrap.find(".prevPage"),nextPage:$wrap.find(".nextPage")});$(window).resize(function(e){$("#sly-carousel-lsg").sly("reload");});}$(window).load(function(){if(typeof $.fn.dropdown!=="undefined"){$(".dropdown-menu").dropdown();}});if(typeof $.fn.tooltip!=="undefined"){$(".tooltip-box").tooltip();}if(typeof $.fn.popover!=="undefined"){$(".wag-popover-box").popover();$(".wag-popover-box").popover({trigger:"hover"});$(document).on("click touchstart",function(e){$("[data-toggle=popover]").each(function(){if(!$(this).is(e.target)&&$(this).has(e.target).length===0&&$(".popover").has(e.target).length===0){$(this).popover("hide");}});});}$(document).on("click",".alert-dismissible > .close",function(){$(this).parent().hide();});$(document).on("shown.bs.collapse hidden.bs.collapse",".wag-accordion-toggle",function(e){$(e.target).prev(".panel-heading").find("i.indicator").toggleClass("icon-ChevronDown icon-ChevronUp");});function toggleArrow(e){$(e.target).prev(".wag-toggle-menu-title").find("i.indicator").toggleClass("icon-ArrowDown icon-ArrowUp");}$("#accordion2").on("hidden.bs.collapse",toggleArrow);$("#accordion2").on("shown.bs.collapse",toggleArrow);$(".wag-show-more-less").on("click",function(){var changeText=$(this).attr("name");if($(this).find("a.accordion-toggle").text().indexOf("Show more")>-1||$(this).find("a.accordion-toggle").text().indexOf("Show answer")>-1){if(changeText==="showAnswer"){$(this).find("a.accordion-toggle").text("Hide answer");$(this).find("a.accordion-toggle").attr("aria-expanded","true");}else{$(this).find("a.accordion-toggle").text("Show less");$(this).find("a.accordion-toggle").attr("aria-expanded","true");}$(this).find("i.indicator").addClass("icon-ChevronUp");$(this).parent().find(".panel-collapse").slideDown();}else{if(changeText==="showAnswer"){$(this).find("a.accordion-toggle").text("Show answer");$(this).find("a.accordion-toggle").attr("aria-expanded","false");}else{$(this).find("a.accordion-toggle").text("Show more");$(this).find("a.accordion-toggle").attr("aria-expanded","false");}$(this).find("i.indicator").removeClass("icon-ChevronUp");$(this).parent().find(".panel-collapse").slideUp();}});var overlayHeight="",pageTurn=false;function centerModals(){$(".modal-popup-fullpage").each(function(i){var $clone=$(this).clone().css("display","block").appendTo("body");if(!overlayHeight){overlayHeight=$clone.find(".modal-content").height();}var top=Math.round(($clone.height()-$clone.find(".modal-content").height())/2);top=top>0?top:0;$clone.remove();});}centerModals();$(".modal-popup-fullpage").on("show.bs.modal",centerModals);var width=$(window).width();var modalPopupFullpage=$(".modal-popup-fullpage");if(width>=768&&width<=1024){$(document).on("click",".open-popup-fullpage",function(){modalPopupFullpage.modal("show");});}else{if(width<=767){if(overlayHeight>360){pageTurn=true;$(".popup-backbutton").removeClass("hide").addClass("show");$(".close-popup").hide();modalPopupFullpage.removeClass("fade").addClass("leftPos");modalPopupFullpage.css("min-width","100%");modalPopupFullpage.find(".wag-modal-dialog").css("padding","0px").css({"min-height":"100%",height:"100%",background:"#fff","min-width":"100%","margin-top":"0"});modalPopupFullpage.find(".modal-content").addClass("page-trun-modal-content");modalPopupFullpage.find("#wag-modal-outer").removeClass("wag-modal-outer");modalPopupFullpage.find(".page-trun-modal-content").removeClass("modal-content").removeClass("wag-modal-content");modalPopupFullpage.find(".page-trun-modal-content").css("border","none").css("box-shadow","none");modalPopupFullpage.find(".page-trun-modal-content").find(".content-body").css("max-height","100%");modalPopupFullpage.find(".page-trun-modal-content").find(".modal-body").css("max-height","100%");modalPopupFullpage.find(".page-trun-modal-content").css("margin-top","0px");}}else{$(document).on("click",".open-popup-fullpage",function(){modalPopupFullpage.modal("show");});}}$(document).on("click",".open-popup-fullpage",function(){if(width<=767&&overlayHeight>360){pageTurn=true;window.scrollNo=$(window).scrollTop();setTimeout(function(){modalPopupFullpage.css("display","block");},75);setTimeout(function(){modalPopupFullpage.css("overflow-y","auto");modalPopupFullpage.removeClass("leftPos").addClass("slide in");},100);setTimeout(function(){$("body").addClass("modal-open").addClass("wag-modal-open-page-turn");},1000);}else{$(".wag-overlay-page-turn-header").hide();modalPopupFullpage.modal("show");}});$(".popup-backbutton, .close-page-turn").click(function(){pageTurn=false;$("body").removeClass("modal-open").removeClass("wag-modal-open-page-turn");modalPopupFullpage.find(".page-trun-modal-content").addClass("modal-content").addClass("wag-modal-content");setTimeout(function(){$(window).scrollTop(window.scrollNo);modalPopupFullpage.removeClass("slide in").addClass("leftPos");},100);setTimeout(function(){modalPopupFullpage.css("display","none");modalPopupFullpage.css("overflow-y","hidden");},500);});$(window).bind("resize",function(){if(pageTurn){window.scrollBy(0,20);}});$(".wag-explore-show-hide").on("click",function(){if($(this).find("a.accordion-toggle").text().indexOf("Explore")>-1){$(this).find("a.accordion-toggle").text("Hide").addClass("text-info wag-stroke-grey-top wag-stroke-grey-right wag-stroke-grey-left");$(this).find("a.accordion-toggle").css("color","#8A8A8A");$(this).find("i.indicator").addClass("icon-XCircle text-info").removeClass("icon-PlusCircle");$(this).parent().find(".panel-collapse").slideDown();}else{$(this).find("a.accordion-toggle").text("Explore").addClass("text-info");$(this).find("a.accordion-toggle").text("Explore").removeClass("wag-stroke-grey-top wag-stroke-grey-right wag-stroke-grey-left");$(this).find("a.accordion-toggle").css("color","#01728E");$(this).find("i.indicator").removeClass("icon-XCircle text-info").addClass("icon-PlusCircle");$(this).parent().find(".panel-collapse").slideUp();}});$(".wag-see-hide-content").on("click",function(){if($(this).find("a.accordion-toggle").text().indexOf("See Answer")>-1){$(this).find("a.accordion-toggle").text("Hide Answer");$(this).find("a.accordion-toggle").attr("aria-expanded","true");$(this).find("i.indicator").addClass("icon-ChevronUp");$(this).parent().find(".panel-collapse").slideDown();}else{$(this).find("a.accordion-toggle").text("See Answer");$(this).find("a.accordion-toggle").attr("aria-expanded","false");$(this).find("i.indicator").removeClass("icon-ChevronUp");$(this).parent().find(".panel-collapse").slideUp();}});$(".wag-see-hide-content-plusminus").on("click",function(){if($(this).find("a.accordion-toggle").text().indexOf("See Answer")>-1){$(this).find("a.accordion-toggle").text("Hide Answer");$(this).find("a.accordion-toggle").attr("aria-expanded","true");$(this).find("i.indicator").addClass("icon-MinusPlain");$(this).parent().find(".panel-collapse").slideDown();}else{$(this).find("a.accordion-toggle").text("See Answer");$(this).find("a.accordion-toggle").attr("aria-expanded","false");$(this).find("i.indicator").removeClass("icon-MinusPlain");$(this).parent().find(".panel-collapse").slideUp();}});var checkitem=function(){var $this;$this=$("#slideshow");if($("#slideshow .carousel-inner .item:first").hasClass("active")){$this.children(".left").hide();$this.children(".right").show();}else{if($("#slideshow .carousel-inner .item:last").hasClass("active")){$this.children(".right").hide();$this.children(".left").show();}else{$this.children(".carousel-control").show();}}};checkitem();$("#slideshow").on("slid.bs.carousel","",checkitem);$("#phonenumber-dash").keydown(function(e){var key=e.which;var $this=$(this);if(key==8||key==46){}else{if($this.val().length<10){$this.val($this.val().replace(/(\d{3})\-?/g,"$1-"));}}});if(top.location!=location){top.location.href=document.location.href;}$(function(){if(typeof $.fn.datepicker!=="undefined"){$(document).on("keyup",function(e){var code=(e.keyCode?e.keyCode:e.which);if(code==9){}});$("#datepicker_open").datepicker("show");var checkout=$(".date").datepicker({autoclose:false});$(".modal, .modal-body").scroll(function(){$(".date").datepicker("place");});$("#dateField").keyup(function(e){if(e.keyCode!=8){if($(this).val().length==2||$(this).val().length==5){$(this).val($(this).val()+"/");}}});window.prettyPrint&&prettyPrint();$("#dp1").datepicker({format:"mm-dd-yyyy"});$("#dp2").datepicker();$("#dp3").datepicker();$("#dp3").datepicker();$("#dpYears").datepicker();$("#dpMonths").datepicker();$(".datepicker").datepicker();var startDate=new Date(2012,1,20);var endDate=new Date(2012,1,25);$("#dp4").datepicker().on("changeDate",function(ev){if(ev.date.valueOf()>endDate.valueOf()){$("#alert").show().find("strong").text("The start date can not be greater then the end date");}else{$("#alert").hide();startDate=new Date(ev.date);$("#startDate").text($("#dp4").data("date"));}$("#dp4").datepicker("hide");});$("#dp5").datepicker().on("changeDate",function(ev){if(ev.date.valueOf()<startDate.valueOf()){$("#alert").show().find("strong").text("The end date can not be less then the start date");}else{$("#alert").hide();endDate=new Date(ev.date);$("#endDate").text($("#dp5").data("date"));}$("#dp5").datepicker("hide");});var nowTemp=new Date();var now=new Date(nowTemp.getFullYear(),nowTemp.getMonth(),nowTemp.getDate(),0,0,0,0);var checkin=$("#dpd1").datepicker({onRender:function(date){return date.valueOf()<now.valueOf()?"disabled":"";}}).on("changeDate",function(ev){if(ev.date.valueOf()>checkout.date.valueOf()){var newDate=new Date(ev.date);newDate.setDate(newDate.getDate()+1);checkout.setValue(newDate);}checkin.hide();$("#dpd2")[0].focus();}).data("datepicker");var checkout=$("#dpd2").datepicker({onRender:function(date){return date.valueOf()<=checkin.date.valueOf()?"disabled":"";}}).on("changeDate",function(ev){checkout.hide();}).data("datepicker");}$("#loader_main_Container").find(".wag-loader-image").css({position:"absolute",left:($("#loader_main_Container").width()-$("#loader_main_Container").find(".wag-loader-image").outerWidth())/2,top:($("#loader_main_Container").height()-$("#loader_main_Container").find(".wag-loader-image").outerHeight())/2});});$(".qtyminus").addClass("wag-btn-disabled").attr("disabled",true);$(".qtyplus").click(function(e){fieldName=$(this).attr("field");var currentVal=parseInt($("input[name="+fieldName+"]").val());if(!isNaN(currentVal)){$(".qtyminus").removeClass("wag-btn-disabled").attr("disabled",false);$("input[name="+fieldName+"]").val(currentVal+1);}else{$("input[name="+fieldName+"]").val(1);}});$(".qtyminus").click(function(e){fieldName=$(this).attr("field");var currentVal=parseInt($("input[name="+fieldName+"]").val());if(!isNaN(currentVal)&&currentVal>1){$(".qtyminus").removeClass("wag-btn-disabled").attr("disabled",false);$("input[name="+fieldName+"]").val(currentVal-1);if((currentVal-1)<=1){$(".qtyminus").addClass("wag-btn-disabled").attr("disabled",true);}}});$(".wag-selectparentclass .wag-custom-select").each(function(index,value){$(this).wrap("<span class='wag-select-wrapper'><span class='wag-select-wrapper-open'></span></span>");$(this).after("<span class='wag-select-holder'></span>");var selectedOption=$(value).find(":selected").text();$(this).next(".wag-select-holder").text(selectedOption);});var mouseDown=false;$(".wag-select-option").on("mousedown",function(e){if(!mouseDown){var selectedOption=$(this).find(":selected").text();$(this).next(".wag-select-holder").text(selectedOption);$(this).parent().toggleClass("wag-select-wrapper-close");mouseDown=true;}else{mouseDown=false;e.stopPropagation();}});$(".wag-selectparentclass .wag-custom-select").on("change",function(e){var selectedOption=$(this).find(":selected").text();$(this).next(".wag-select-holder").text(selectedOption);$(this).parent().toggleClass("wag-select-wrapper-close");mouseDown=false;});$(".wag-calender-btn").click(function(){if($(".datepicker-dropdown").css("display","block")){$(".datepicker-dropdown").toggleClass("wag-calendar-icon-toggle");}});if(typeof Slider!="undefined"){if($("#ex4").length>0){var slider=new Slider("#ex4",{reversed:true,tooltip:"always"});$("#ex4").parent().children(".slider-vertical").addClass("slider-inner-panel").wrap('<section class="slider-outer-horizontal"></section>').children().eq(0).css("border","none");}if($("#ex8").length>0){var slider=new Slider("#ex8",{tooltip:"always"});$("#ex8").parent().children(".slider-horizontal").addClass("slider-inner-panel").wrap('<section class="slider-sideway"></section>').children().eq(0).css("border","none");}if($("#ex5").length>0){var slider=new Slider("#ex5",{tooltip_position:"left",reversed:true,tooltip:"always"});$("#ex5").parent().children(".slider-vertical").addClass("slider-inner-panel").wrap('<section class="slider-outer-horizontal"></section>').children().eq(0).css("border","none");}if($("#ex16b").length>0){var slider=new Slider("#ex16b",{min:0,max:30,value:[0,30],focus:true,tooltip:"always"});$("#ex16b").parent().children(".slider-horizontal").addClass("slider-inner-panel").wrap('<section class="slider-outer-vertical"></section>').children().eq(0).css("border","none");}}var securityCodeArray=[];var backspaceCount=0;$("[name=securitycode]").keyup(function(e){if($(this).parent().hasClass("has-error")){$(this).parent().removeClass("has-error");}var currentInputIndex=$("[name=securitycode]").index(this);var nextInput;securityCodeArray[currentInputIndex]=$(this).val();if(e.keyCode==9||e.keyCode==16){return false;}if(e.keyCode!==8){if($(this).val().length==$(this).attr("maxlength")){nextInput=$("[name=securitycode]").get(currentInputIndex+1);$(nextInput).focus();}else{$(this).focus();}}else{backspaceCount=backspaceCount+1;var prevInput=$("[name=securitycode]").get(currentInputIndex-1);if(currentInputIndex===0){$(this).focus();}else{if(backspaceCount%2==0){$(prevInput).focus();}else{$(this).focus();}}}if(securityCodeArray.indexOf("")==-1){$("#securityErrMsg").addClass("hide");$("#securityErrText").removeClass("text-danger");}});$("[name=securitycode]").blur(function(e){var securityCode=$(this).val();if(securityCode===""){$("#securityErrMsg").removeClass("hide");$("#securityErrText").addClass("text-danger");$(this).parent().addClass("has-error");}});$("[name=securitycode]").keypress(function(e){if(e.which!=8&&e.which!=0&&(e.which<48||e.which>57)){return false;}});});$(window).load(function(){function iOSversion(){if(/iP(hone|od|ad)/.test(navigator.platform)){var v=(navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(v[1],10),parseInt(v[2],10),parseInt(v[3]||0,10)];}else{return"Not a IOS";}}var ver=iOSversion();if(parseInt(ver[0])===9){$(".wag-modal-dialog").css({display:"inherit",height:"inherit","vertical-align":"inherit","margin-top":"30px"});$(".wag-modal-outer").css({display:"inherit",height:"inherit","vertical-align":"inherit"});}});$(document).on("triggerDTM",function(event,ruleName){if(typeof _satellite!=="undefined"&&typeof _satellite.initialized!=="undefined"&&typeof _satellite.track!=="undefined"&&ruleName!==null){_satellite.track(ruleName);}});$(document).on("triggerDTMOnLoad",function(event,ruleName){if(typeof document.readyState!=="undefined"&&document.readyState!=="complete"){if(window.attachEvent){window.attachEvent("onload",function(){$(document).trigger("triggerDTM",ruleName);});}else{window.addEventListener("load",function(){$(document).trigger("triggerDTM",ruleName);},false);}}else{$(document).trigger("triggerDTM",ruleName);}});if(typeof Array.prototype.indexOf!=="function"){Array.prototype.indexOf=function(obj,start){for(var i=(start||0),j=this.length;i<j;i++){if(this[i]===obj){return i;}}return -1;};}var globalCarouselTmpl='<div class="wag-carousel-wrapper pagespan "></div><div class="prevPage visible-lg visible-md visible-sm"><span aria-hidden="true" class="icon-ChevronLeft wag-icon-Chevron-inactive"></span></div><div class="nextPage visible-lg visible-md visible-sm"><span aria-hidden="true" class="icon-ChevronRight wag-icon-Chevron-inactive"></span></div><div class="frame"></div><div class="page-header clearfix"></div>';var liVar="<li class='wag-product-card-width'><article class='wag-global-carousel-tiles' style='float:left;'><figure class='wag-global-carousel_center'><a class='wag-carousel-img-link' event-title='Top Sellers Carousel'><img class='img-responsive wag-familyoffer-productsimg imgLazy' alt='' /></a><figcaption></figcaption></figure><div class='wag-global-carousel-decs m0'><a class='trackProp30 producttitle'></a><span class='wag-oz-text wag-global-carousel-oztext'></span></div><span class='wag-sp-label'></span><span class='wag-sPNull-rP' style='font-weight:bold'></span><span class='wag-text-red wag-body-text1 wag-product-clearance-text'></span><span class='wag-product-price-text-black' style='font-weight:bold'></span><span class='wag-product-price-text-red wag-text-red' style='font-weight:bold'></span><div><small><span class='wag-salePrice-notNull wag-text-small-gray mb4' style='line-height:normal;text-decoration: line-through;' aria-hidden='true'></span><span class='sr-only saleprice-reader'></span></small></div><div class='wag-text-black wag-product-price-store-text pull-left' ></div><div class='wag-text-red wag-body-text1 wag-product-clearance-text pull-left wag-product-buyone-text ng-binding ng-scope'></div><div class='wag-unit-price'></div><div class='pull-left'><span class='wag-text-black'></span><div class='wag-prod-earn-points'><span class='media-body'><img src='' class='earnpointimg' alt='' /></span><span class='pl5 media-body media-middle wag-text-small-gray'><small><strong>earn points</strong></small></span></div></div><div class='rebatemsg'><span><a wagtooltips data-placement='right' data-toggle='popover' data-container='body' type='button' data-original-title='' class='wag-search-popover'></a></span></div></article></li>";var prodCarouselTmpl='<div class="wag-global-carousel-wrapper wag-carousel-wrapper pagespan"><div class="prevPage visible-lg visible-md visible-sm"><span aria-hidden="true" class="icon-ChevronLeft wag-icon-Chevron-inactive"></span></div><div class="nextPage visible-lg visible-md visible-sm"><span aria-hidden="true" class="icon-ChevronRight wag-icon-Chevron-inactive"></span></div><div class="frame"></div></div>';var globalVar=function(mostviewed,id,classStatus){var ulVar=angular.element("<ul/>"),reviewTag="<div class='wag-review-ratings'><span class='media-body media-middle'><img class='wag-ratings-img imgLazy invisible' alt=''><small class='wag-review-text11-m'></small></span></div>";angular.forEach(mostviewed.products,function(val,idx){var ulLi=angular.element(liVar).clone()[0];if(val.productInfo.newItem=="Yes"){angular.element(ulLi).prepend(angular.element('<img alt="New Item" src="/images/adaptive/share/images/Icon_New_T_54x50.png" style="position: absolute;top: 0;left: 0;">'));}angular.element(ulLi).find(".wag-carousel-img-link").attr("href",id!="sponsoredarrivals"?val.productInfo.productURL:"javascript:void(0)");var anchor_label="<span class='sr-only'>"+val.productInfo.productDisplayName+" with upc of  "+val.productInfo.upc+"</span>";angular.element(ulLi).find(".wag-carousel-img-link").append(anchor_label);angular.element(ulLi).find(".wag-global-carousel-tiles").attr("wic",val.productInfo.wic);angular.element(ulLi).find(".wag-carousel-img-link img").attr("alt",val.productInfo.productDisplayName);angular.element(ulLi).find(".wag-familyoffer-productsimg").attr("src",val.productInfo.imageUrl);angular.element(ulLi).find(".producttitle").text((val.productInfo.productDisplayName).substring(0,29)+"...").attr("href",id!="sponsoredarrivals"?val.productInfo.productURL:"javascript:void(0)").attr("title",val.productInfo.productDisplayName);angular.element(ulLi).find(".wag-oz-text").text(val.productInfo.productSize).insertAfter(angular.element(ulLi).find(".producttitle"));if(val.productInfo.ImpBeacon){angular.element(ulLi).find(".wag-global-carousel-tiles").after("<img height='0' width='0' alt='impression beacon' class='imp-beacon-val car-imp-beacon-"+idx+"' data-src='"+val.productInfo.ImpBeacon+"' src=''>");}if(val.productInfo.reviewURL){var reviewBefore=angular.element(ulLi).find(".wag-global-carousel-decs");$(reviewTag).insertAfter(reviewBefore);angular.element(ulLi).find(".wag-ratings-img").attr("src",val.productInfo.reviewURL).attr("width","70").attr("height","13").removeClass("invisible");}if(val.productInfo.reviewCount){angular.element(ulLi).find(".wag-review-text11-m").text("("+val.productInfo.reviewCount+")").addClass("wag-text-small-gray mb4");}if(val.productInfo.priceInfo&&val.productInfo.priceInfo.salePrice==null){if(val.productInfo.priceInfo.salePriceLabel!=null){angular.element(ulLi).find(".wag-sp-label").addClass("wag-text-black wag-carousel-price-info wag-rel-width").html("<span class='wag-price-black' ng-if='val.productInfo.priceInfo.salePriceLabel!=null'>"+val.productInfo.priceInfo.salePriceLabel+" </span>");}if(val.productInfo.priceInfo.regularPriceHtml){angular.element(ulLi).find(".wag-sPNull-rP").html("<span aria-hidden='true'>"+val.productInfo.priceInfo.regularPriceHtml+"</span><span class='sr-only' style='position:absolute!important'>regular price</span><span class='sr-only' style='position:absolute!important'>"+val.productInfo.priceInfo.regularPrice+"</span>").addClass("wag-text-black wag-product-price-text wag-head-text2 wag-carousel-price-info wag-hn-lt-bold wag-rel-width");}else{angular.element(ulLi).find(".wag-sPNull-rP").text(val.productInfo.priceInfo.regularPrice).addClass("wag-text-black wag-product-price-text wag-head-text2");}}if(val.productInfo.priceInfo&&val.productInfo.priceInfo.messages){angular.element(ulLi).find(".wag-product-price-store-text").text(val.productInfo.priceInfo.messages.message);}if(val.productInfo.clearance=="Yes"&&val.productInfo.priceInfo.salePrice){if(val.productInfo.priceInfo.salePriceHtml){angular.element(ulLi).find(".wag-product-clearance-text").html("<span aria-hidden='true'>"+val.productInfo.priceInfo.salePriceHtml+"</span><span class='sr-only' style='position:absolute!important'>Sale price</span><span class='sr-only' style='position:absolute!important'>"+val.productInfo.priceInfo.salePrice+"</span>").addClass("wag-text-red wag-carousel-price-info wag-hn-lt-bold");}else{angular.element(ulLi).find(".wag-product-clearance-text").text(val.productInfo.priceInfo.salePrice).addClass("wag-text-red");}$("<style>.wag-global-carousel-tiles .wag-product-clearance-text {display:none} .wag-global-carousel-wrapper{height: auto;min-height:200px;} .wag-body-text1.wag-carousel-price-info.wag-product-clearance-text.wag-text-red{display: none;}</style>").appendTo("head");}if(val.productInfo.priceInfo&&val.productInfo.priceInfo.salePrice!=null){if(val.productInfo.priceInfo.salePriceLabel){angular.element(ulLi).find(".wag-product-price-text-black").addClass("wag-text-black wag-carousel-price-info wag-rel-width").html("<span class='wag-price-black' ng-if='val.productInfo.priceInfo.salePriceLabel!=null'>"+val.productInfo.priceInfo.salePriceLabel+" </span>");}if(val.productInfo.priceInfo.salePrice){if(val.productInfo.priceInfo.salePriceHtml){angular.element(ulLi).find(".wag-product-price-text-red").html("<span aria-hidden='true'>"+val.productInfo.priceInfo.salePriceHtml+"</span><span class='sr-only' style='position:absolute!important'>Sale price</span><span class='sr-only' style='position:absolute!important'>"+val.productInfo.priceInfo.salePrice+"</span>").addClass("wag-text-red wag-head-text2 wag-carousel-price-info wag-hn-lt-bold wag-rel-width");}else{angular.element(ulLi).find(".wag-product-price-text-red").text(val.productInfo.priceInfo.salePrice).addClass("wag-text-red wag-head-text2");}}}if(val.productInfo.priceInfo&&val.productInfo.priceInfo.salePrice!=null){angular.element(ulLi).find(".wag-salePrice-notNull").text(val.productInfo.priceInfo.regularPrice);angular.element(ulLi).find(".saleprice-reader").text("original price "+val.productInfo.priceInfo.regularPrice);}if(val.productInfo.priceInfo&&val.productInfo.priceInfo.ruleMessage!=null){angular.element(ulLi).find(".wag-product-buyone-text").text(val.productInfo.priceInfo.ruleMessage.prefix).addClass("wag-text-red wag-body-text1 wag-product-clearance-text");}if(val.productInfo.priceInfo&&(val.productInfo.priceInfo.loyaltyMessage&&(val.productInfo.priceInfo.loyaltyMessage.displayBRImgLink==="yes"||val.productInfo.priceInfo.loyaltyMessage.displayBRImg))){angular.element(ulLi).find(".earnpointimg").attr("src",id!=="sponsoredarrivals"?"/images/adaptive/share/images/icons/coupon_points_offer_BR_icon.png":"").attr("title",val.productInfo.productDisplayName);}else{angular.element(ulLi).find(".wag-prod-earn-points").remove();}if(val.productInfo.rebateMessage!=null){angular.element(ulLi).find(".rebatemsg > span > a").attr("href",val.productInfo.rebateMessage.message!="See rebate"&&val.productInfo.productURL||val.productInfo.rebateMessage.url).text(val.productInfo.rebateMessage.message).attr("title",val.productInfo.rebateMessage.message).attr("data-content",val.productInfo.rebateMessage.message);}else{angular.element(ulLi).find(".rebatemsg > span").remove();}ulVar.append(ulLi);if(id==="sponsoredarrivals"&&val.productInfo&&val.productInfo.ClickBeacon){angular.element(ulLi).addClass("sponsored").attr("id",idx).attr("imagehref",id==="sponsoredarrivals"?val.productInfo.productURL:"").attr("prodId",id==="sponsoredarrivals"?val.productInfo.prodId:"");angular.element(ulLi).prepend(angular.element('<div class="hide" id="clickbeacon'+idx+'">'+val.productInfo.ClickBeacon+"</div>"));}if(val.productInfo.reviewHoverMessage&&val.productInfo.reviewCount){var alrMessage=val.productInfo.reviewHoverMessage+" based on "+val.productInfo.reviewCount+" ratings";angular.element(ulLi).find(".wag-ratings-img").attr("alt",alrMessage);}});if(mostviewed.url!=""&&typeof mostviewed.url!=="undefined"){var viewMore=angular.element("<li/>").html("<a href='"+mostviewed.url+"'><div class='wag-global-carousel-view-moretxt'><span class='sr-only'>'"+id+"'</span>View more</div></a>").addClass("wag-product-card-width wag-global-carousel-view-more")[0];ulVar.append(viewMore);}if(classStatus===true){setTimeout(function(){var finalFrame=angular.element("<div/>").html(prodCarouselTmpl)[0];var eleLength=$("."+id).length;angular.element(finalFrame).find(".frame").addClass(id+"Frame").append(ulVar);angular.element("."+id).html((angular.element(finalFrame).clone()).html());var count=0;angular.forEach(angular.element("."+id+"Frame"),function(v,i){$(v).attr("id",id+"Frame"+(++count));});var slyConfig={horizontal:1,itemNav:"basic",smart:1,activateOn:"null",mouseDragging:1,touchDragging:1,releaseSwing:1,startAt:0,scrollBar:null,scrollBy:0,activatePageOn:"click",speed:500,dragHandle:1,dynamicHandle:1,clickBar:1,pagesBar:"",forward:"",backward:"",prev:"",next:"",prevPage:"",nextPage:""};var moveConfig={};moveConfig.move=function(){angular.forEach($("#"+id+" li"),function(value,key){var targetEle=$(value).find(".imp-beacon-val");if(targetEle.attr("data-src")!==""&&$(value).position().left<=$(value).parent().parent().width()){targetEle.attr("src",targetEle.attr("data-src"));targetEle.attr("data-src","");}});};for(i=1;i<=eleLength;i++){var $frame=$("#"+id+"Frame"+i);var $wrap=$frame.parent();slyConfig.pagesBar=$wrap.find(".pages");slyConfig.forward=$wrap.find(".forward");slyConfig.backward=$wrap.find(".backward");slyConfig.prev=$wrap.find(".prev");slyConfig.next=$wrap.find(".next");slyConfig.prevPage=$wrap.find(".prevPage");slyConfig.nextPage=$wrap.find(".nextPage");if(typeof $frame.sly!=="undefined"){if(id=="sponsoredarrivals"){var sly=$frame.sly(slyConfig,moveConfig);}else{var sly=$frame.sly(slyConfig);}var pastFrameWidth=parseInt($frame.css("width"));$(window).bind("resize",function(e){var currentFrameWidth=parseInt($frame.css("width"));if(currentFrameWidth!==pastFrameWidth&&currentFrameWidth!==0){$frame.sly("reload");pastFrameWidth=currentFrameWidth;}});}}function addKeydownOpt(){var prevArrow=$("."+id+" .prevPage>span")[0];var nextArrow=$("."+id+" .nextPage>span")[0];var frame=$("."+id+" .frame")[0];var nextShiftTabA,nextTabA,nextEnterA,prevTabA,prevEnterA;var liSet=$("."+id+" .frame li");var j;var prodTitleSet=$("."+id+" .frame li a.producttitle").toArray();var prodImgSet=$("."+id+" .frame li a.wag-carousel-img-link").toArray();nextTabA=prodTitleSet[prodTitleSet.length-1];if(liSet.length>prodTitleSet.length){var lastLiA=$(liSet[liSet.length-1]).find("a");nextTabA=lastLiA[lastLiA.length-1];}var firstTabA=prodImgSet[0];var lastTabA=nextTabA;firstTabA.onfocus=function(){if(!$("."+id+" .prevPage").hasClass("disabled")){prevArrow.tabIndex=0;prevArrow.focus();}};lastTabA.onfocus=function(){if(!($("."+id+" .nextPage").hasClass("disabled")||$("."+id+" .nextPage").hasClass("tabbed"))){nextArrow.tabIndex=0;nextArrow.focus();}else{if($("."+id+" .nextPage").hasClass("tabbed")){setTimeout(function(){$("."+id+" .nextPage").removeClass("tabbed");},10);}}};for(j=0;j<liSet.length;j++){if((j+1)%4==0){var lastA=$(liSet[j]).find("a.producttitle")[0];if(lastA){$(lastA).on("keydown",function(e){if(e.keyCode==9&&!e.shiftKey){nextShiftTabA=e.target;nextEnterA=prodImgSet[prodTitleSet.indexOf(e.target)+1];if(!$("."+id+" .nextPage").hasClass("disabled")){e.preventDefault();nextArrow.tabIndex=0;nextArrow.focus();}}});}}else{if((j+1)%4==1){var firstA=$(liSet[j]).find("a.wag-carousel-img-link")[0];if(firstA){$(firstA).on("keydown",function(e){if(e.keyCode==9&&e.shiftKey){prevTabA=e.target;prevEnterA=prodTitleSet[prodImgSet.indexOf(e.target)-1];if(!$("."+id+" .prevPage").hasClass("disabled")){e.preventDefault();prevArrow.tabIndex=0;prevArrow.focus();}}});}}}}$(nextArrow).on("keydown",function(e){if(e.keyCode==9&&!e.shiftKey){e.target.tabIndex=-1;$("."+id+" .nextPage").addClass("tabbed");nextTabA.focus();}else{if(e.keyCode==9&&e.shiftKey){e.target.tabIndex=-1;e.preventDefault();nextShiftTabA.focus();}else{if(e.keyCode==13){e.target.click();setTimeout(function(){nextEnterA.focus();e.target.tabIndex=-1;},400);}}}});$(prevArrow).on("keydown",function(e){if(e.keyCode==9&&e.shiftKey){e.target.tabIndex=-1;firstTabA.focus();}else{if(e.keyCode==9&&!e.shiftKey){e.target.tabIndex=-1;e.preventDefault();prevTabA.focus();}else{if(e.keyCode==13){e.target.click();setTimeout(function(){prevEnterA.focus();e.target.tabIndex=-1;},400);}}}});}function setLargeHeight(){var largeHeight=0;$.each($("."+id+" .wag-product-card-width"),function(val,idx){var _this=parseInt($(this).css("height"));if(largeHeight<_this){largeHeight=_this;}});$("."+id+" .wag-product-card-width").attr("style","height:"+largeHeight+"px;position:relative;");$("."+id+" .prevPage").attr("style","height:"+(largeHeight+20)+"px;position:relative;");$("."+id+" .nextPage").attr("style","height:"+(largeHeight+20)+"px;position:relative;");}if($("."+id).is(":visible")){setTimeout(function(){setLargeHeight();addKeydownOpt();},200);}else{var intervelForSetLargeHeight=setInterval(function(){if($("."+id).is(":visible")){clearInterval(intervelForSetLargeHeight);setLargeHeight();addKeydownOpt();}},300);}},0);}};